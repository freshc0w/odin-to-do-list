(()=>{"use strict";class t{constructor(t,e,s,n,i){this.name=t,this.description=e,this.dueDate=s,this.priority=n,this.id=i}set name(t){this._name=t}get name(){return this._name}get id(){return this._id}set id(t){this._id=t}get priority(){return this._priority}set priority(t){this._priority=t}get description(){return this._description}set description(t){this._description=t}get dueDate(){return this._dueDate}set dueDate(t){this._dueDate=t}get dueDateFormatted(){return`${this.dueDate.split("-")[0]}/${this.dueDate.split("-")[1]}/${this.dueDate.split("-")[2]}`}}class e{constructor(t){this.name=t,this.tasks=[]}get name(){return this._name}set name(t){this._name=t}get tasks(){return this._tasks}set tasks(t){this._tasks=t}addTask(t){this._tasks.push(t)}deleteTask(t){this._tasks=this._tasks.filter((e=>e.getId()!==t))}}class s{constructor(){this.projects=[],this.projects.push(new e("Inbox")),this.projects.push(new e("Today")),this.projects.push(new e("This Week")),this.projects.push(new e("React"))}get projects(){return this._projects}set projects(t){this._projects=t}contains(t){return this.projects.some((e=>e.name===t))}getProject(t){return this.projects.find((e=>e.name===t))}addProject(t){this.contains(t)||this.projects.push(new e(t))}deleteProject(t){const e=this.projects.find((e=>e.name===t));this.projects.splice(this.projects.indexOf(e),1)}}class n{constructor(t){this.task=t}renderInfo(t,e,s=""){const n=document.createElement(t);return n.classList.add(e),n.textContent=s,n}createElements(t){const e=this.renderInfo("input","statusCheck");e.setAttribute("type","checkbox"),e.setAttribute("id","statusCheck"),e.addEventListener("change",(e=>{e.target.checked?t.style.opacity="40%":t.style.opacity="100%"}));const s=this.renderInfo("div","taskName",this.task.name),n=this.renderInfo("button","uniqueBtn","Details");n.classList.add("details");const i=this.renderInfo("div","statusPrio"),a=this.renderInfo("i","material-icons","warning");a.classList.add(this.task.priority),i.appendChild(a);const d=this.renderInfo("div","taskDate",this.task.dueDateFormatted),r=this.renderInfo("div","taskEdit"),o=this.renderInfo("i","material-icons","edit");r.appendChild(o);const c=this.renderInfo("div","taskDel"),l=this.renderInfo("i","material-icons","delete");return c.classList.add(this.task.id),c.appendChild(l),[e,s,n,i,d,r,c]}draw(){const t=this.renderInfo("div","task-container"),e=this.createElements(t);for(let s of e)t.appendChild(s);return t}}class i{constructor(t){this.project=t}draw(){const t=document.querySelector("#main-content");this.clear(t),this.drawTasks(t,this.project.tasks);const e=this.addTaskOption();t.appendChild(e)}addTaskOption(){const t=document.createElement("div");t.classList.add("task-container"),t.classList.add("add");const e=document.createElement("button");return e.classList.add("uniqueBtn"),e.classList.add("add"),e.textContent="ADD",t.appendChild(e),t}drawTasks(t,e){for(let s of e){const e=new n(s);t.appendChild(e.draw())}}clear(t){t.innerHTML=""}completeTask(){document.getElementById()}}(new class{constructor(){this.toDoList=new s,this.currentProjectPage="Inbox",this.currentForm=(()=>{const t=document.querySelector(".form-container"),e=()=>{const t=document.createElement("img");return t.classList.add("closeFormBtn"),t.src="../../../imgs/mac-close-btn.png",t.alt="A button that closes the form.",t.addEventListener("click",(()=>{const t=document.querySelector("form"),e=document.querySelector(".face-mask");t.style.visibility="hidden",e.style.visibility="hidden"})),t},s=()=>{const t=document.createElement("div"),e=document.createElement("label");e.classList.add("dateLabel"),e.setAttribute("for","inputDueDate"),e.textContent="Due Date:";const s=document.createElement("input");return s.setAttribute("type","date"),s.setAttribute("id","inputDueDate"),s.setAttribute("name","trip-start"),t.appendChild(e),t.appendChild(s),t},n=()=>{const t=document.createElement("div"),e=document.createElement("div"),s=document.createElement("div");t.classList.add("prioWrapper"),s.classList.add("prioOptions"),e.classList.add("prioLabel"),e.textContent="How important is this task?";const n=d("lowPrio","low"),i=d("medPrio","medium"),a=d("highPrio","high");for(let t of[n,i,a])s.appendChild(t);return t.appendChild(e),t.appendChild(s),t;function d(t,e){const s=document.createElement("div"),n=document.createElement("input"),i={type:"radio",id:t,name:"prio",value:e};for(let t in i)n.setAttribute(t,i[t]);const a=document.createElement("label");return a.setAttribute("for",t),a.classList.add(t),a.textContent=e,s.appendChild(n),s.appendChild(a),s}};return{addTask:()=>{const i=((t,e,s,n=!0)=>{const i=document.createElement("div"),a=document.createElement("label");a.setAttribute("for",s),a.textContent=t;const d=document.createElement("input"),r={type:"text",id:s,name:s,placeholder:e};for(let t in r)d.setAttribute(t,r[t]);return d.required=n,i.appendChild(a),i.appendChild(d),i})("Task Title: ","e.g. Learn React in 20 days..","inputTaskTitle");i.classList.add("inputTaskTitle");const a=((t,e,s,n=!0)=>{const i=document.createElement("div"),a=document.createElement("label");a.setAttribute("for",s),a.textContent=t;const d=document.createElement("textarea"),r={id:s,name:s,placeholder:e,rows:6,cols:50};for(let t in r)d.setAttribute(t,r[t]);return d.required=n,i.appendChild(a),i.appendChild(d),i})("Task Details: ","e.g. Not an task. Remember to take breaks and walk outside.","inputTaskDetails");a.classList.add("inputTaskDetails");const d=[i,a,n(),s(),e()];for(let e of d)t.appendChild(e);const r=(()=>{const t=document.createElement("button");return t.classList.add("uniqueBtn"),t.classList.add("appendTaskBtn"),t.textContent="Add Task",t.setAttribute("type","submit"),t})();t.appendChild(r)},clear:()=>{for(;t.firstChild;)t.removeChild(t.lastChild)},collectTaskInfo:()=>{const t=document.getElementById("inputTaskTitle"),e=document.getElementById("inputTaskDetails"),s=document.querySelector('input[name="prio"]:checked'),n=document.querySelector("#inputDueDate");return{title:t.value,details:e.value,priority:s.value,date:n.value}}}})()}loadHomePage(){this.toDoList.getProject("Inbox").addTask(new t("Walking the dog","He is asking for it so this task is a must","25-02-2002","medium",this.toDoList.getProject("Inbox").tasks.length)),this.drawPage(this.currentProjectPage),this.loadSideBar()}addTaskFunction(){document.querySelector(".uniqueBtn.add").addEventListener("click",(()=>{this.currentForm.clear(),this.currentForm.addTask(),document.querySelector("form").style.visibility="visible",document.querySelector(".face-mask").style.visibility="visible",inputDueDate.valueAsDate=new Date;const t=document.querySelector(".uniqueBtn.appendTaskBtn");this.drawNewTask(t,"Inbox")}))}drawNewTask(e,s){e.addEventListener("click",(e=>{const n=this.currentForm.collectTaskInfo();this.toDoList.getProject(s).addTask(new t(n.title,n.details,n.date,n.priority,this.toDoList.getProject(s).length));const i=this.toDoList.getProject(s).tasks;console.log(i);const a=document.querySelector(`.taskDel.${taskId}`);this.addDeleteTaskFunction(s,a,taskId),this.drawPage(s),document.querySelector("form").style.visibility="hidden",document.querySelector(".face-mask").style.visibility="hidden",e.preventDefault()}))}drawPage(t){new i(this.toDoList.getProject(t)).draw(),this.addTaskFunction()}addDeleteTaskFunction(t,e,s){e.addEventListener("click",(()=>{this.toDoList.getProject(t).deleteTask(s),this.drawPage(t)}))}loadSideBar(){this.addSlideInOut(),this.drawInboxTabs(),this.drawProjectTabs()}drawInboxTabs(){const t=document.createElement("ul");this.addTab(t,"Today"),this.addTab(t,"This Week");const e=document.querySelector(".inbox-bar");e.appendChild(t),this.addDropDownMenu(e,t)}drawProjectTabs(){const t=["Inbox","Today","This Week"],e=this.toDoList.projects.filter((e=>!t.includes(e.name))),s=document.createElement("ul");for(let t of e)this.addTab(s,t.name);const n=document.querySelector(".project-bar");n.appendChild(s),this.addDropDownMenu(n,s)}addDropDownMenu(t,e){t.addEventListener("mouseover",(()=>{e.style.display="block"})),t.addEventListener("mouseout",(()=>{e.style.display="none"}))}addTab(t,e){const s=document.createElement("li");s.textContent=this.toDoList.getProject(e).name,t.appendChild(s)}addSlideInOut(){const t=document.getElementById("sideBar");document.querySelectorAll(".material-icons"),document.querySelectorAll(".icon-text"),t.addEventListener("mouseover",(()=>{t.style.width="200px"})),t.addEventListener("mouseout",(()=>{t.style.width="65px"}))}}).loadHomePage()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eEIsQ0FFQWhCLGdCQUNJLE1BQU1pQixFQUFVeEgsU0FBU3VDLGVBQWUsV0FDbEJ2QyxTQUFTeUgsaUJBQWlCLG1CQUMvQnpILFNBQVN5SCxpQkFBaUIsY0FDM0NELEVBQVEvRyxpQkFBaUIsYUFBYSxLQUNsQytHLEVBQVEzRyxNQUFNNkcsTUFBUSxPQUFPLElBRWpDRixFQUFRL0csaUJBQWlCLFlBQVksS0FDakMrRyxFQUFRM0csTUFBTTZHLE1BQVEsTUFBTSxHQUdwQyxJRGxLVWxDLGMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGluLXRvLWRvLWxpc3QvLi9zcmMvbW9kdWxlcy90YXNrLmpzIiwid2VicGFjazovL29kaW4tdG8tZG8tbGlzdC8uL3NyYy9tb2R1bGVzL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby1saXN0Ly4vc3JjL21vZHVsZXMvQWxsUHJvamVjdHMuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby1saXN0Ly4vc3JjL21vZHVsZXMvVUkvUHJvamVjdFVJLmpzIiwid2VicGFjazovL29kaW4tdG8tZG8tbGlzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvLWRvLWxpc3QvLi9zcmMvbW9kdWxlcy9VSS5qcyIsIndlYnBhY2s6Ly9vZGluLXRvLWRvLWxpc3QvLi9zcmMvbW9kdWxlcy9VSS9mb3JtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2sge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgaWQpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMuaWQgPSBpZDsgLy8gVG8gYWxsb3cgZGVsZXRpb24gb2YgdGFzayB3aXRoIHRoZSBzYW1lIG5hbWU7XG4gICAgICAgIFxuICAgIH1cbiAgICBzZXQgbmFtZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9uYW1lID0gdmFsdWU7XG4gICAgfTtcblxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICB9O1xuICAgIFxuXG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faWQ7XG4gICAgfTtcbiAgICBzZXQgaWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5faWQgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IHByaW9yaXR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJpb3JpdHk7XG4gICAgfVxuICAgIHNldCBwcmlvcml0eSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9wcmlvcml0eSA9IHZhbHVlO1xuICAgIH1cbiAgICBcbiAgICBnZXQgZGVzY3JpcHRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZXNjcmlwdGlvbjtcbiAgICB9O1xuICAgIHNldCBkZXNjcmlwdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IHZhbHVlO1xuICAgIH07XG5cbiAgICBnZXQgZHVlRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2R1ZURhdGU7XG4gICAgfTtcbiAgICBzZXQgZHVlRGF0ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9kdWVEYXRlID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBkdWVEYXRlRm9ybWF0dGVkKCkge1xuICAgICAgICBjb25zdCBkYXkgPSB0aGlzLmR1ZURhdGUuc3BsaXQoJy0nKVswXTtcbiAgICAgICAgY29uc3QgbW9udGggPSB0aGlzLmR1ZURhdGUuc3BsaXQoJy0nKVsxXTtcbiAgICAgICAgY29uc3QgeWVhciA9IHRoaXMuZHVlRGF0ZS5zcGxpdCgnLScpWzJdO1xuXG4gICAgICAgIHJldHVybiBgJHtkYXl9LyR7bW9udGh9LyR7eWVhcn1gO1xuICAgIH07XG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2plY3Qge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy50YXNrcyA9IFtdO1xuICAgIH07XG4gICAgXG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICAgIH07XG4gICAgc2V0IG5hbWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IHZhbHVlO1xuICAgIH07XG4gICAgZ2V0IHRhc2tzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza3M7XG4gICAgfTtcbiAgICBzZXQgdGFza3ModmFsdWUpIHtcbiAgICAgICAgdGhpcy5fdGFza3MgPSB2YWx1ZTtcbiAgICB9XG4gICAgYWRkVGFzayh0YXNrKSB7XG4gICAgICAgIHRoaXMuX3Rhc2tzLnB1c2godGFzayk7ICAgICAgICBcbiAgICB9O1xuICAgIGRlbGV0ZVRhc2sodGFza0lkKSB7XG4gICAgICAgIHRoaXMuX3Rhc2tzID0gdGhpcy5fdGFza3MuZmlsdGVyKHRhc2sgPT4gdGFzay5nZXRJZCgpICE9PSB0YXNrSWQpO1xuICAgIH07XG5cbiAgICAvLyBUbyBiZSBhZGRlZDogR2V0IHRvZGF5J3MgYW5kIHRoaXMgd2VlaydzIHRhc2tzLiBcbn07IiwiaW1wb3J0IFRhc2sgZnJvbSBcIi4vdGFza1wiO1xuaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vcHJvamVjdFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbGxQcm9qZWN0cyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJvamVjdHMgPSBbXTtcbiAgICAgICAgdGhpcy5wcm9qZWN0cy5wdXNoKG5ldyBQcm9qZWN0KCdJbmJveCcpKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0cy5wdXNoKG5ldyBQcm9qZWN0KCdUb2RheScpKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0cy5wdXNoKG5ldyBQcm9qZWN0KCdUaGlzIFdlZWsnKSk7XG4gICAgICAgIHRoaXMucHJvamVjdHMucHVzaChuZXcgUHJvamVjdCgnUmVhY3QnKSk7XG4gICAgfTtcblxuICAgIGdldCBwcm9qZWN0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2plY3RzO1xuICAgIH07XG4gICAgc2V0IHByb2plY3RzKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3Byb2plY3RzID0gdmFsdWU7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgcHJvamVjdCBuYW1lIGV4aXN0cyBpbiBsaXN0IG9mIHByb2plY3RzLlxuICAgIGNvbnRhaW5zKHByb2plY3ROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3RzLnNvbWUocHJvamVjdCA9PiBwcm9qZWN0Lm5hbWUgPT09IHByb2plY3ROYW1lKTtcbiAgICB9O1xuXG4gICAgZ2V0UHJvamVjdChwcm9qZWN0TmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9qZWN0cy5maW5kKHByb2plY3QgPT4gcHJvamVjdC5uYW1lID09PSBwcm9qZWN0TmFtZSk7XG4gICAgfTtcblxuICAgIGFkZFByb2plY3QobmV3UHJvamVjdE5hbWUpIHtcbiAgICAgICAgLy8gQ2Fubm90IGhhdmUgc2FtZSBwcm9qZWN0IG5hbWVzLlxuICAgICAgICBpZiAodGhpcy5jb250YWlucyhuZXdQcm9qZWN0TmFtZSkpIHJldHVybjtcbiAgICAgICAgdGhpcy5wcm9qZWN0cy5wdXNoKG5ldyBQcm9qZWN0KG5ld1Byb2plY3ROYW1lKSk7XG4gICAgfTtcblxuICAgIGRlbGV0ZVByb2plY3QocHJvamVjdE5hbWUpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdFRvRGVsZXRlID0gdGhpcy5wcm9qZWN0cy5maW5kKHByb2plY3QgPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3QubmFtZSA9PT0gcHJvamVjdE5hbWUpO1xuICAgICAgICB0aGlzLnByb2plY3RzLnNwbGljZSh0aGlzLnByb2plY3RzLmluZGV4T2YocHJvamVjdFRvRGVsZXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSlcbiAgICB9O1xuICAgIFxuXG4gICAgLy8gQ2FuIGFkZCB0b2RheSdzIGFuZCB0aGlzIHdlZWsncyBmdW5jdGlvbmFsaXR5LlxufTsiLCJpbXBvcnQgVGFzayBmcm9tIFwiLi4vdGFza1wiO1xuaW1wb3J0IFByb2plY3QgZnJvbSBcIi4uL3Byb2plY3RcIjtcblxuY2xhc3MgVGFza1VJIHtcblx0Ly8gUHVycG9zZSBvZiB0aGlzIGNsYXNzIGl0IHRvIHRha2UgaW4gYSB0YXNrIG9iaiwgYW5kIHR1cm4gaXQgaW50b1xuXHQvLyBhIGRpdiB3aXRoIGFsbCByZWxldmFudCBpbmZvcm1hdGlvbiByZWdhcmRpbmcgdGhlIHRhc2suXG5cdC8vIEZyb20gbGVmdC10by1yaWdodDogW2NoZWNrQm94LCBuYW1lLCBkZXRhaWxzLCBwcmlvcml0eSwgZGF0ZSwgZWRpdEljb24sIGJpbkljb25dXG5cdGNvbnN0cnVjdG9yKHRhc2tPYmopIHtcblx0XHR0aGlzLnRhc2sgPSB0YXNrT2JqO1xuXHR9XG5cdHJlbmRlckluZm8oZWxlbSwgYWRkZWRDbGFzcywgdGV4dCA9IFwiXCIpIHtcblx0XHRjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtKTtcblx0XHRuYW1lLmNsYXNzTGlzdC5hZGQoYWRkZWRDbGFzcyk7XG5cdFx0bmFtZS50ZXh0Q29udGVudCA9IHRleHQ7IC8vIGRlZmF1bHQgZW1wdHkgc3RyXG5cblx0XHRyZXR1cm4gbmFtZTtcblx0fVxuXHRjcmVhdGVFbGVtZW50cyh0YXNrQ29udGFpbmVyKSB7XG5cdFx0Y29uc3Qgc3RhdHVzQ2hlY2sgPSB0aGlzLnJlbmRlckluZm8oXCJpbnB1dFwiLCBcInN0YXR1c0NoZWNrXCIpO1xuXHRcdHN0YXR1c0NoZWNrLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcblx0XHRzdGF0dXNDaGVjay5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInN0YXR1c0NoZWNrXCIpO1xuXHRcdHN0YXR1c0NoZWNrLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHtcblx0XHRcdFx0dGFza0NvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gXCI0MCVcIjtcblx0XHRcdFx0Ly8gdGFza0NvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMC45ODUpJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRhc2tDb250YWluZXIuc3R5bGUub3BhY2l0eSA9IFwiMTAwJVwiO1xuXHRcdFx0XHQvLyB0YXNrQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgxKSc7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRjb25zdCBuYW1lID0gdGhpcy5yZW5kZXJJbmZvKFwiZGl2XCIsIFwidGFza05hbWVcIiwgdGhpcy50YXNrLm5hbWUpO1xuXG5cdFx0Ly8gV2hlbiBjbGlja2VkLCBwb3AgdXAgYSBmb3JtIHdoZXJlIHRoZSBkZXRhaWxzIG9mIHRoZSB0YXNrIGlzIGRpc3BsYXllZC5cblx0XHRjb25zdCBkZXRhaWxzQnRuID0gdGhpcy5yZW5kZXJJbmZvKFwiYnV0dG9uXCIsIFwidW5pcXVlQnRuXCIsIFwiRGV0YWlsc1wiKTtcblx0XHRkZXRhaWxzQnRuLmNsYXNzTGlzdC5hZGQoXCJkZXRhaWxzXCIpO1xuXG5cdFx0Ly8gUHJpb3JpdHkgaWNvblxuXHRcdGNvbnN0IHByaW9yaXR5ID0gdGhpcy5yZW5kZXJJbmZvKFwiZGl2XCIsIFwic3RhdHVzUHJpb1wiKTtcblx0XHRjb25zdCBwcmlvcml0eUljb24gPSB0aGlzLnJlbmRlckluZm8oXCJpXCIsIFwibWF0ZXJpYWwtaWNvbnNcIiwgXCJ3YXJuaW5nXCIpO1xuXG5cdFx0Ly8gQ2hhbmdlIGNvbG9yIGJhc2VkIG9uIHByaW9yaXR5IG9mIHRhc2sgLT4gWydoaWdoJywgJ21lZGl1bScsICdsb3cnXVxuXHRcdHByaW9yaXR5SWNvbi5jbGFzc0xpc3QuYWRkKHRoaXMudGFzay5wcmlvcml0eSk7XG5cdFx0cHJpb3JpdHkuYXBwZW5kQ2hpbGQocHJpb3JpdHlJY29uKTtcblxuXHRcdC8vIEp1c3QgYSBtb2NrIGRhdGUgZm9yIG5vdy4gU3ViamVjdCB0byBjaGFuZ2UgYmFzZWQgb24gdXNlciBpbnB1dC5cblx0XHQvLyBjb25zdCB0aW1lRWxhcHNlZCA9IERhdGUubm93KCk7XG5cdFx0Ly8gY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSh0aW1lRWxhcHNlZCk7XG5cdFx0Ly8gY29uc3QgZGF0ZSA9IHRoaXMucmVuZGVySW5mbyhcblx0XHQvLyBcdFwiZGl2XCIsXG5cdFx0Ly8gXHRcInRhc2tEYXRlXCIsXG5cdFx0Ly8gXHRgJHt0b2RheS50b0xvY2FsZURhdGVTdHJpbmcoKX1gXG5cdFx0Ly8gKTtcblxuXHRcdGNvbnN0IGRhdGUgPSB0aGlzLnJlbmRlckluZm8oXG5cdFx0XHRcImRpdlwiLFxuXHRcdFx0XCJ0YXNrRGF0ZVwiLFxuXHRcdFx0dGhpcy50YXNrLmR1ZURhdGVGb3JtYXR0ZWRcblx0XHQpXG5cblx0XHQvLyBpY29uc1xuXHRcdGNvbnN0IGVkaXQgPSB0aGlzLnJlbmRlckluZm8oXCJkaXZcIiwgXCJ0YXNrRWRpdFwiKTtcblx0XHRjb25zdCBlZGl0SWNvbiA9IHRoaXMucmVuZGVySW5mbyhcImlcIiwgXCJtYXRlcmlhbC1pY29uc1wiLCBcImVkaXRcIik7XG5cdFx0ZWRpdC5hcHBlbmRDaGlsZChlZGl0SWNvbik7XG5cblx0XHRjb25zdCB0YXNrRGVsID0gdGhpcy5yZW5kZXJJbmZvKFwiZGl2XCIsIFwidGFza0RlbFwiKTtcblx0XHRjb25zdCBkZWxJY29uID0gdGhpcy5yZW5kZXJJbmZvKFwiaVwiLCBcIm1hdGVyaWFsLWljb25zXCIsIFwiZGVsZXRlXCIpO1xuXHRcdFx0XG5cdFx0Ly8gQWRkIGNsYXNzIGlkZW50aWZlci5cblx0XHR0YXNrRGVsLmNsYXNzTGlzdC5hZGQodGhpcy50YXNrLmlkKTtcblxuXHRcdC8vIENyZWF0ZSBEYXRhc2V0Pz9cblx0XHQvLyBkZWxJY29uLmRhdGFzZXQuaWQgPSB0aGlzLnRhc2suaWQ7XG5cblx0XHR0YXNrRGVsLmFwcGVuZENoaWxkKGRlbEljb24pO1xuXG5cdFx0cmV0dXJuIFtzdGF0dXNDaGVjaywgbmFtZSwgZGV0YWlsc0J0biwgcHJpb3JpdHksIGRhdGUsIGVkaXQsIHRhc2tEZWxdO1xuXHR9XG5cdGRyYXcoKSB7XG5cdFx0Y29uc3QgdGFza0NvbnRhaW5lciA9IHRoaXMucmVuZGVySW5mbyhcImRpdlwiLCBcInRhc2stY29udGFpbmVyXCIpO1xuXHRcdGNvbnN0IGVsZW1zID0gdGhpcy5jcmVhdGVFbGVtZW50cyh0YXNrQ29udGFpbmVyKTtcblx0XHRmb3IgKGxldCBlbGVtIG9mIGVsZW1zKSB7XG5cdFx0XHR0YXNrQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW0pO1xuXHRcdH1cblx0XHRyZXR1cm4gdGFza0NvbnRhaW5lcjtcblx0fVxufVxuXG5jbGFzcyBQcm9qZWN0VUkge1xuXHRjb25zdHJ1Y3Rvcihwcm9qZWN0T2JqKSB7XG5cdFx0dGhpcy5wcm9qZWN0ID0gcHJvamVjdE9iajtcblx0fVxuXHRkcmF3KCkge1xuXHRcdGNvbnN0IG1haW5Db250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtYWluLWNvbnRlbnRcIik7XG5cdFx0dGhpcy5jbGVhcihtYWluQ29udGVudCk7XG5cblx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHRoZSB0YXNrcyBhbmQgZ2l2ZSBpdCBhIFRhc2tVSSBjbGFzcy5cblx0XHQvLyBVc2UgdGhlIGRyYXcgbWV0aG9kIHRvIGdldCB0aGUgZGl2IGNvbnRhaW5lciBhbmQgYXBwZW5kIGl0IHRvXG4gICAgICAgIC8vIG1haW5Db250ZW50IGNvbnRhaW5lci5cblx0XHR0aGlzLmRyYXdUYXNrcyhtYWluQ29udGVudCwgdGhpcy5wcm9qZWN0LnRhc2tzKTtcblxuICAgICAgICBjb25zdCBhZGRUYXNrT3B0aW9uID0gdGhpcy5hZGRUYXNrT3B0aW9uKCk7XG5cdFx0bWFpbkNvbnRlbnQuYXBwZW5kQ2hpbGQoYWRkVGFza09wdGlvbik7XG5cdH1cbiAgICBhZGRUYXNrT3B0aW9uKCkge1xuICAgICAgICAvLyBEcmF3IGFuIGFkZCB0YXNrIG9wdGlvbiBiZW5lYXRoIGFsbCB0YXNrc1xuICAgICAgICBjb25zdCBhZGRUYXNrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgYWRkVGFza0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGFzay1jb250YWluZXJcIik7XG4gICAgICAgIGFkZFRhc2tDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImFkZFwiKTtcbiAgICBcbiAgICAgICAgY29uc3QgYWRkVGFza0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGFkZFRhc2tCdG4uY2xhc3NMaXN0LmFkZChcInVuaXF1ZUJ0blwiKTtcbiAgICAgICAgYWRkVGFza0J0bi5jbGFzc0xpc3QuYWRkKFwiYWRkXCIpO1xuICAgICAgICBhZGRUYXNrQnRuLnRleHRDb250ZW50ID0gXCJBRERcIjtcbiAgICBcbiAgICAgICAgYWRkVGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZChhZGRUYXNrQnRuKTtcbiAgICAgICAgcmV0dXJuIGFkZFRhc2tDb250YWluZXJcbiAgICAgICAgXG4gICAgfVxuXHRkcmF3VGFza3MoY29udGFpbmVyLCB0YXNrcykge1xuICAgICAgICBmb3IgKGxldCB0YXNrIG9mIHRhc2tzKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrRGlzcGxheSA9IG5ldyBUYXNrVUkodGFzayk7XG5cdFx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0Rpc3BsYXkuZHJhdygpKTtcblx0XHR9XG5cdH1cblxuXHRjbGVhcihjb250ZW50KSB7XG5cdFx0Y29udGVudC5pbm5lckhUTUwgPSBcIlwiO1xuXHR9XG5cblx0Y29tcGxldGVUYXNrKCkge1xuXHRcdC8vIE1ha2UgdGFzayBjb250YWluZXIgdHJhbnNwYXJlbnQgYWZ0ZXIgY29tcGxldGluZyB0YXNrLlxuXHRcdGNvbnN0IGNoZWNrQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoKTtcblx0fVxufVxuXG5leHBvcnQgeyBUYXNrVUksIFByb2plY3RVSSB9O1xuIiwiaW1wb3J0IFVJIGZyb20gJy4vbW9kdWxlcy9VSSc7XG5jb25zdCBVc2VySW50ZXJmYWNlID0gbmV3IFVJKCk7XG5cblVzZXJJbnRlcmZhY2UubG9hZEhvbWVQYWdlKCk7IiwiaW1wb3J0IFRhc2sgZnJvbSBcIi4vdGFza1wiO1xuaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vcHJvamVjdFwiO1xuaW1wb3J0IEFsbFByb2plY3RzIGZyb20gXCIuL0FsbFByb2plY3RzXCI7XG5pbXBvcnQgeyBUYXNrVUksIFByb2plY3RVSSB9IGZyb20gXCIuL1VJL1Byb2plY3RVSVwiO1xuaW1wb3J0IHsgRHJhd0Zvcm0gfSBmcm9tIFwiLi9VSS9mb3JtXCI7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVUkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRvRG9MaXN0ID0gbmV3IEFsbFByb2plY3RzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBJbml0aWFsaXNlIGZpcnN0IGhvbWVQYWdlIHRvIGJlIG9uIHRoZSBcIkluYm94XCIgcGFnZS5cbiAgICAgICAgdGhpcy5jdXJyZW50UHJvamVjdFBhZ2UgPSAnSW5ib3gnO1xuICAgICAgICB0aGlzLmN1cnJlbnRGb3JtID0gRHJhd0Zvcm0oKTtcbiAgICB9O1xuXG4gICAgbG9hZEhvbWVQYWdlKCkge1xuXG4gICAgICAgIC8vIEFkZCBhIHRhc2sgdG8gaW5ib3guXG4gICAgICAgIHRoaXMudG9Eb0xpc3QuZ2V0UHJvamVjdCgnSW5ib3gnKS5hZGRUYXNrKG5ldyBUYXNrKFxuICAgICAgICAgICAgJ1dhbGtpbmcgdGhlIGRvZycsICdIZSBpcyBhc2tpbmcgZm9yIGl0IHNvIHRoaXMgdGFzayBpcyBhIG11c3QnLCAnMjUtMDItMjAwMicsXG4gICAgICAgICAgICAnbWVkaXVtJywgdGhpcy50b0RvTGlzdC5nZXRQcm9qZWN0KCdJbmJveCcpLnRhc2tzLmxlbmd0aFxuICAgICAgICApKTtcbiAgICAgICAgXG5cbiAgICAgICAgLy8gY29uc3QgcHJvamVjdERpc3BsYXkgPSBuZXcgUHJvamVjdFVJKHRoaXMudG9Eb0xpc3QuZ2V0UHJvamVjdCgnSW5ib3gnKSk7XG4gICAgICAgIC8vIHByb2plY3REaXNwbGF5LmRyYXcoKTtcblxuICAgICAgICB0aGlzLmRyYXdQYWdlKHRoaXMuY3VycmVudFByb2plY3RQYWdlKTtcblxuICAgICAgICB0aGlzLmxvYWRTaWRlQmFyKCk7XG4gICAgICAgIC8vIHRoaXMuYWRkVGFza0Z1bmN0aW9uKCk7XG4gICAgfVxuXG4gICAgLyogQnV0dG9uIGZ1bmN0aW9uYWxpdGllcyAqL1xuICAgIGFkZFRhc2tGdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgYWRkVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bmlxdWVCdG4uYWRkJyk7XG4gICAgICAgIGFkZFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZvcm0uY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZvcm0uYWRkVGFzaygpO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZhY2UtbWFzaycpLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblxuICAgICAgICAgICAgLy8gU2V0IGRlZmF1bHQgZGF0ZSBpbnB1dCB0byBjdXJyZW50IGRheS5cbiAgICAgICAgICAgIGlucHV0RHVlRGF0ZS52YWx1ZUFzRGF0ZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgICAgIC8vIEFkZCBkcmF3IG5ldyB0YXNrIGZ1bmN0aW9uYWxpdHkgdG8gYXBwZW5kVGFza0J0biBvbiB0aGUgZm9ybS4gXG4gICAgICAgICAgICBjb25zdCBhcHBlbmRUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLnVuaXF1ZUJ0bi5hcHBlbmRUYXNrQnRuJyk7XG4gICAgICAgICAgICB0aGlzLmRyYXdOZXdUYXNrKGFwcGVuZFRhc2tCdG4sIFwiSW5ib3hcIik7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgZHJhd05ld1Rhc2soYnRuLCBwcm9qZWN0TmFtZSkge1xuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMuY3VycmVudEZvcm0uY29sbGVjdFRhc2tJbmZvKCk7XG5cbiAgICAgICAgICAgIHRoaXMudG9Eb0xpc3QuZ2V0UHJvamVjdChwcm9qZWN0TmFtZSkuYWRkVGFzayhcbiAgICAgICAgICAgICAgICBuZXcgVGFzayhcbiAgICAgICAgICAgICAgICBpbmZvWyd0aXRsZSddLFxuICAgICAgICAgICAgICAgIGluZm9bJ2RldGFpbHMnXSxcbiAgICAgICAgICAgICAgICBpbmZvWydkYXRlJ10sXG4gICAgICAgICAgICAgICAgaW5mb1sncHJpb3JpdHknXSxcbiAgICAgICAgICAgICAgICB0aGlzLnRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdE5hbWUpLmxlbmd0aCBcbiAgICAgICAgICAgICkpO1xuXG4gICAgICAgICAgICAvLyBjb25zdCB0YXNrSWQgPSB0aGlzLnRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdE5hbWUpLnRhc2tzLmZpbmQoaW5mb1sndGl0bGUnXSkuaWQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHRhc2sgPSB0aGlzLnRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdE5hbWUpLnRhc2tzXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0YXNrKTtcblxuICAgICAgICAgICAgY29uc3QgZGVsSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnRhc2tEZWwuJHt0YXNrSWR9YCk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkRGVsZXRlVGFza0Z1bmN0aW9uKHByb2plY3ROYW1lLCBkZWxJbWcsIHRhc2tJZCk7XG5cbiAgICAgICAgICAgIC8vIENvbGxlY3QgdGhlIGxhdGVzdCBcbiAgICAgICAgICAgIHRoaXMuZHJhd1BhZ2UocHJvamVjdE5hbWUpO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmFjZS1tYXNrJykuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZHJhd1BhZ2UocHJvamVjdE5hbWUpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdERpc3BsYXkgPSBuZXcgUHJvamVjdFVJKHRoaXMudG9Eb0xpc3QuZ2V0UHJvamVjdChwcm9qZWN0TmFtZSkpO1xuICAgICAgICBwcm9qZWN0RGlzcGxheS5kcmF3KCk7XG4gICAgICAgIHRoaXMuYWRkVGFza0Z1bmN0aW9uKCk7IC8vIFJlaW5pdGlhbGlzZSBhZGQgdGFzayBmdW5jdGlvbiBmb3IgbmV3IHBhZ2UncyBidG4uXG4gICAgfVxuXG4gICAgLy8gTmVlZCBhIGdldCB0YXNrIGJ5IElEIGZ1bmN0aW9uLiBcbiAgICBhZGREZWxldGVUYXNrRnVuY3Rpb24ocHJvamVjdE5hbWUsIGRlbFRhc2tJbWcsIHRhc2tJZCkge1xuICAgICAgICBkZWxUYXNrSW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdE5hbWUpLmRlbGV0ZVRhc2sodGFza0lkKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd1BhZ2UocHJvamVjdE5hbWUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyogU2lkZUJhciBmdW5jdGlvbmFsaXRpZXMgKi9cbiAgICBsb2FkU2lkZUJhcigpIHtcbiAgICAgICAgdGhpcy5hZGRTbGlkZUluT3V0KCk7XG4gICAgICAgIHRoaXMuZHJhd0luYm94VGFicygpO1xuICAgICAgICB0aGlzLmRyYXdQcm9qZWN0VGFicygpO1xuICAgIH1cblxuICAgIGRyYXdJbmJveFRhYnMoKSB7XG4gICAgICAgIC8vIEFkZCB0b2RheSBhbmQgdGhpcyB3ZWVrJ3MgdGFzayBiZW5lYXRoIEluYm94IHRhYiBzaWRlYmFyLlxuICAgICAgICBjb25zdCBpbmJveFRhYnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuXG4gICAgICAgIHRoaXMuYWRkVGFiKGluYm94VGFicywgJ1RvZGF5Jyk7XG4gICAgICAgIHRoaXMuYWRkVGFiKGluYm94VGFicywgJ1RoaXMgV2VlaycpO1xuXG4gICAgICAgIGNvbnN0IGluYm94QmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmluYm94LWJhcicpO1xuICAgICAgICBpbmJveEJhci5hcHBlbmRDaGlsZChpbmJveFRhYnMpO1xuICAgICAgICB0aGlzLmFkZERyb3BEb3duTWVudShpbmJveEJhciwgaW5ib3hUYWJzKVxuICAgIH07XG5cbiAgICBkcmF3UHJvamVjdFRhYnMoKSB7XG4gICAgICAgIC8vIEZpbmQgYWxsIG90aGVyIHByb2plY3RzLlxuICAgICAgICBjb25zdCBpbmJveFByb2plY3RzID0gWydJbmJveCcsICdUb2RheScsICdUaGlzIFdlZWsnXVxuICAgICAgICBjb25zdCBjdXN0b21Qcm9qZWN0cyA9IHRoaXMudG9Eb0xpc3QucHJvamVjdHMuZmlsdGVyKFxuICAgICAgICAgICAgcHJvamVjdCA9PiAhaW5ib3hQcm9qZWN0cy5pbmNsdWRlcyhwcm9qZWN0Lm5hbWUpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHByb2plY3RUYWJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgZm9yKGxldCBwcm9qZWN0IG9mIGN1c3RvbVByb2plY3RzKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFRhYihwcm9qZWN0VGFicywgcHJvamVjdC5uYW1lKVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHByb2plY3RCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1iYXInKTtcbiAgICAgICAgcHJvamVjdEJhci5hcHBlbmRDaGlsZChwcm9qZWN0VGFicyk7XG4gICAgICAgIHRoaXMuYWRkRHJvcERvd25NZW51KHByb2plY3RCYXIsIHByb2plY3RUYWJzKTtcbiAgICB9XG5cblxuICAgIGFkZERyb3BEb3duTWVudShtZW51QmFyLCB0YWJzKSB7XG4gICAgICAgIC8vIFRhYnMgd2lsbCBiZSBlbG9uZ2F0ZWQgYmFzZWQgb24gdGFiIGhvdmVyZWQuXG4gICAgICAgIG1lbnVCYXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKCkgPT4ge1xuICAgICAgICAgICAgdGFicy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB9KTtcbiAgICAgICAgbWVudUJhci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsICgpID0+IHtcbiAgICAgICAgICAgIHRhYnMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9KVxuICAgIH1cbiAgICBhZGRUYWIobWVudVRhYiwgcHJvamVjdE5hbWUpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGxpIGFuZCBhcHBlbmQgaXQgdG8gZ2l2ZW4gcGFyYW0gZWxlbS5cbiAgICAgICAgY29uc3QgdGFiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgXG4gICAgICAgIHRhYi50ZXh0Q29udGVudCA9IHRoaXMudG9Eb0xpc3QuZ2V0UHJvamVjdChwcm9qZWN0TmFtZSkubmFtZTtcbiAgICAgICAgbWVudVRhYi5hcHBlbmRDaGlsZCh0YWIpO1xuICAgIH1cblxuICAgIGFkZFNsaWRlSW5PdXQoKSB7XG4gICAgICAgIGNvbnN0IHNpZGVCYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lkZUJhcicpO1xuICAgICAgICBjb25zdCBtYXRlcmlhbEljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1hdGVyaWFsLWljb25zJyk7XG4gICAgICAgIGNvbnN0IGljb25UZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmljb24tdGV4dCcpO1xuICAgICAgICBzaWRlQmFyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsICgpID0+IHtcbiAgICAgICAgICAgIHNpZGVCYXIuc3R5bGUud2lkdGggPSAnMjAwcHgnO1xuICAgICAgICB9KTtcbiAgICAgICAgc2lkZUJhci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsICgpID0+IHtcbiAgICAgICAgICAgIHNpZGVCYXIuc3R5bGUud2lkdGggPSAnNjVweCc7XG4gICAgICAgIH0pO1xuXG4gICAgfTtcbn07XG4iLCJleHBvcnQge0RyYXdGb3JtfVxuXG5jb25zdCBEcmF3Rm9ybSA9ICgpID0+IHtcbiAgICAvLyBXaGVuIHVzZXIgcHJlc3NlcyBhZGQgdGFzaywgcG9wIHVwIGEgZm9ybSB0aGF0IGFza3MgZm9yIGFsbCByZXEgaW5wdXQuXG4gICAgLy8gVGhpcyBpbmNsdWRlcyBbdGFza05hbWUsIGRldGFpbHMsIHByaW9yaXR5TGV2ZWwsIERhdGVdO1xuICAgIGNvbnN0IGZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1jb250YWluZXInKTtcblxuICAgIGNvbnN0IGNsZWFyID0gKCkgPT4ge1xuICAgICAgICB3aGlsZShmb3JtQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIGZvcm1Db250YWluZXIucmVtb3ZlQ2hpbGQoZm9ybUNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBhZGRUYXNrID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrVGl0bGUgPSBhZGRJbnB1dFRleHQoJ1Rhc2sgVGl0bGU6ICcsICdlLmcuIExlYXJuIFJlYWN0IGluICcgK1xuICAgICAgICAnMjAgZGF5cy4uJywgJ2lucHV0VGFza1RpdGxlJyk7XG4gICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QuYWRkKCdpbnB1dFRhc2tUaXRsZScpO1xuXG4gICAgICAgIGNvbnN0IHRhc2tEZXRhaWxzID0gYWRkVGV4dEFyZWEoJ1Rhc2sgRGV0YWlsczogJywgJ2UuZy4gTm90IGFuICcgK1xuICAgICAgICAndGFzay4gUmVtZW1iZXIgdG8gdGFrZSBicmVha3MgYW5kIHdhbGsgb3V0c2lkZS4nLFxuICAgICAgICAgJ2lucHV0VGFza0RldGFpbHMnKTtcbiAgICAgICAgdGFza0RldGFpbHMuY2xhc3NMaXN0LmFkZCgnaW5wdXRUYXNrRGV0YWlscycpOyBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByaW9PcHRpb25zID0gYWRkUHJpb3JpdHlPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IGR1ZURhdGUgPSBhZGRJbnB1dER1ZURhdGUoKTtcbiAgICAgICAgY29uc3QgY2xvc2VGb3JtT3B0aW9uID0gYWRkQ2xvc2VGb3JtRnVuY3Rpb24oKTtcblxuICAgICAgICBjb25zdCB0YXNrc0luZm8gPSBbdGFza1RpdGxlLCB0YXNrRGV0YWlscywgcHJpb09wdGlvbnMsIGR1ZURhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VGb3JtT3B0aW9uXTtcblxuICAgICAgICBmb3IobGV0IGluZm8gb2YgdGFza3NJbmZvKSB7XG4gICAgICAgICAgICBmb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKGluZm8pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEFkZCBzdWJtaXQgYnRuLlxuICAgICAgICBjb25zdCBhcHBlbmRUYXNrQnRuID0gYWRkQXBwZW5kVGFza0J0bigpXG4gICAgICAgIFxuICAgICAgICBmb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKGFwcGVuZFRhc2tCdG4pO1xuICAgIH07XG4gICAgXG4gICAgY29uc3QgYWRkQXBwZW5kVGFza0J0biA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYXBwZW5kVGFza0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBhcHBlbmRUYXNrQnRuLmNsYXNzTGlzdC5hZGQoJ3VuaXF1ZUJ0bicpO1xuICAgICAgICBhcHBlbmRUYXNrQnRuLmNsYXNzTGlzdC5hZGQoJ2FwcGVuZFRhc2tCdG4nKTtcbiAgICAgICAgYXBwZW5kVGFza0J0bi50ZXh0Q29udGVudCA9ICdBZGQgVGFzayc7XG4gICAgICAgIGFwcGVuZFRhc2tCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGFwcGVuZFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgICAvLyAgICAgYXBwZW5kVGFza0Z1bmN0aW9uKGV2ZW50KVxuICAgICAgICAvLyB9KTtcblxuICAgICAgICByZXR1cm4gYXBwZW5kVGFza0J0bjtcbiAgICB9XG4gICAgY29uc3QgYXBwZW5kVGFza0Z1bmN0aW9uID0gKGV2ZW50KSA9PiB7XG5cbiAgICAgICAgLy8gY2FsbCBiYWNrIGZ1bmN0aW9uIHRvIGNvbGxlY3QgdGhlIGluZm8/XG4gICAgICAgIGNvbnN0IHRhc2tJbmZvID0gY29sbGVjdFRhc2tJbmZvKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhc2tJbmZvWyd0aXRsZSddKTtcbiAgICAgICAgY29uc29sZS5sb2codGFza0luZm9bJ2RldGFpbHMnXSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhc2tJbmZvWydwcmlvcml0eSddKTtcbiAgICAgICAgY29uc29sZS5sb2codGFza0luZm9bJ2RhdGUnXSk7XG5cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIFxuICAgIGNvbnN0IGNvbGxlY3RUYXNrSW5mbyA9ICgpID0+IHtcbiAgICAgICAgLy8gQ29sbGVjdCBhbGwgcmVsZXZhbnQgaW5mb3JtYXRpb24gYmFzZWQgb24gdXNlciBpbnB1dCBhbmQgcmV0dXJuXG4gICAgICAgIC8vIGl0IGluIGFuIG9iai5cbiAgICAgICAgY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0VGFza1RpdGxlJyk7XG4gICAgICAgIGNvbnN0IHRhc2tEZXRhaWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0VGFza0RldGFpbHMnKTtcbiAgICAgICAgY29uc3QgcHJpb0Nob3NlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAnaW5wdXRbbmFtZT1cInByaW9cIl06Y2hlY2tlZCcpO1xuICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2lucHV0RHVlRGF0ZScpO1xuICAgICAgICBjb25zdCB0YXNrSW5mbyA9IHtcbiAgICAgICAgICAgICd0aXRsZSc6IHRhc2tUaXRsZS52YWx1ZSxcbiAgICAgICAgICAgICdkZXRhaWxzJzogdGFza0RldGFpbHMudmFsdWUsXG4gICAgICAgICAgICAncHJpb3JpdHknOiBwcmlvQ2hvc2VuLnZhbHVlLFxuICAgICAgICAgICAgJ2RhdGUnOiBkYXRlLnZhbHVlLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGFza0luZm87IFxuICAgIH1cblxuICAgIGNvbnN0IGFkZENsb3NlRm9ybUZ1bmN0aW9uID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjbG9zZUZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgY2xvc2VGb3JtLmNsYXNzTGlzdC5hZGQoJ2Nsb3NlRm9ybUJ0bicpO1xuICAgICAgICBjbG9zZUZvcm0uc3JjID0gJy4uLy4uLy4uL2ltZ3MvbWFjLWNsb3NlLWJ0bi5wbmcnO1xuICAgICAgICBjbG9zZUZvcm0uYWx0ID0gJ0EgYnV0dG9uIHRoYXQgY2xvc2VzIHRoZSBmb3JtLic7XG5cbiAgICAgICAgY2xvc2VGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcbiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmFjZS1tYXNrJyk7XG4gICAgICAgICAgICBmb3JtLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgIG92ZXJsYXkuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY2xvc2VGb3JtO1xuICAgIH07XG5cbiAgICBjb25zdCBhZGRJbnB1dER1ZURhdGUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb25zdCBkYXRlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICBkYXRlTGFiZWwuY2xhc3NMaXN0LmFkZCgnZGF0ZUxhYmVsJyk7XG4gICAgICAgIGRhdGVMYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsICdpbnB1dER1ZURhdGUnKTtcbiAgICAgICAgZGF0ZUxhYmVsLnRleHRDb250ZW50ID0gJ0R1ZSBEYXRlOic7XG5cbiAgICAgICAgY29uc3QgaW5wdXREdWVEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgaW5wdXREdWVEYXRlLnNldEF0dHJpYnV0ZSgndHlwZScsIFwiZGF0ZVwiKTtcbiAgICAgICAgaW5wdXREdWVEYXRlLnNldEF0dHJpYnV0ZSgnaWQnLCAnaW5wdXREdWVEYXRlJyk7XG4gICAgICAgIGlucHV0RHVlRGF0ZS5zZXRBdHRyaWJ1dGUoJ25hbWUnLCAndHJpcC1zdGFydCcpO1xuXG4gICAgICAgIGR1ZURhdGUuYXBwZW5kQ2hpbGQoZGF0ZUxhYmVsKTtcbiAgICAgICAgZHVlRGF0ZS5hcHBlbmRDaGlsZChpbnB1dER1ZURhdGUpO1xuICAgICAgICByZXR1cm4gZHVlRGF0ZTtcbiAgICB9XG5cbiAgICBjb25zdCBhZGRQcmlvcml0eU9wdGlvbnMgPSAoKSA9PiB7XG4gICAgICAgIC8vIEEgd3JhcHBlciBpcyBnb2luZyB0byB3cmFwIHRoZSBsYWJlbCBhbmQgYSBjb250YWluZXIgY29uc2lzdGluZyBvZlxuICAgICAgICAvLyB0aGUgcmFkaW8gb3B0aW9ucy4gXG4gICAgICAgIGNvbnN0IGlucHV0UHJpb1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29uc3QgcHJpb09wdGlvbnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaW5wdXRQcmlvV3JhcHBlci5jbGFzc0xpc3QuYWRkKCdwcmlvV3JhcHBlcicpXG4gICAgICAgIHByaW9PcHRpb25zQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3ByaW9PcHRpb25zJyk7XG5cbiAgICAgICAgbGFiZWwuY2xhc3NMaXN0LmFkZCgncHJpb0xhYmVsJyk7XG4gICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gXCJIb3cgaW1wb3J0YW50IGlzIHRoaXMgdGFzaz9cIjtcbiAgICAgICAgY29uc3QgbG93UHJpbyA9IGNyZWF0ZVJhZGlvSW5wdXRBbmRMYWJlbCgnbG93UHJpbycsICdsb3cnKTtcbiAgICAgICAgY29uc3QgbWVkUHJpbyA9IGNyZWF0ZVJhZGlvSW5wdXRBbmRMYWJlbCgnbWVkUHJpbycsICdtZWRpdW0nKTtcbiAgICAgICAgY29uc3QgaGlnaFByaW8gPSBjcmVhdGVSYWRpb0lucHV0QW5kTGFiZWwoJ2hpZ2hQcmlvJywgJ2hpZ2gnKTtcblxuICAgICAgICBmb3IobGV0IHByaW9PcHRpb25zIG9mIFtsb3dQcmlvLCBtZWRQcmlvLCBoaWdoUHJpb10pIHtcbiAgICAgICAgICAgIHByaW9PcHRpb25zQ29udGFpbmVyLmFwcGVuZENoaWxkKHByaW9PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpbnB1dFByaW9XcmFwcGVyLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgaW5wdXRQcmlvV3JhcHBlci5hcHBlbmRDaGlsZChwcmlvT3B0aW9uc0NvbnRhaW5lcik7XG4gICAgICAgIHJldHVybiBpbnB1dFByaW9XcmFwcGVyO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVJhZGlvSW5wdXRBbmRMYWJlbChpZCwgdmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHJhZGlvT3B0aW9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInJhZGlvXCIsXG4gICAgICAgICAgICAgICAgXCJpZFwiOiBpZCxcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogJ3ByaW8nLFxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogdmFsdWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yKGxldCBhdHRyIGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0cmlidXRlc1thdHRyXSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIGlkKTtcbiAgICAgICAgICAgIGxhYmVsLmNsYXNzTGlzdC5hZGQoaWQpO1xuICAgICAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmFkaW9PcHRpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICAgICAgcmFkaW9PcHRpb25Db250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICAgICAgcmV0dXJuIHJhZGlvT3B0aW9uQ29udGFpbmVyO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGFkZFRleHRBcmVhID0gKGxhYmVsTmFtZSwgcGxhY2Vob2xkZXIsIGlkLCByZXF1aXJlZD10cnVlKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgY29uc3QgaW5wdXRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgIGlucHV0TGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCBpZCk7XG4gICAgICAgIGlucHV0TGFiZWwudGV4dENvbnRlbnQgPSBsYWJlbE5hbWU7XG5cbiAgICAgICAgY29uc3QgaW5wdXRUZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XG4gICAgICAgICAgICAnaWQnOiBpZCxcbiAgICAgICAgICAgICduYW1lJzogaWQsXG4gICAgICAgICAgICAncGxhY2Vob2xkZXInOiBwbGFjZWhvbGRlcixcbiAgICAgICAgICAgICdyb3dzJzogNixcbiAgICAgICAgICAgICdjb2xzJzogNTAsXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yKGxldCBhdHRySWR4IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGlucHV0VGV4dEFyZWEuc2V0QXR0cmlidXRlKGF0dHJJZHgsIGF0dHJpYnV0ZXNbYXR0cklkeF0pXG4gICAgICAgIH1cbiAgICAgICAgaW5wdXRUZXh0QXJlYS5yZXF1aXJlZCA9IHJlcXVpcmVkOyAvLyBEZWZhdWx0IFRydWVcblxuICAgICAgICBpbnB1dC5hcHBlbmRDaGlsZChpbnB1dExhYmVsKTtcbiAgICAgICAgaW5wdXQuYXBwZW5kQ2hpbGQoaW5wdXRUZXh0QXJlYSk7XG4gICAgICAgIHJldHVybiBpbnB1dFxuICAgIH1cblxuICAgIGNvbnN0IGFkZElucHV0VGV4dCA9IChsYWJlbE5hbWUsIHBsYWNlaG9sZGVyLCBpZCwgcmVxdWlyZWQ9dHJ1ZSkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnN0IGlucHV0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICBpbnB1dExhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgaWQpO1xuICAgICAgICBpbnB1dExhYmVsLnRleHRDb250ZW50ID0gbGFiZWxOYW1lO1xuXG4gICAgICAgIGNvbnN0IGlucHV0VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XG4gICAgICAgICAgICAndHlwZSc6ICd0ZXh0JyxcbiAgICAgICAgICAgICdpZCc6IGlkLFxuICAgICAgICAgICAgJ25hbWUnOiBpZCxcbiAgICAgICAgICAgICdwbGFjZWhvbGRlcic6IHBsYWNlaG9sZGVyXG4gICAgICAgIH07XG4gICAgICAgIGZvcihsZXQgYXR0cklkeCBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBpbnB1dFRleHQuc2V0QXR0cmlidXRlKGF0dHJJZHgsIGF0dHJpYnV0ZXNbYXR0cklkeF0pXG4gICAgICAgIH1cblxuICAgICAgICBpbnB1dFRleHQucmVxdWlyZWQgPSByZXF1aXJlZDsgXG5cbiAgICAgICAgaW5wdXQuYXBwZW5kQ2hpbGQoaW5wdXRMYWJlbCk7XG4gICAgICAgIGlucHV0LmFwcGVuZENoaWxkKGlucHV0VGV4dCk7XG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG4gICAgcmV0dXJuIHsgYWRkVGFzaywgY2xlYXIsIGNvbGxlY3RUYXNrSW5mbyB9O1xuXG5cbn0iXSwibmFtZXMiOlsiVGFzayIsImNvbnN0cnVjdG9yIiwibmFtZSIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByaW9yaXR5IiwiaWQiLCJ0aGlzIiwidmFsdWUiLCJfbmFtZSIsIl9pZCIsIl9wcmlvcml0eSIsIl9kZXNjcmlwdGlvbiIsIl9kdWVEYXRlIiwiZHVlRGF0ZUZvcm1hdHRlZCIsInNwbGl0IiwiUHJvamVjdCIsInRhc2tzIiwiX3Rhc2tzIiwiYWRkVGFzayIsInRhc2siLCJwdXNoIiwiZGVsZXRlVGFzayIsInRhc2tJZCIsImZpbHRlciIsImdldElkIiwiQWxsUHJvamVjdHMiLCJwcm9qZWN0cyIsIl9wcm9qZWN0cyIsImNvbnRhaW5zIiwicHJvamVjdE5hbWUiLCJzb21lIiwicHJvamVjdCIsImdldFByb2plY3QiLCJmaW5kIiwiYWRkUHJvamVjdCIsIm5ld1Byb2plY3ROYW1lIiwiZGVsZXRlUHJvamVjdCIsInByb2plY3RUb0RlbGV0ZSIsInNwbGljZSIsImluZGV4T2YiLCJUYXNrVUkiLCJ0YXNrT2JqIiwicmVuZGVySW5mbyIsImVsZW0iLCJhZGRlZENsYXNzIiwidGV4dCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwiY3JlYXRlRWxlbWVudHMiLCJ0YXNrQ29udGFpbmVyIiwic3RhdHVzQ2hlY2siLCJzZXRBdHRyaWJ1dGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJjaGVja2VkIiwic3R5bGUiLCJvcGFjaXR5IiwiZGV0YWlsc0J0biIsInByaW9yaXR5SWNvbiIsImFwcGVuZENoaWxkIiwiZGF0ZSIsImVkaXQiLCJlZGl0SWNvbiIsInRhc2tEZWwiLCJkZWxJY29uIiwiZHJhdyIsImVsZW1zIiwiUHJvamVjdFVJIiwicHJvamVjdE9iaiIsIm1haW5Db250ZW50IiwicXVlcnlTZWxlY3RvciIsImNsZWFyIiwiZHJhd1Rhc2tzIiwiYWRkVGFza09wdGlvbiIsImFkZFRhc2tDb250YWluZXIiLCJhZGRUYXNrQnRuIiwiY29udGFpbmVyIiwidGFza0Rpc3BsYXkiLCJjb250ZW50IiwiaW5uZXJIVE1MIiwiY29tcGxldGVUYXNrIiwiZ2V0RWxlbWVudEJ5SWQiLCJ0b0RvTGlzdCIsImN1cnJlbnRQcm9qZWN0UGFnZSIsImN1cnJlbnRGb3JtIiwiZm9ybUNvbnRhaW5lciIsImFkZENsb3NlRm9ybUZ1bmN0aW9uIiwiY2xvc2VGb3JtIiwic3JjIiwiYWx0IiwiZm9ybSIsIm92ZXJsYXkiLCJ2aXNpYmlsaXR5IiwiYWRkSW5wdXREdWVEYXRlIiwiZGF0ZUxhYmVsIiwiaW5wdXREdWVEYXRlIiwiYWRkUHJpb3JpdHlPcHRpb25zIiwiaW5wdXRQcmlvV3JhcHBlciIsImxhYmVsIiwicHJpb09wdGlvbnNDb250YWluZXIiLCJsb3dQcmlvIiwiY3JlYXRlUmFkaW9JbnB1dEFuZExhYmVsIiwibWVkUHJpbyIsImhpZ2hQcmlvIiwicHJpb09wdGlvbnMiLCJyYWRpb09wdGlvbkNvbnRhaW5lciIsImlucHV0IiwiYXR0cmlidXRlcyIsImF0dHIiLCJ0YXNrVGl0bGUiLCJsYWJlbE5hbWUiLCJwbGFjZWhvbGRlciIsInJlcXVpcmVkIiwiaW5wdXRMYWJlbCIsImlucHV0VGV4dCIsImF0dHJJZHgiLCJhZGRJbnB1dFRleHQiLCJ0YXNrRGV0YWlscyIsImlucHV0VGV4dEFyZWEiLCJhZGRUZXh0QXJlYSIsInRhc2tzSW5mbyIsImluZm8iLCJhcHBlbmRUYXNrQnRuIiwiYWRkQXBwZW5kVGFza0J0biIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImxhc3RDaGlsZCIsImNvbGxlY3RUYXNrSW5mbyIsInByaW9DaG9zZW4iLCJEcmF3Rm9ybSIsImxvYWRIb21lUGFnZSIsImxlbmd0aCIsImRyYXdQYWdlIiwibG9hZFNpZGVCYXIiLCJhZGRUYXNrRnVuY3Rpb24iLCJ2YWx1ZUFzRGF0ZSIsIkRhdGUiLCJkcmF3TmV3VGFzayIsImJ0biIsImNvbnNvbGUiLCJsb2ciLCJkZWxJbWciLCJhZGREZWxldGVUYXNrRnVuY3Rpb24iLCJwcmV2ZW50RGVmYXVsdCIsImRlbFRhc2tJbWciLCJhZGRTbGlkZUluT3V0IiwiZHJhd0luYm94VGFicyIsImRyYXdQcm9qZWN0VGFicyIsImluYm94VGFicyIsImFkZFRhYiIsImluYm94QmFyIiwiYWRkRHJvcERvd25NZW51IiwiaW5ib3hQcm9qZWN0cyIsImN1c3RvbVByb2plY3RzIiwiaW5jbHVkZXMiLCJwcm9qZWN0VGFicyIsInByb2plY3RCYXIiLCJtZW51QmFyIiwidGFicyIsImRpc3BsYXkiLCJtZW51VGFiIiwidGFiIiwic2lkZUJhciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ3aWR0aCJdLCJzb3VyY2VSb290IjoiIn0=