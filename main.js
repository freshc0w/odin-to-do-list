(()=>{"use strict";class t{constructor(t,e,s,n,i){this.name=t,this.description=e,this.dueDate=s,this.priority=n,this.id=i}set name(t){this._name=t}get name(){return this._name}get id(){return this._id}set id(t){this._id=t}get priority(){return this._priority}set priority(t){this._priority=t}get description(){return this._description}set description(t){this._description=t}get dueDate(){return this._dueDate}set dueDate(t){this._dueDate=t}get dueDateFormatted(){return`${this.dueDate.split("/")[0]}/${this.dueDate.split("/")[1]}/${this.dueDate.split("/")[2]}`}}class e{constructor(t){this.name=t,this.tasks=[]}get name(){return this._name}set name(t){this._name=t}get tasks(){return this._tasks}set tasks(t){this._tasks=t}addTask(t){this._tasks.push(t)}deleteTask(t){this._tasks=this._tasks.filter((e=>e.getId()!==t))}}class s{constructor(){this.projects=[],this.projects.push(new e("Inbox")),this.projects.push(new e("Today")),this.projects.push(new e("This Week")),this.projects.push(new e("React"))}get projects(){return this._projects}set projects(t){this._projects=t}contains(t){return this.projects.some((e=>e.name===t))}getProject(t){return this.projects.find((e=>e.name===t))}addProject(t){this.contains(t)||this.projects.push(new e(t))}deleteProject(t){const e=this.projects.find((e=>e.name===t));this.projects.splice(this.projects.indexOf(e),1)}}class n{constructor(t){this.task=t}renderInfo(t,e,s=""){const n=document.createElement(t);return n.classList.add(e),n.textContent=s,n}createElements(t){const e=this.renderInfo("input","statusCheck");e.setAttribute("type","checkbox"),e.setAttribute("id","statusCheck"),e.addEventListener("change",(e=>{e.target.checked?t.style.opacity="40%":t.style.opacity="100%"}));const s=this.renderInfo("div","taskName",this.task.name),n=this.renderInfo("button","uniqueBtn","Details");n.classList.add("details");const i=this.renderInfo("div","statusPrio"),a=this.renderInfo("i","material-icons","warning");a.classList.add(this.task.priority),i.appendChild(a);const o=Date.now(),d=new Date(o),r=this.renderInfo("div","taskDate",`${d.toLocaleDateString()}`),c=this.renderInfo("div","taskEdit"),l=this.renderInfo("i","material-icons","edit");c.appendChild(l);const u=this.renderInfo("div","taskDel"),h=this.renderInfo("i","material-icons","delete");return u.appendChild(h),[e,s,n,i,r,c,u]}draw(){const t=this.renderInfo("div","task-container"),e=this.createElements(t);for(let s of e)t.appendChild(s);return t}}class i{constructor(t){this.project=t}draw(){const t=document.querySelector("#main-content");this.clear(t),this.drawTasks(t,this.project.tasks);const e=this.addTaskFunction();t.appendChild(e)}addTaskFunction(){const t=document.createElement("div");t.classList.add("task-container"),t.classList.add("add");const e=document.createElement("button");return e.classList.add("uniqueBtn"),e.classList.add("add"),e.textContent="ADD",e.addEventListener("click",(()=>{const t=document.querySelector("form"),e=document.querySelector(".face-mask");t.style.visibility="visible",e.style.visibility="visible"})),t.appendChild(e),t}drawTasks(t,e){for(let s of e){const e=new n(s);t.appendChild(e.draw())}}clear(t){t.innerHTML=""}completeTask(){document.getElementById()}}(new class{constructor(){this.toDoList=new s}loadHomePage(){console.log(this.toDoList.getProject("Inbox")),this.toDoList.getProject("Inbox").addTask(new t("Walking the dog","He is asking for it so this task is a must","today","medium",this.toDoList.getProject("Inbox").tasks.length));for(let t of this.toDoList.getProject("Inbox").tasks)new n(t).draw();new i(this.toDoList.getProject("Inbox")).draw(),this.loadSideBar(),(0,(()=>{const t=document.querySelector(".form-container"),e=()=>{const t=document.createElement("img");return t.classList.add("closeFormBtn"),t.src="../../../imgs/mac-close-btn.png",t.alt="A button that closes the form.",t.addEventListener("click",(()=>{const t=document.querySelector("form"),e=document.querySelector(".face-mask");t.style.visibility="hidden",e.style.visibility="hidden"})),t},s=()=>{const t=document.createElement("div"),e=document.createElement("label");e.classList.add("dateLabel"),e.setAttribute("for","inputDueDate"),e.textContent="Due Date:";const s=document.createElement("input");return s.setAttribute("type","date"),s.setAttribute("id","inputDueDate"),s.setAttribute("name","trip-start"),window.addEventListener("DOMContentLoaded",(t=>{s.valueAsDate=new Date})),t.appendChild(e),t.appendChild(s),t},n=()=>{const t=document.createElement("div"),e=document.createElement("div"),s=document.createElement("div");t.classList.add("prioWrapper"),s.classList.add("prioOptions"),e.classList.add("prioLabel"),e.textContent="How important is this task?";const n=o("lowPrio","Low"),i=o("medPrio","Med"),a=o("highPrio","High");for(let t of[n,i,a])s.appendChild(t);return t.appendChild(e),t.appendChild(s),t;function o(t,e){const s=document.createElement("div"),n=document.createElement("input"),i={type:"radio",id:t,name:"prio"};for(let t in i)n.setAttribute(t,i[t]);const a=document.createElement("label");return a.setAttribute("for",t),a.classList.add(t),a.textContent=e,s.appendChild(n),s.appendChild(a),s}};return{addTask:()=>{const i=((t,e,s,n=!0)=>{const i=document.createElement("div"),a=document.createElement("label");a.setAttribute("for",s),a.textContent=t;const o=document.createElement("input"),d={type:"text",id:s,name:s,placeholder:e};for(let t in d)o.setAttribute(t,d[t]);return o.required=n,i.appendChild(a),i.appendChild(o),i})("Task Title: ","e.g. Learn React in 20 days..","inputTaskTitle");i.classList.add("inputTaskTitle");const a=((t,e,s,n=!0)=>{const i=document.createElement("div"),a=document.createElement("label");a.setAttribute("for",s),a.textContent=t;const o=document.createElement("textarea"),d={id:s,name:s,placeholder:e,rows:6,cols:50};for(let t in d)o.setAttribute(t,d[t]);return o.required=n,i.appendChild(a),i.appendChild(o),i})("Task Details: ","e.g. Not an task. Remember to take breaks and walk outside.","inputTaskDetails");a.classList.add("inputTaskDetails");const o=[i,a,n(),s(),e()];for(let e of o)t.appendChild(e)}}})().addTask)()}loadSideBar(){this.addSlideInOut(),this.drawInboxTabs(),this.drawProjectTabs()}drawInboxTabs(){const t=document.createElement("ul");this.addTab(t,"Today"),this.addTab(t,"This Week");const e=document.querySelector(".inbox-bar");e.appendChild(t),this.addDropDownMenu(e,t)}drawProjectTabs(){const t=["Inbox","Today","This Week"],e=this.toDoList.projects.filter((e=>!t.includes(e.name))),s=document.createElement("ul");for(let t of e)this.addTab(s,t.name);const n=document.querySelector(".project-bar");n.appendChild(s),this.addDropDownMenu(n,s)}addDropDownMenu(t,e){t.addEventListener("mouseover",(()=>{e.style.display="block"})),t.addEventListener("mouseout",(()=>{e.style.display="none"}))}addTab(t,e){const s=document.createElement("li");s.textContent=this.toDoList.getProject(e).name,t.appendChild(s)}addSlideInOut(){const t=document.getElementById("sideBar");document.querySelectorAll(".material-icons"),document.querySelectorAll(".icon-text"),t.addEventListener("mouseover",(()=>{t.style.width="200px"})),t.addEventListener("mouseout",(()=>{t.style.width="65px"}))}}).loadHomePage()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d2VicGFjazovL29kaW4tdG8tZG8tbGlzdC8uL3NyYy9tb2R1bGVzL3Rhc2suanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby1saXN0Ly4vc3JjL21vZHVsZXMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvLWRvLWxpc3QvLi9zcmMvbW9kdWxlcy9BbGxQcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly9vZGluLXRvLWRvLWxpc3QvLi9zcmMvbW9kdWxlcy9VSS9Qcm9qZWN0VUkuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby1saXN0Ly4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL29kaW4tdG8tZG8tbGlzdC8uL3NyYy9tb2R1bGVzL1VJLmpzIiwid2VicGFjazovL29kaW4tdG8tZG8tbGlzdC8uL3NyYy9tb2R1bGVzL1VJL2Zvcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFzayB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBpZCkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy5pZCA9IGlkOyAvLyBUbyBhbGxvdyBkZWxldGlvbiBvZiB0YXNrIHdpdGggdGhlIHNhbWUgbmFtZTtcbiAgICAgICAgXG4gICAgfVxuICAgIHNldCBuYW1lKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSB2YWx1ZTtcbiAgICB9O1xuXG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICAgIH07XG4gICAgXG5cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZDtcbiAgICB9O1xuICAgIHNldCBpZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9pZCA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgcHJpb3JpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcmlvcml0eTtcbiAgICB9XG4gICAgc2V0IHByaW9yaXR5KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3ByaW9yaXR5ID0gdmFsdWU7XG4gICAgfVxuICAgIFxuICAgIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9uO1xuICAgIH07XG4gICAgc2V0IGRlc2NyaXB0aW9uKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gdmFsdWU7XG4gICAgfTtcblxuICAgIGdldCBkdWVEYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZHVlRGF0ZTtcbiAgICB9O1xuICAgIHNldCBkdWVEYXRlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2R1ZURhdGUgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IGR1ZURhdGVGb3JtYXR0ZWQoKSB7XG4gICAgICAgIGNvbnN0IGRheSA9IHRoaXMuZHVlRGF0ZS5zcGxpdCgnLycpWzBdO1xuICAgICAgICBjb25zdCBtb250aCA9IHRoaXMuZHVlRGF0ZS5zcGxpdCgnLycpWzFdO1xuICAgICAgICBjb25zdCB5ZWFyID0gdGhpcy5kdWVEYXRlLnNwbGl0KCcvJylbMl07XG5cbiAgICAgICAgcmV0dXJuIGAke2RheX0vJHttb250aH0vJHt5ZWFyfWA7XG4gICAgfTtcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdCB7XG4gICAgY29uc3RydWN0b3IobmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnRhc2tzID0gW107XG4gICAgfTtcbiAgICBcbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gICAgfTtcbiAgICBzZXQgbmFtZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9uYW1lID0gdmFsdWU7XG4gICAgfTtcbiAgICBnZXQgdGFza3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrcztcbiAgICB9O1xuICAgIHNldCB0YXNrcyh2YWx1ZSkge1xuICAgICAgICB0aGlzLl90YXNrcyA9IHZhbHVlO1xuICAgIH1cbiAgICBhZGRUYXNrKHRhc2spIHtcbiAgICAgICAgdGhpcy5fdGFza3MucHVzaCh0YXNrKTsgICAgICAgIFxuICAgIH07XG4gICAgZGVsZXRlVGFzayh0YXNrSWQpIHtcbiAgICAgICAgdGhpcy5fdGFza3MgPSB0aGlzLl90YXNrcy5maWx0ZXIodGFzayA9PiB0YXNrLmdldElkKCkgIT09IHRhc2tJZCk7XG4gICAgfTtcblxuICAgIC8vIFRvIGJlIGFkZGVkOiBHZXQgdG9kYXkncyBhbmQgdGhpcyB3ZWVrJ3MgdGFza3MuIFxufTsiLCJpbXBvcnQgVGFzayBmcm9tIFwiLi90YXNrXCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFsbFByb2plY3RzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0cyA9IFtdO1xuICAgICAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QoJ0luYm94JykpO1xuICAgICAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QoJ1RvZGF5JykpO1xuICAgICAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QoJ1RoaXMgV2VlaycpKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0cy5wdXNoKG5ldyBQcm9qZWN0KCdSZWFjdCcpKTtcbiAgICB9O1xuXG4gICAgZ2V0IHByb2plY3RzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJvamVjdHM7XG4gICAgfTtcbiAgICBzZXQgcHJvamVjdHModmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcHJvamVjdHMgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBwcm9qZWN0IG5hbWUgZXhpc3RzIGluIGxpc3Qgb2YgcHJvamVjdHMuXG4gICAgY29udGFpbnMocHJvamVjdE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdHMuc29tZShwcm9qZWN0ID0+IHByb2plY3QubmFtZSA9PT0gcHJvamVjdE5hbWUpO1xuICAgIH07XG5cbiAgICBnZXRQcm9qZWN0KHByb2plY3ROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3RzLmZpbmQocHJvamVjdCA9PiBwcm9qZWN0Lm5hbWUgPT09IHByb2plY3ROYW1lKTtcbiAgICB9O1xuXG4gICAgYWRkUHJvamVjdChuZXdQcm9qZWN0TmFtZSkge1xuICAgICAgICAvLyBDYW5ub3QgaGF2ZSBzYW1lIHByb2plY3QgbmFtZXMuXG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5zKG5ld1Byb2plY3ROYW1lKSkgcmV0dXJuO1xuICAgICAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QobmV3UHJvamVjdE5hbWUpKTtcbiAgICB9O1xuXG4gICAgZGVsZXRlUHJvamVjdChwcm9qZWN0TmFtZSkge1xuICAgICAgICBjb25zdCBwcm9qZWN0VG9EZWxldGUgPSB0aGlzLnByb2plY3RzLmZpbmQocHJvamVjdCA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdC5uYW1lID09PSBwcm9qZWN0TmFtZSk7XG4gICAgICAgIHRoaXMucHJvamVjdHMuc3BsaWNlKHRoaXMucHJvamVjdHMuaW5kZXhPZihwcm9qZWN0VG9EZWxldGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxKVxuICAgIH07XG4gICAgXG5cbiAgICAvLyBDYW4gYWRkIHRvZGF5J3MgYW5kIHRoaXMgd2VlaydzIGZ1bmN0aW9uYWxpdHkuXG59OyIsImltcG9ydCBUYXNrIGZyb20gXCIuLi90YXNrXCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi4vcHJvamVjdFwiO1xuXG5jbGFzcyBUYXNrVUkge1xuXHQvLyBQdXJwb3NlIG9mIHRoaXMgY2xhc3MgaXQgdG8gdGFrZSBpbiBhIHRhc2sgb2JqLCBhbmQgdHVybiBpdCBpbnRvXG5cdC8vIGEgZGl2IHdpdGggYWxsIHJlbGV2YW50IGluZm9ybWF0aW9uIHJlZ2FyZGluZyB0aGUgdGFzay5cblx0Ly8gRnJvbSBsZWZ0LXRvLXJpZ2h0OiBbY2hlY2tCb3gsIG5hbWUsIGRldGFpbHMsIHByaW9yaXR5LCBkYXRlLCBlZGl0SWNvbiwgYmluSWNvbl1cblx0Y29uc3RydWN0b3IodGFza09iaikge1xuXHRcdHRoaXMudGFzayA9IHRhc2tPYmo7XG5cdH1cblx0cmVuZGVySW5mbyhlbGVtLCBhZGRlZENsYXNzLCB0ZXh0ID0gXCJcIikge1xuXHRcdGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW0pO1xuXHRcdG5hbWUuY2xhc3NMaXN0LmFkZChhZGRlZENsYXNzKTtcblx0XHRuYW1lLnRleHRDb250ZW50ID0gdGV4dDsgLy8gZGVmYXVsdCBlbXB0eSBzdHJcblxuXHRcdHJldHVybiBuYW1lO1xuXHR9XG5cdGNyZWF0ZUVsZW1lbnRzKHRhc2tDb250YWluZXIpIHtcblx0XHRjb25zdCBzdGF0dXNDaGVjayA9IHRoaXMucmVuZGVySW5mbyhcImlucHV0XCIsIFwic3RhdHVzQ2hlY2tcIik7XG5cdFx0c3RhdHVzQ2hlY2suc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpO1xuXHRcdHN0YXR1c0NoZWNrLnNldEF0dHJpYnV0ZShcImlkXCIsIFwic3RhdHVzQ2hlY2tcIik7XG5cdFx0c3RhdHVzQ2hlY2suYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZXZlbnQpID0+IHtcblx0XHRcdGlmIChldmVudC50YXJnZXQuY2hlY2tlZCkge1xuXHRcdFx0XHR0YXNrQ29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSBcIjQwJVwiO1xuXHRcdFx0XHQvLyB0YXNrQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgwLjk4NSknO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGFza0NvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gXCIxMDAlXCI7XG5cdFx0XHRcdC8vIHRhc2tDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEpJztcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGNvbnN0IG5hbWUgPSB0aGlzLnJlbmRlckluZm8oXCJkaXZcIiwgXCJ0YXNrTmFtZVwiLCB0aGlzLnRhc2submFtZSk7XG5cblx0XHQvLyBXaGVuIGNsaWNrZWQsIHBvcCB1cCBhIGZvcm0gd2hlcmUgdGhlIGRldGFpbHMgb2YgdGhlIHRhc2sgaXMgZGlzcGxheWVkLlxuXHRcdGNvbnN0IGRldGFpbHNCdG4gPSB0aGlzLnJlbmRlckluZm8oXCJidXR0b25cIiwgXCJ1bmlxdWVCdG5cIiwgXCJEZXRhaWxzXCIpO1xuXHRcdGRldGFpbHNCdG4uY2xhc3NMaXN0LmFkZChcImRldGFpbHNcIik7XG5cblx0XHQvLyBQcmlvcml0eSBpY29uXG5cdFx0Y29uc3QgcHJpb3JpdHkgPSB0aGlzLnJlbmRlckluZm8oXCJkaXZcIiwgXCJzdGF0dXNQcmlvXCIpO1xuXHRcdGNvbnN0IHByaW9yaXR5SWNvbiA9IHRoaXMucmVuZGVySW5mbyhcImlcIiwgXCJtYXRlcmlhbC1pY29uc1wiLCBcIndhcm5pbmdcIik7XG5cblx0XHQvLyBDaGFuZ2UgY29sb3IgYmFzZWQgb24gcHJpb3JpdHkgb2YgdGFzayAtPiBbJ2hpZ2gnLCAnbWVkaXVtJywgJ2xvdyddXG5cdFx0cHJpb3JpdHlJY29uLmNsYXNzTGlzdC5hZGQodGhpcy50YXNrLnByaW9yaXR5KTtcblx0XHRwcmlvcml0eS5hcHBlbmRDaGlsZChwcmlvcml0eUljb24pO1xuXG5cdFx0Ly8gSnVzdCBhIG1vY2sgZGF0ZSBmb3Igbm93LiBTdWJqZWN0IHRvIGNoYW5nZSBiYXNlZCBvbiB1c2VyIGlucHV0LlxuXHRcdGNvbnN0IHRpbWVFbGFwc2VkID0gRGF0ZS5ub3coKTtcblx0XHRjb25zdCB0b2RheSA9IG5ldyBEYXRlKHRpbWVFbGFwc2VkKTtcblx0XHRjb25zdCBkYXRlID0gdGhpcy5yZW5kZXJJbmZvKFxuXHRcdFx0XCJkaXZcIixcblx0XHRcdFwidGFza0RhdGVcIixcblx0XHRcdGAke3RvZGF5LnRvTG9jYWxlRGF0ZVN0cmluZygpfWBcblx0XHQpO1xuXG5cdFx0Ly8gaWNvbnNcblx0XHRjb25zdCBlZGl0ID0gdGhpcy5yZW5kZXJJbmZvKFwiZGl2XCIsIFwidGFza0VkaXRcIik7XG5cdFx0Y29uc3QgZWRpdEljb24gPSB0aGlzLnJlbmRlckluZm8oXCJpXCIsIFwibWF0ZXJpYWwtaWNvbnNcIiwgXCJlZGl0XCIpO1xuXHRcdGVkaXQuYXBwZW5kQ2hpbGQoZWRpdEljb24pO1xuXG5cdFx0Y29uc3QgdGFza0RlbCA9IHRoaXMucmVuZGVySW5mbyhcImRpdlwiLCBcInRhc2tEZWxcIik7XG5cdFx0Y29uc3QgZGVsSWNvbiA9IHRoaXMucmVuZGVySW5mbyhcImlcIiwgXCJtYXRlcmlhbC1pY29uc1wiLCBcImRlbGV0ZVwiKTtcblx0XHR0YXNrRGVsLmFwcGVuZENoaWxkKGRlbEljb24pO1xuXG5cdFx0cmV0dXJuIFtzdGF0dXNDaGVjaywgbmFtZSwgZGV0YWlsc0J0biwgcHJpb3JpdHksIGRhdGUsIGVkaXQsIHRhc2tEZWxdO1xuXHR9XG5cdGRyYXcoKSB7XG5cdFx0Y29uc3QgdGFza0NvbnRhaW5lciA9IHRoaXMucmVuZGVySW5mbyhcImRpdlwiLCBcInRhc2stY29udGFpbmVyXCIpO1xuXHRcdGNvbnN0IGVsZW1zID0gdGhpcy5jcmVhdGVFbGVtZW50cyh0YXNrQ29udGFpbmVyKTtcblx0XHRmb3IgKGxldCBlbGVtIG9mIGVsZW1zKSB7XG5cdFx0XHR0YXNrQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW0pO1xuXHRcdH1cblx0XHRyZXR1cm4gdGFza0NvbnRhaW5lcjtcblx0fVxufVxuXG5jbGFzcyBQcm9qZWN0VUkge1xuXHRjb25zdHJ1Y3Rvcihwcm9qZWN0T2JqKSB7XG5cdFx0dGhpcy5wcm9qZWN0ID0gcHJvamVjdE9iajtcblx0fVxuXHRkcmF3KCkge1xuXHRcdGNvbnN0IG1haW5Db250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtYWluLWNvbnRlbnRcIik7XG5cdFx0dGhpcy5jbGVhcihtYWluQ29udGVudCk7XG5cblx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHRoZSB0YXNrcyBhbmQgZ2l2ZSBpdCBhIFRhc2tVSSBjbGFzcy5cblx0XHQvLyBVc2UgdGhlIGRyYXcgbWV0aG9kIHRvIGdldCB0aGUgZGl2IGNvbnRhaW5lciBhbmQgYXBwZW5kIGl0IHRvXG4gICAgICAgIC8vIG1haW5Db250ZW50IGNvbnRhaW5lci5cblx0XHR0aGlzLmRyYXdUYXNrcyhtYWluQ29udGVudCwgdGhpcy5wcm9qZWN0LnRhc2tzKTtcblxuICAgICAgICBjb25zdCBhZGRUYXNrT3B0aW9uID0gdGhpcy5hZGRUYXNrRnVuY3Rpb24oKTtcblx0XHRtYWluQ29udGVudC5hcHBlbmRDaGlsZChhZGRUYXNrT3B0aW9uKTtcblx0fVxuICAgIGFkZFRhc2tGdW5jdGlvbigpIHtcbiAgICAgICAgLy8gRHJhdyBhbiBhZGQgdGFzayBvcHRpb24gYmVuZWF0aCBhbGwgdGFza3NcbiAgICAgICAgY29uc3QgYWRkVGFza0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGFkZFRhc2tDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRhc2stY29udGFpbmVyXCIpO1xuICAgICAgICBhZGRUYXNrQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJhZGRcIik7XG4gICAgXG4gICAgICAgIGNvbnN0IGFkZFRhc2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICBhZGRUYXNrQnRuLmNsYXNzTGlzdC5hZGQoXCJ1bmlxdWVCdG5cIik7XG4gICAgICAgIGFkZFRhc2tCdG4uY2xhc3NMaXN0LmFkZChcImFkZFwiKTtcbiAgICAgICAgYWRkVGFza0J0bi50ZXh0Q29udGVudCA9IFwiQUREXCI7XG4gICAgICAgIGFkZFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZhY2UtbWFzaycpO1xuICAgICAgICAgICAgZm9ybS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICAgICAgb3ZlcmxheS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB9KVxuICAgIFxuICAgICAgICBhZGRUYXNrQ29udGFpbmVyLmFwcGVuZENoaWxkKGFkZFRhc2tCdG4pO1xuICAgICAgICByZXR1cm4gYWRkVGFza0NvbnRhaW5lclxuICAgICAgICBcbiAgICB9XG5cdGRyYXdUYXNrcyhjb250YWluZXIsIHRhc2tzKSB7XG4gICAgICAgIGZvciAobGV0IHRhc2sgb2YgdGFza3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tEaXNwbGF5ID0gbmV3IFRhc2tVSSh0YXNrKTtcblx0XHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrRGlzcGxheS5kcmF3KCkpO1xuXHRcdH1cblx0fVxuXG5cdGNsZWFyKGNvbnRlbnQpIHtcblx0XHRjb250ZW50LmlubmVySFRNTCA9IFwiXCI7XG5cdH1cblxuXHRjb21wbGV0ZVRhc2soKSB7XG5cdFx0Ly8gTWFrZSB0YXNrIGNvbnRhaW5lciB0cmFuc3BhcmVudCBhZnRlciBjb21wbGV0aW5nIHRhc2suXG5cdFx0Y29uc3QgY2hlY2tCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgpO1xuXHR9XG59XG5cbmV4cG9ydCB7IFRhc2tVSSwgUHJvamVjdFVJIH07XG4iLCJpbXBvcnQgVUkgZnJvbSAnLi9tb2R1bGVzL1VJJztcbmNvbnN0IFVzZXJJbnRlcmZhY2UgPSBuZXcgVUkoKTtcblxuVXNlckludGVyZmFjZS5sb2FkSG9tZVBhZ2UoKTsiLCJpbXBvcnQgVGFzayBmcm9tIFwiLi90YXNrXCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCI7XG5pbXBvcnQgQWxsUHJvamVjdHMgZnJvbSBcIi4vQWxsUHJvamVjdHNcIjtcbmltcG9ydCB7IFRhc2tVSSwgUHJvamVjdFVJIH0gZnJvbSBcIi4vVUkvUHJvamVjdFVJXCI7XG5pbXBvcnQgeyBEcmF3Rm9ybSB9IGZyb20gXCIuL1VJL2Zvcm1cIjtcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudG9Eb0xpc3QgPSBuZXcgQWxsUHJvamVjdHMoKTtcbiAgICB9O1xuXG4gICAgbG9hZEhvbWVQYWdlKCkge1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRvRG9MaXN0LmdldFByb2plY3QoJ0luYm94JykpO1xuXG4gICAgICAgIC8vIEFkZCBhIHRhc2sgdG8gaW5ib3guXG4gICAgICAgIHRoaXMudG9Eb0xpc3QuZ2V0UHJvamVjdCgnSW5ib3gnKS5hZGRUYXNrKG5ldyBUYXNrKFxuICAgICAgICAgICAgJ1dhbGtpbmcgdGhlIGRvZycsICdIZSBpcyBhc2tpbmcgZm9yIGl0IHNvIHRoaXMgdGFzayBpcyBhIG11c3QnLCAndG9kYXknLFxuICAgICAgICAgICAgJ21lZGl1bScsIHRoaXMudG9Eb0xpc3QuZ2V0UHJvamVjdCgnSW5ib3gnKS50YXNrcy5sZW5ndGhcbiAgICAgICAgKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBnZXQgdGhlIHRhc2sgZnJvbSBpbmJveFxuICAgICAgICBmb3IobGV0IHRhc2sgb2YgdGhpcy50b0RvTGlzdC5nZXRQcm9qZWN0KCdJbmJveCcpLnRhc2tzKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdUYXNrID0gbmV3IFRhc2tVSSh0YXNrKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1Rhc2tEaXNwbGF5ID0gbmV3VGFzay5kcmF3KClcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwcm9qZWN0RGlzcGxheSA9IG5ldyBQcm9qZWN0VUkodGhpcy50b0RvTGlzdC5nZXRQcm9qZWN0KCdJbmJveCcpKTtcbiAgICAgICAgcHJvamVjdERpc3BsYXkuZHJhdygpO1xuXG5cbiAgICAgICAgdGhpcy5sb2FkU2lkZUJhcigpO1xuICAgICAgICBjb25zdCBmb3JtID0gRHJhd0Zvcm0oKVxuICAgICAgICBjb25zdCBhZGRUYXNrRm9ybSA9IGZvcm0uYWRkVGFzaztcbiAgICAgICAgYWRkVGFza0Zvcm0oKTtcbiAgICB9XG5cbiAgICAvKiBCdXR0b24gZnVuY3Rpb25hbGl0aWVzICovXG4gICAgXG5cbiAgICAvKiBTaWRlQmFyIGZ1bmN0aW9uYWxpdGllcyAqL1xuICAgIGxvYWRTaWRlQmFyKCkge1xuICAgICAgICB0aGlzLmFkZFNsaWRlSW5PdXQoKTtcbiAgICAgICAgdGhpcy5kcmF3SW5ib3hUYWJzKCk7XG4gICAgICAgIHRoaXMuZHJhd1Byb2plY3RUYWJzKCk7XG4gICAgfVxuXG4gICAgZHJhd0luYm94VGFicygpIHtcbiAgICAgICAgLy8gQWRkIHRvZGF5IGFuZCB0aGlzIHdlZWsncyB0YXNrIGJlbmVhdGggSW5ib3ggdGFiIHNpZGViYXIuXG4gICAgICAgIGNvbnN0IGluYm94VGFicyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG5cbiAgICAgICAgdGhpcy5hZGRUYWIoaW5ib3hUYWJzLCAnVG9kYXknKTtcbiAgICAgICAgdGhpcy5hZGRUYWIoaW5ib3hUYWJzLCAnVGhpcyBXZWVrJyk7XG5cbiAgICAgICAgY29uc3QgaW5ib3hCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5ib3gtYmFyJyk7XG4gICAgICAgIGluYm94QmFyLmFwcGVuZENoaWxkKGluYm94VGFicyk7XG4gICAgICAgIHRoaXMuYWRkRHJvcERvd25NZW51KGluYm94QmFyLCBpbmJveFRhYnMpXG4gICAgfTtcblxuICAgIGRyYXdQcm9qZWN0VGFicygpIHtcbiAgICAgICAgLy8gRmluZCBhbGwgb3RoZXIgcHJvamVjdHMuXG4gICAgICAgIGNvbnN0IGluYm94UHJvamVjdHMgPSBbJ0luYm94JywgJ1RvZGF5JywgJ1RoaXMgV2VlayddXG4gICAgICAgIGNvbnN0IGN1c3RvbVByb2plY3RzID0gdGhpcy50b0RvTGlzdC5wcm9qZWN0cy5maWx0ZXIoXG4gICAgICAgICAgICBwcm9qZWN0ID0+ICFpbmJveFByb2plY3RzLmluY2x1ZGVzKHByb2plY3QubmFtZSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcHJvamVjdFRhYnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICBmb3IobGV0IHByb2plY3Qgb2YgY3VzdG9tUHJvamVjdHMpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkVGFiKHByb2plY3RUYWJzLCBwcm9qZWN0Lm5hbWUpXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcHJvamVjdEJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWJhcicpO1xuICAgICAgICBwcm9qZWN0QmFyLmFwcGVuZENoaWxkKHByb2plY3RUYWJzKTtcbiAgICAgICAgdGhpcy5hZGREcm9wRG93bk1lbnUocHJvamVjdEJhciwgcHJvamVjdFRhYnMpO1xuICAgIH1cblxuXG4gICAgYWRkRHJvcERvd25NZW51KG1lbnVCYXIsIHRhYnMpIHtcbiAgICAgICAgLy8gVGFicyB3aWxsIGJlIGVsb25nYXRlZCBiYXNlZCBvbiB0YWIgaG92ZXJlZC5cbiAgICAgICAgbWVudUJhci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICB0YWJzLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIH0pO1xuICAgICAgICBtZW51QmFyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgdGFicy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIH0pXG4gICAgfVxuICAgIGFkZFRhYihtZW51VGFiLCBwcm9qZWN0TmFtZSkge1xuICAgICAgICAvLyBDcmVhdGUgbGkgYW5kIGFwcGVuZCBpdCB0byBnaXZlbiBwYXJhbSBlbGVtLlxuICAgICAgICBjb25zdCB0YWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICBcbiAgICAgICAgdGFiLnRleHRDb250ZW50ID0gdGhpcy50b0RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3ROYW1lKS5uYW1lO1xuICAgICAgICBtZW51VGFiLmFwcGVuZENoaWxkKHRhYik7XG4gICAgfVxuXG4gICAgYWRkU2xpZGVJbk91dCgpIHtcbiAgICAgICAgY29uc3Qgc2lkZUJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWRlQmFyJyk7XG4gICAgICAgIGNvbnN0IG1hdGVyaWFsSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWF0ZXJpYWwtaWNvbnMnKTtcbiAgICAgICAgY29uc3QgaWNvblRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaWNvbi10ZXh0Jyk7XG4gICAgICAgIHNpZGVCYXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKCkgPT4ge1xuICAgICAgICAgICAgc2lkZUJhci5zdHlsZS53aWR0aCA9ICcyMDBweCc7XG4gICAgICAgIH0pO1xuICAgICAgICBzaWRlQmFyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgc2lkZUJhci5zdHlsZS53aWR0aCA9ICc2NXB4JztcbiAgICAgICAgfSk7XG5cbiAgICB9O1xufTtcbiIsImV4cG9ydCB7RHJhd0Zvcm19XG5cbmNvbnN0IERyYXdGb3JtID0gKCkgPT4ge1xuICAgIC8vIFdoZW4gdXNlciBwcmVzc2VzIGFkZCB0YXNrLCBwb3AgdXAgYSBmb3JtIHRoYXQgYXNrcyBmb3IgYWxsIHJlcSBpbnB1dC5cbiAgICAvLyBUaGlzIGluY2x1ZGVzIFt0YXNrTmFtZSwgZGV0YWlscywgcHJpb3JpdHlMZXZlbCwgRGF0ZV07XG4gICAgY29uc3QgZm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWNvbnRhaW5lcicpO1xuXG4gICAgY29uc3QgYWRkVGFzayA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza1RpdGxlID0gYWRkSW5wdXRUZXh0KCdUYXNrIFRpdGxlOiAnLCAnZS5nLiBMZWFybiBSZWFjdCBpbiAnICtcbiAgICAgICAgJzIwIGRheXMuLicsICdpbnB1dFRhc2tUaXRsZScpO1xuICAgICAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LmFkZCgnaW5wdXRUYXNrVGl0bGUnKTtcblxuICAgICAgICBjb25zdCB0YXNrRGV0YWlscyA9IGFkZFRleHRBcmVhKCdUYXNrIERldGFpbHM6ICcsICdlLmcuIE5vdCBhbiAnICtcbiAgICAgICAgJ3Rhc2suIFJlbWVtYmVyIHRvIHRha2UgYnJlYWtzIGFuZCB3YWxrIG91dHNpZGUuJyxcbiAgICAgICAgICdpbnB1dFRhc2tEZXRhaWxzJyk7XG4gICAgICAgIHRhc2tEZXRhaWxzLmNsYXNzTGlzdC5hZGQoJ2lucHV0VGFza0RldGFpbHMnKTsgXG4gICAgICAgIFxuICAgICAgICBjb25zdCBwcmlvT3B0aW9ucyA9IGFkZFByaW9yaXR5T3B0aW9ucygpO1xuICAgICAgICBjb25zdCBkdWVEYXRlID0gYWRkSW5wdXREdWVEYXRlKCk7XG4gICAgICAgIGNvbnN0IGNsb3NlRm9ybU9wdGlvbiA9IGFkZENsb3NlRm9ybUZ1bmN0aW9uKCk7XG5cbiAgICAgICAgY29uc3QgdGFza3NJbmZvID0gW3Rhc2tUaXRsZSwgdGFza0RldGFpbHMsIHByaW9PcHRpb25zLCBkdWVEYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlRm9ybU9wdGlvbl07XG5cbiAgICAgICAgZm9yKGxldCBpbmZvIG9mIHRhc2tzSW5mbykge1xuICAgICAgICAgICAgZm9ybUNvbnRhaW5lci5hcHBlbmRDaGlsZChpbmZvKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgY29uc3QgYWRkQ2xvc2VGb3JtRnVuY3Rpb24gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsb3NlRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICBjbG9zZUZvcm0uY2xhc3NMaXN0LmFkZCgnY2xvc2VGb3JtQnRuJyk7XG4gICAgICAgIGNsb3NlRm9ybS5zcmMgPSAnLi4vLi4vLi4vaW1ncy9tYWMtY2xvc2UtYnRuLnBuZyc7XG4gICAgICAgIGNsb3NlRm9ybS5hbHQgPSAnQSBidXR0b24gdGhhdCBjbG9zZXMgdGhlIGZvcm0uJztcblxuICAgICAgICBjbG9zZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpO1xuICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYWNlLW1hc2snKTtcbiAgICAgICAgICAgIGZvcm0uc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgb3ZlcmxheS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjbG9zZUZvcm07XG4gICAgfTtcblxuICAgIGNvbnN0IGFkZElucHV0RHVlRGF0ZSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnN0IGRhdGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgIGRhdGVMYWJlbC5jbGFzc0xpc3QuYWRkKCdkYXRlTGFiZWwnKTtcbiAgICAgICAgZGF0ZUxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ2lucHV0RHVlRGF0ZScpO1xuICAgICAgICBkYXRlTGFiZWwudGV4dENvbnRlbnQgPSAnRHVlIERhdGU6JztcblxuICAgICAgICBjb25zdCBpbnB1dER1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBpbnB1dER1ZURhdGUuc2V0QXR0cmlidXRlKCd0eXBlJywgXCJkYXRlXCIpO1xuICAgICAgICBpbnB1dER1ZURhdGUuc2V0QXR0cmlidXRlKCdpZCcsICdpbnB1dER1ZURhdGUnKTtcbiAgICAgICAgaW5wdXREdWVEYXRlLnNldEF0dHJpYnV0ZSgnbmFtZScsICd0cmlwLXN0YXJ0Jyk7XG5cbiAgICAgICAgLy8gU2V0IGRlZmF1bHQgdmFsdWUgdG8gdG9kYXkncyBkYXRlLlxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGlucHV0RHVlRGF0ZS52YWx1ZUFzRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGR1ZURhdGUuYXBwZW5kQ2hpbGQoZGF0ZUxhYmVsKTtcbiAgICAgICAgZHVlRGF0ZS5hcHBlbmRDaGlsZChpbnB1dER1ZURhdGUpO1xuICAgICAgICByZXR1cm4gZHVlRGF0ZTtcbiAgICB9XG5cbiAgICBjb25zdCBhZGRQcmlvcml0eU9wdGlvbnMgPSAoKSA9PiB7XG4gICAgICAgIC8vIEEgd3JhcHBlciBpcyBnb2luZyB0byB3cmFwIHRoZSBsYWJlbCBhbmQgYSBjb250YWluZXIgY29uc2lzdGluZyBvZlxuICAgICAgICAvLyB0aGUgcmFkaW8gb3B0aW9ucy4gXG4gICAgICAgIGNvbnN0IGlucHV0UHJpb1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29uc3QgcHJpb09wdGlvbnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaW5wdXRQcmlvV3JhcHBlci5jbGFzc0xpc3QuYWRkKCdwcmlvV3JhcHBlcicpXG4gICAgICAgIHByaW9PcHRpb25zQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3ByaW9PcHRpb25zJyk7XG5cbiAgICAgICAgbGFiZWwuY2xhc3NMaXN0LmFkZCgncHJpb0xhYmVsJyk7XG4gICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gXCJIb3cgaW1wb3J0YW50IGlzIHRoaXMgdGFzaz9cIjtcbiAgICAgICAgY29uc3QgbG93UHJpbyA9IGNyZWF0ZVJhZGlvSW5wdXRBbmRMYWJlbCgnbG93UHJpbycsICdMb3cnKTtcbiAgICAgICAgY29uc3QgbWVkUHJpbyA9IGNyZWF0ZVJhZGlvSW5wdXRBbmRMYWJlbCgnbWVkUHJpbycsICdNZWQnKTtcbiAgICAgICAgY29uc3QgaGlnaFByaW8gPSBjcmVhdGVSYWRpb0lucHV0QW5kTGFiZWwoJ2hpZ2hQcmlvJywgJ0hpZ2gnKTtcblxuICAgICAgICBmb3IobGV0IHByaW9PcHRpb25zIG9mIFtsb3dQcmlvLCBtZWRQcmlvLCBoaWdoUHJpb10pIHtcbiAgICAgICAgICAgIHByaW9PcHRpb25zQ29udGFpbmVyLmFwcGVuZENoaWxkKHByaW9PcHRpb25zKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpbnB1dFByaW9XcmFwcGVyLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgaW5wdXRQcmlvV3JhcHBlci5hcHBlbmRDaGlsZChwcmlvT3B0aW9uc0NvbnRhaW5lcik7XG4gICAgICAgIHJldHVybiBpbnB1dFByaW9XcmFwcGVyO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVJhZGlvSW5wdXRBbmRMYWJlbChpZCwgdmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHJhZGlvT3B0aW9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInJhZGlvXCIsXG4gICAgICAgICAgICAgICAgXCJpZFwiOiBpZCxcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogJ3ByaW8nLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvcihsZXQgYXR0ciBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJpYnV0ZXNbYXR0cl0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCBpZCk7XG4gICAgICAgICAgICBsYWJlbC5jbGFzc0xpc3QuYWRkKGlkKTtcbiAgICAgICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gdmFsdWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJhZGlvT3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgIHJhZGlvT3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIHJldHVybiByYWRpb09wdGlvbkNvbnRhaW5lcjtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBhZGRUZXh0QXJlYSA9IChsYWJlbE5hbWUsIHBsYWNlaG9sZGVyLCBpZCwgcmVxdWlyZWQ9dHJ1ZSkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnN0IGlucHV0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICBpbnB1dExhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgaWQpO1xuICAgICAgICBpbnB1dExhYmVsLnRleHRDb250ZW50ID0gbGFiZWxOYW1lO1xuXG4gICAgICAgIGNvbnN0IGlucHV0VGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAgJ2lkJzogaWQsXG4gICAgICAgICAgICAnbmFtZSc6IGlkLFxuICAgICAgICAgICAgJ3BsYWNlaG9sZGVyJzogcGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAncm93cyc6IDYsXG4gICAgICAgICAgICAnY29scyc6IDUwLFxuICAgICAgICB9O1xuXG4gICAgICAgIGZvcihsZXQgYXR0cklkeCBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBpbnB1dFRleHRBcmVhLnNldEF0dHJpYnV0ZShhdHRySWR4LCBhdHRyaWJ1dGVzW2F0dHJJZHhdKVxuICAgICAgICB9XG4gICAgICAgIGlucHV0VGV4dEFyZWEucmVxdWlyZWQgPSByZXF1aXJlZDsgLy8gRGVmYXVsdCBUcnVlXG5cbiAgICAgICAgaW5wdXQuYXBwZW5kQ2hpbGQoaW5wdXRMYWJlbCk7XG4gICAgICAgIGlucHV0LmFwcGVuZENoaWxkKGlucHV0VGV4dEFyZWEpO1xuICAgICAgICByZXR1cm4gaW5wdXRcbiAgICB9XG5cbiAgICBjb25zdCBhZGRJbnB1dFRleHQgPSAobGFiZWxOYW1lLCBwbGFjZWhvbGRlciwgaWQsIHJlcXVpcmVkPXRydWUpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb25zdCBpbnB1dExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgaW5wdXRMYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIGlkKTtcbiAgICAgICAgaW5wdXRMYWJlbC50ZXh0Q29udGVudCA9IGxhYmVsTmFtZTtcblxuICAgICAgICBjb25zdCBpbnB1dFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAgJ3R5cGUnOiAndGV4dCcsXG4gICAgICAgICAgICAnaWQnOiBpZCxcbiAgICAgICAgICAgICduYW1lJzogaWQsXG4gICAgICAgICAgICAncGxhY2Vob2xkZXInOiBwbGFjZWhvbGRlclxuICAgICAgICB9O1xuICAgICAgICBmb3IobGV0IGF0dHJJZHggaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgaW5wdXRUZXh0LnNldEF0dHJpYnV0ZShhdHRySWR4LCBhdHRyaWJ1dGVzW2F0dHJJZHhdKVxuICAgICAgICB9XG5cbiAgICAgICAgaW5wdXRUZXh0LnJlcXVpcmVkID0gcmVxdWlyZWQ7IFxuXG4gICAgICAgIGlucHV0LmFwcGVuZENoaWxkKGlucHV0TGFiZWwpO1xuICAgICAgICBpbnB1dC5hcHBlbmRDaGlsZChpbnB1dFRleHQpO1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuICAgIHJldHVybiB7IGFkZFRhc2sgfTtcblxuXG59Il0sIm5hbWVzIjpbIlRhc2siLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsImlkIiwidGhpcyIsInZhbHVlIiwiX25hbWUiLCJfaWQiLCJfcHJpb3JpdHkiLCJfZGVzY3JpcHRpb24iLCJfZHVlRGF0ZSIsImR1ZURhdGVGb3JtYXR0ZWQiLCJzcGxpdCIsIlByb2plY3QiLCJ0YXNrcyIsIl90YXNrcyIsImFkZFRhc2siLCJ0YXNrIiwicHVzaCIsImRlbGV0ZVRhc2siLCJ0YXNrSWQiLCJmaWx0ZXIiLCJnZXRJZCIsIkFsbFByb2plY3RzIiwicHJvamVjdHMiLCJfcHJvamVjdHMiLCJjb250YWlucyIsInByb2plY3ROYW1lIiwic29tZSIsInByb2plY3QiLCJnZXRQcm9qZWN0IiwiZmluZCIsImFkZFByb2plY3QiLCJuZXdQcm9qZWN0TmFtZSIsImRlbGV0ZVByb2plY3QiLCJwcm9qZWN0VG9EZWxldGUiLCJzcGxpY2UiLCJpbmRleE9mIiwiVGFza1VJIiwidGFza09iaiIsInJlbmRlckluZm8iLCJlbGVtIiwiYWRkZWRDbGFzcyIsInRleHQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsImNyZWF0ZUVsZW1lbnRzIiwidGFza0NvbnRhaW5lciIsInN0YXR1c0NoZWNrIiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidGFyZ2V0IiwiY2hlY2tlZCIsInN0eWxlIiwib3BhY2l0eSIsImRldGFpbHNCdG4iLCJwcmlvcml0eUljb24iLCJhcHBlbmRDaGlsZCIsInRpbWVFbGFwc2VkIiwiRGF0ZSIsIm5vdyIsInRvZGF5IiwiZGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImVkaXQiLCJlZGl0SWNvbiIsInRhc2tEZWwiLCJkZWxJY29uIiwiZHJhdyIsImVsZW1zIiwiUHJvamVjdFVJIiwicHJvamVjdE9iaiIsIm1haW5Db250ZW50IiwicXVlcnlTZWxlY3RvciIsImNsZWFyIiwiZHJhd1Rhc2tzIiwiYWRkVGFza09wdGlvbiIsImFkZFRhc2tGdW5jdGlvbiIsImFkZFRhc2tDb250YWluZXIiLCJhZGRUYXNrQnRuIiwiZm9ybSIsIm92ZXJsYXkiLCJ2aXNpYmlsaXR5IiwiY29udGFpbmVyIiwidGFza0Rpc3BsYXkiLCJjb250ZW50IiwiaW5uZXJIVE1MIiwiY29tcGxldGVUYXNrIiwiZ2V0RWxlbWVudEJ5SWQiLCJ0b0RvTGlzdCIsImxvYWRIb21lUGFnZSIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJsb2FkU2lkZUJhciIsImFkZFRhc2tGb3JtIiwiZm9ybUNvbnRhaW5lciIsImFkZENsb3NlRm9ybUZ1bmN0aW9uIiwiY2xvc2VGb3JtIiwic3JjIiwiYWx0IiwiYWRkSW5wdXREdWVEYXRlIiwiZGF0ZUxhYmVsIiwiaW5wdXREdWVEYXRlIiwid2luZG93IiwidmFsdWVBc0RhdGUiLCJhZGRQcmlvcml0eU9wdGlvbnMiLCJpbnB1dFByaW9XcmFwcGVyIiwibGFiZWwiLCJwcmlvT3B0aW9uc0NvbnRhaW5lciIsImxvd1ByaW8iLCJjcmVhdGVSYWRpb0lucHV0QW5kTGFiZWwiLCJtZWRQcmlvIiwiaGlnaFByaW8iLCJwcmlvT3B0aW9ucyIsInJhZGlvT3B0aW9uQ29udGFpbmVyIiwiaW5wdXQiLCJhdHRyaWJ1dGVzIiwiYXR0ciIsInRhc2tUaXRsZSIsImxhYmVsTmFtZSIsInBsYWNlaG9sZGVyIiwicmVxdWlyZWQiLCJpbnB1dExhYmVsIiwiaW5wdXRUZXh0IiwiYXR0cklkeCIsImFkZElucHV0VGV4dCIsInRhc2tEZXRhaWxzIiwiaW5wdXRUZXh0QXJlYSIsImFkZFRleHRBcmVhIiwidGFza3NJbmZvIiwiaW5mbyIsIkRyYXdGb3JtIiwiYWRkU2xpZGVJbk91dCIsImRyYXdJbmJveFRhYnMiLCJkcmF3UHJvamVjdFRhYnMiLCJpbmJveFRhYnMiLCJhZGRUYWIiLCJpbmJveEJhciIsImFkZERyb3BEb3duTWVudSIsImluYm94UHJvamVjdHMiLCJjdXN0b21Qcm9qZWN0cyIsImluY2x1ZGVzIiwicHJvamVjdFRhYnMiLCJwcm9qZWN0QmFyIiwibWVudUJhciIsInRhYnMiLCJkaXNwbGF5IiwibWVudVRhYiIsInRhYiIsInNpZGVCYXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwid2lkdGgiXSwic291cmNlUm9vdCI6IiJ9