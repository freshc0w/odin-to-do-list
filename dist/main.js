(()=>{"use strict";class t{constructor(t,e,s,i,n){this.name=t,this.description=e,this.dueDate=s,this.priority=i,this.id=n}set name(t){this._name=t}get name(){return this._name}get id(){return this._id}set id(t){this._id=t}get priority(){return this._priority}set priority(t){this._priority=t}get description(){return this._description}set description(t){this._description=t}get dueDate(){return this._dueDate}set dueDate(t){this._dueDate=t}get dueDateFormatted(){return`${this.dueDate.split("-")[0]}/${this.dueDate.split("-")[1]}/${this.dueDate.split("-")[2]}`}}class e{constructor(t){this.name=t,this.tasks=[]}get name(){return this._name}set name(t){this._name=t}get tasks(){return this._tasks}set tasks(t){this._tasks=t}addTask(t){this._tasks.push(t)}deleteTask(t){this._tasks=this._tasks.filter((e=>e.id!==t))}reInitialiseId(){for(let t=0;t<this.tasks.length;t++)this.tasks[t].id=t}}class s{constructor(){this.projects=[],this.projects.push(new e("Inbox")),this.projects.push(new e("Today")),this.projects.push(new e("This Week")),this.projects.push(new e("React"))}get projects(){return this._projects}set projects(t){this._projects=t}contains(t){return this.projects.some((e=>e.name===t))}getProject(t){return this.projects.find((e=>e.name===t))}addProject(t){this.contains(t)||this.projects.push(new e(t))}deleteProject(t){const e=this.projects.find((e=>e.name===t));this.projects.splice(this.projects.indexOf(e),1)}}class i{constructor(t){this.task=t}renderInfo(t,e,s=""){const i=document.createElement(t);return i.classList.add(e),i.textContent=s,i}createElements(t){const e=this.renderInfo("input","statusCheck");e.setAttribute("type","checkbox"),e.setAttribute("id","statusCheck"),e.addEventListener("change",(e=>{e.target.checked?t.style.opacity="40%":t.style.opacity="100%"}));const s=this.renderInfo("div","taskName",this.task.name),i=this.renderInfo("button","uniqueBtn","Details");i.classList.add("details");const n=this.renderInfo("div","statusPrio"),a=this.renderInfo("i","material-icons","warning");a.classList.add(this.task.priority),n.appendChild(a);const d=this.renderInfo("div","taskDate",this.task.dueDateFormatted),r=this.renderInfo("div","taskEdit"),o=this.renderInfo("i","material-icons","edit");r.appendChild(o);const c=this.renderInfo("div","taskDel"),l=this.renderInfo("i","material-icons","delete");return c.setAttribute("id",`delTask-${this.task.id}`),c.appendChild(l),[e,s,i,n,d,r,c]}draw(){const t=this.renderInfo("div","task-container"),e=this.createElements(t);for(let s of e)t.appendChild(s);return t}}class n{constructor(t){this.project=t}draw(){const t=document.querySelector("#main-content");this.clear(t),this.drawTasks(t,this.project.tasks);const e=this.addTaskOption();t.appendChild(e)}addTaskOption(){const t=document.createElement("div");t.classList.add("task-container"),t.classList.add("add");const e=document.createElement("button");return e.classList.add("uniqueBtn"),e.classList.add("add"),e.textContent="ADD",t.appendChild(e),t}drawTasks(t,e){for(let s of e){const e=new i(s);t.appendChild(e.draw())}}clear(t){t.innerHTML=""}completeTask(){document.getElementById()}}(new class{constructor(){this.toDoList=new s,this.currentProjectPage="Inbox",this.currentForm=(()=>{const t=document.querySelector(".form-container"),e=()=>{const t=document.createElement("img");return t.classList.add("closeFormBtn"),t.src="../../../imgs/mac-close-btn.png",t.alt="A button that closes the form.",t.addEventListener("click",(()=>{const t=document.querySelector("form"),e=document.querySelector(".face-mask");t.style.visibility="hidden",e.style.visibility="hidden"})),t},s=()=>{const t=document.createElement("div"),e=document.createElement("label");e.classList.add("dateLabel"),e.setAttribute("for","inputDueDate"),e.textContent="Due Date:";const s=document.createElement("input");return s.setAttribute("type","date"),s.setAttribute("id","inputDueDate"),s.setAttribute("name","trip-start"),t.appendChild(e),t.appendChild(s),t},i=()=>{const t=document.createElement("div"),e=document.createElement("div"),s=document.createElement("div");t.classList.add("prioWrapper"),s.classList.add("prioOptions"),e.classList.add("prioLabel"),e.textContent="How important is this task?";const i=d("lowPrio","low"),n=d("medPrio","medium"),a=d("highPrio","high");for(let t of[i,n,a])s.appendChild(t);return t.appendChild(e),t.appendChild(s),t;function d(t,e){const s=document.createElement("div"),i=document.createElement("input"),n={type:"radio",id:t,name:"prio",value:e};for(let t in n)i.setAttribute(t,n[t]);const a=document.createElement("label");return a.setAttribute("for",t),a.classList.add(t),a.textContent=e,s.appendChild(i),s.appendChild(a),s}};return{addTask:()=>{const n=((t,e,s,i=!0)=>{const n=document.createElement("div"),a=document.createElement("label");a.setAttribute("for",s),a.textContent=t;const d=document.createElement("input"),r={type:"text",id:s,name:s,placeholder:e};for(let t in r)d.setAttribute(t,r[t]);return d.required=i,n.appendChild(a),n.appendChild(d),n})("Task Title: ","e.g. Learn React in 20 days..","inputTaskTitle");n.classList.add("inputTaskTitle");const a=((t,e,s,i=!0)=>{const n=document.createElement("div"),a=document.createElement("label");a.setAttribute("for",s),a.textContent=t;const d=document.createElement("textarea"),r={id:s,name:s,placeholder:e,rows:6,cols:50};for(let t in r)d.setAttribute(t,r[t]);return d.required=i,n.appendChild(a),n.appendChild(d),n})("Task Details: ","e.g. Not an task. Remember to take breaks and walk outside.","inputTaskDetails");a.classList.add("inputTaskDetails");const d=[n,a,i(),s(),e()];for(let e of d)t.appendChild(e);const r=(()=>{const t=document.createElement("button");return t.classList.add("uniqueBtn"),t.classList.add("appendTaskBtn"),t.textContent="Add Task",t.setAttribute("type","submit"),t})();t.appendChild(r),document.getElementById("medPrio").checked=!0},clear:()=>{for(;t.firstChild;)t.removeChild(t.lastChild)},collectTaskInfo:()=>{const t=document.getElementById("inputTaskTitle"),e=document.getElementById("inputTaskDetails"),s=document.querySelector('input[name="prio"]:checked'),i=document.querySelector("#inputDueDate");return{title:t.value,details:e.value,priority:s.value,date:i.value}}}})()}loadHomePage(){this.addNewTask(this.currentProjectPage,{title:"Walking the dog",details:"He is asking for it so this task is a must",priority:"medium",date:"25-02-2002"}),this.loadSideBar()}loadPage(t){this.toDoList.getProject(t).reInitialiseId(),this.drawPage(t),this.addTaskFunction(t),this.applyDelTaskFunction(t)}drawPage(t){new n(this.toDoList.getProject(t)).draw()}addTaskFunction(t){document.querySelector(".uniqueBtn.add").addEventListener("click",(()=>{this.currentForm.clear(),this.currentForm.addTask(),document.getElementById("medPrio").checked=!0,document.querySelector("form").style.visibility="visible",document.querySelector(".face-mask").style.visibility="visible",inputDueDate.valueAsDate=new Date;const e=document.querySelector(".uniqueBtn.appendTaskBtn");this.submitTaskFunction(e,t)}))}addNewTask(e,s){this.toDoList.getProject(e).addTask(new t(s.title,s.details,s.date,s.priority,this.toDoList.getProject(e).tasks.length)),this.loadPage(e)}submitTaskFunction(t,e){t.addEventListener("click",(t=>{if(document.querySelector("form").checkValidity()){const s=this.currentForm.collectTaskInfo();this.addNewTask(e,s),document.querySelector("form").style.visibility="hidden",document.querySelector(".face-mask").style.visibility="hidden",t.preventDefault()}}))}removeTaskFunction(t,e){document.getElementById(`delTask-${e}`).addEventListener("click",(()=>{this.toDoList.getProject(t).deleteTask(e),this.loadPage(t)}))}applyDelTaskFunction(t){this.toDoList.getProject(t).tasks.map((e=>{this.removeTaskFunction(t,e.id)}))}loadSideBar(){this.addSlideInOut(),this.drawInboxTabs(),this.drawProjectTabs()}drawInboxTabs(){const t=document.createElement("ul");this.addTab(t,"Today"),this.addTab(t,"This Week");const e=document.querySelector(".inbox-bar");e.appendChild(t),this.addDropDownMenu(e,t)}drawProjectTabs(){const t=["Inbox","Today","This Week"],e=this.toDoList.projects.filter((e=>!t.includes(e.name))),s=document.createElement("ul");for(let t of e)this.addTab(s,t.name);const i=document.querySelector(".project-bar");i.appendChild(s),this.addDropDownMenu(i,s)}addDropDownMenu(t,e){t.addEventListener("mouseover",(()=>{e.style.display="block"})),t.addEventListener("mouseout",(()=>{e.style.display="none"}))}addTab(t,e){const s=document.createElement("li");s.textContent=this.toDoList.getProject(e).name,t.appendChild(s)}addSlideInOut(){const t=document.getElementById("sideBar");t.addEventListener("mouseover",(()=>{t.style.width="200px"})),t.addEventListener("mouseout",(()=>{t.style.width="65px"}))}}).loadHomePage()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3lGLEVBQVdwRyxZQUFZbUcsR0FDdkI5SixLQUFLMEosZ0JBQWdCSyxFQUFZRCxFQUNsQyxDQUVBSixnQkFBZ0JNLEVBQVNDLEdBRXhCRCxFQUFRN0csaUJBQWlCLGFBQWEsS0FDckM4RyxFQUFLMUcsTUFBTTJHLFFBQVUsT0FBTyxJQUU3QkYsRUFBUTdHLGlCQUFpQixZQUFZLEtBQ3BDOEcsRUFBSzFHLE1BQU0yRyxRQUFVLE1BQU0sR0FFN0IsQ0FDQVYsT0FBT1csRUFBUzFJLEdBRWYsTUFBTTJJLEVBQU0xSCxTQUFTQyxjQUFjLE1BRW5DeUgsRUFBSXRILFlBQWM5QyxLQUFLa0YsU0FBU3RELFdBQVdILEdBQWE5QixLQUN4RHdLLEVBQVF4RyxZQUFZeUcsRUFDckIsQ0FFQWhCLGdCQUNDLE1BQU1pQixFQUFVM0gsU0FBU3VDLGVBQWUsV0FDeENvRixFQUFRbEgsaUJBQWlCLGFBQWEsS0FDckNrSCxFQUFROUcsTUFBTStHLE1BQVEsT0FBTyxJQUU5QkQsRUFBUWxILGlCQUFpQixZQUFZLEtBQ3BDa0gsRUFBUTlHLE1BQU0rRyxNQUFRLE1BQU0sR0FFOUIsSUQzS2FwQyxjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi10by1kby1saXN0Ly4vc3JjL21vZHVsZXMvdGFzay5qcyIsIndlYnBhY2s6Ly9vZGluLXRvLWRvLWxpc3QvLi9zcmMvbW9kdWxlcy9wcm9qZWN0LmpzIiwid2VicGFjazovL29kaW4tdG8tZG8tbGlzdC8uL3NyYy9tb2R1bGVzL0FsbFByb2plY3RzLmpzIiwid2VicGFjazovL29kaW4tdG8tZG8tbGlzdC8uL3NyYy9tb2R1bGVzL1VJL1Byb2plY3RVSS5qcyIsIndlYnBhY2s6Ly9vZGluLXRvLWRvLWxpc3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby1saXN0Ly4vc3JjL21vZHVsZXMvVUkuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby1saXN0Ly4vc3JjL21vZHVsZXMvVUkvZm9ybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBUYXNrIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIGlkKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLmlkID0gaWQ7IC8vIFRvIGFsbG93IGRlbGV0aW9uIG9mIHRhc2sgd2l0aCB0aGUgc2FtZSBuYW1lO1xuICAgICAgICBcbiAgICB9XG4gICAgc2V0IG5hbWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IHZhbHVlO1xuICAgIH07XG5cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gICAgfTtcbiAgICBcbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZDtcbiAgICB9O1xuICAgIHNldCBpZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9pZCA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgcHJpb3JpdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcmlvcml0eTtcbiAgICB9XG4gICAgc2V0IHByaW9yaXR5KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3ByaW9yaXR5ID0gdmFsdWU7XG4gICAgfVxuICAgIFxuICAgIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9uO1xuICAgIH07XG4gICAgc2V0IGRlc2NyaXB0aW9uKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gdmFsdWU7XG4gICAgfTtcblxuICAgIGdldCBkdWVEYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZHVlRGF0ZTtcbiAgICB9O1xuICAgIHNldCBkdWVEYXRlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2R1ZURhdGUgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IGR1ZURhdGVGb3JtYXR0ZWQoKSB7XG4gICAgICAgIGNvbnN0IGRheSA9IHRoaXMuZHVlRGF0ZS5zcGxpdCgnLScpWzBdO1xuICAgICAgICBjb25zdCBtb250aCA9IHRoaXMuZHVlRGF0ZS5zcGxpdCgnLScpWzFdO1xuICAgICAgICBjb25zdCB5ZWFyID0gdGhpcy5kdWVEYXRlLnNwbGl0KCctJylbMl07XG5cbiAgICAgICAgcmV0dXJuIGAke2RheX0vJHttb250aH0vJHt5ZWFyfWA7XG4gICAgfTtcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdCB7XG4gICAgY29uc3RydWN0b3IobmFtZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnRhc2tzID0gW107XG4gICAgfTtcbiAgICBcbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gICAgfTtcbiAgICBzZXQgbmFtZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9uYW1lID0gdmFsdWU7XG4gICAgfTtcbiAgICBnZXQgdGFza3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrcztcbiAgICB9O1xuICAgIHNldCB0YXNrcyh2YWx1ZSkge1xuICAgICAgICB0aGlzLl90YXNrcyA9IHZhbHVlO1xuICAgIH1cbiAgICBhZGRUYXNrKHRhc2spIHtcbiAgICAgICAgdGhpcy5fdGFza3MucHVzaCh0YXNrKTsgICAgICAgIFxuICAgIH07XG4gICAgZGVsZXRlVGFzayh0YXNrSWQpIHtcbiAgICAgICAgdGhpcy5fdGFza3MgPSB0aGlzLl90YXNrcy5maWx0ZXIodGFzayA9PiB0YXNrLmlkICE9PSB0YXNrSWQpO1xuICAgIH07XG4gICAgcmVJbml0aWFsaXNlSWQoKSB7XG4gICAgICAgIGZvcihsZXQgbmV3SWQgPSAwOyBuZXdJZCA8IHRoaXMudGFza3MubGVuZ3RoOyBuZXdJZCsrKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2tzW25ld0lkXS5pZCA9IG5ld0lkOyBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRvIGJlIGFkZGVkOiBHZXQgdG9kYXkncyBhbmQgdGhpcyB3ZWVrJ3MgdGFza3MuIFxufTsiLCJpbXBvcnQgVGFzayBmcm9tIFwiLi90YXNrXCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFsbFByb2plY3RzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0cyA9IFtdO1xuICAgICAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QoJ0luYm94JykpO1xuICAgICAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QoJ1RvZGF5JykpO1xuICAgICAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QoJ1RoaXMgV2VlaycpKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0cy5wdXNoKG5ldyBQcm9qZWN0KCdSZWFjdCcpKTtcbiAgICB9O1xuXG4gICAgZ2V0IHByb2plY3RzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJvamVjdHM7XG4gICAgfTtcbiAgICBzZXQgcHJvamVjdHModmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcHJvamVjdHMgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBwcm9qZWN0IG5hbWUgZXhpc3RzIGluIGxpc3Qgb2YgcHJvamVjdHMuXG4gICAgY29udGFpbnMocHJvamVjdE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdHMuc29tZShwcm9qZWN0ID0+IHByb2plY3QubmFtZSA9PT0gcHJvamVjdE5hbWUpO1xuICAgIH07XG5cbiAgICBnZXRQcm9qZWN0KHByb2plY3ROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3RzLmZpbmQocHJvamVjdCA9PiBwcm9qZWN0Lm5hbWUgPT09IHByb2plY3ROYW1lKTtcbiAgICB9O1xuXG4gICAgYWRkUHJvamVjdChuZXdQcm9qZWN0TmFtZSkge1xuICAgICAgICAvLyBDYW5ub3QgaGF2ZSBzYW1lIHByb2plY3QgbmFtZXMuXG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5zKG5ld1Byb2plY3ROYW1lKSkgcmV0dXJuO1xuICAgICAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QobmV3UHJvamVjdE5hbWUpKTtcbiAgICB9O1xuXG4gICAgZGVsZXRlUHJvamVjdChwcm9qZWN0TmFtZSkge1xuICAgICAgICBjb25zdCBwcm9qZWN0VG9EZWxldGUgPSB0aGlzLnByb2plY3RzLmZpbmQocHJvamVjdCA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdC5uYW1lID09PSBwcm9qZWN0TmFtZSk7XG4gICAgICAgIHRoaXMucHJvamVjdHMuc3BsaWNlKHRoaXMucHJvamVjdHMuaW5kZXhPZihwcm9qZWN0VG9EZWxldGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxKVxuICAgIH07XG4gICAgXG5cbiAgICAvLyBDYW4gYWRkIHRvZGF5J3MgYW5kIHRoaXMgd2VlaydzIGZ1bmN0aW9uYWxpdHkuXG59OyIsImltcG9ydCBUYXNrIGZyb20gXCIuLi90YXNrXCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi4vcHJvamVjdFwiO1xuXG5jbGFzcyBUYXNrVUkge1xuXHQvLyBQdXJwb3NlIG9mIHRoaXMgY2xhc3MgaXQgdG8gdGFrZSBpbiBhIHRhc2sgb2JqLCBhbmQgdHVybiBpdCBpbnRvXG5cdC8vIGEgZGl2IHdpdGggYWxsIHJlbGV2YW50IGluZm9ybWF0aW9uIHJlZ2FyZGluZyB0aGUgdGFzay5cblx0Ly8gRnJvbSBsZWZ0LXRvLXJpZ2h0OiBbY2hlY2tCb3gsIG5hbWUsIGRldGFpbHMsIHByaW9yaXR5LCBkYXRlLCBlZGl0SWNvbiwgYmluSWNvbl1cblx0Y29uc3RydWN0b3IodGFza09iaikge1xuXHRcdHRoaXMudGFzayA9IHRhc2tPYmo7XG5cdH1cblx0cmVuZGVySW5mbyhlbGVtLCBhZGRlZENsYXNzLCB0ZXh0ID0gXCJcIikge1xuXHRcdGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW0pO1xuXHRcdG5hbWUuY2xhc3NMaXN0LmFkZChhZGRlZENsYXNzKTtcblx0XHRuYW1lLnRleHRDb250ZW50ID0gdGV4dDsgLy8gZGVmYXVsdCBlbXB0eSBzdHJcblxuXHRcdHJldHVybiBuYW1lO1xuXHR9XG5cdGNyZWF0ZUVsZW1lbnRzKHRhc2tDb250YWluZXIpIHtcblx0XHRjb25zdCBzdGF0dXNDaGVjayA9IHRoaXMucmVuZGVySW5mbyhcImlucHV0XCIsIFwic3RhdHVzQ2hlY2tcIik7XG5cdFx0c3RhdHVzQ2hlY2suc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpO1xuXHRcdHN0YXR1c0NoZWNrLnNldEF0dHJpYnV0ZShcImlkXCIsIFwic3RhdHVzQ2hlY2tcIik7XG5cdFx0c3RhdHVzQ2hlY2suYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZXZlbnQpID0+IHtcblx0XHRcdGlmIChldmVudC50YXJnZXQuY2hlY2tlZCkge1xuXHRcdFx0XHR0YXNrQ29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSBcIjQwJVwiO1xuXHRcdFx0XHQvLyB0YXNrQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgwLjk4NSknO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGFza0NvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gXCIxMDAlXCI7XG5cdFx0XHRcdC8vIHRhc2tDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEpJztcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGNvbnN0IG5hbWUgPSB0aGlzLnJlbmRlckluZm8oXCJkaXZcIiwgXCJ0YXNrTmFtZVwiLCB0aGlzLnRhc2submFtZSk7XG5cblx0XHQvLyBXaGVuIGNsaWNrZWQsIHBvcCB1cCBhIGZvcm0gd2hlcmUgdGhlIGRldGFpbHMgb2YgdGhlIHRhc2sgaXMgZGlzcGxheWVkLlxuXHRcdGNvbnN0IGRldGFpbHNCdG4gPSB0aGlzLnJlbmRlckluZm8oXCJidXR0b25cIiwgXCJ1bmlxdWVCdG5cIiwgXCJEZXRhaWxzXCIpO1xuXHRcdGRldGFpbHNCdG4uY2xhc3NMaXN0LmFkZChcImRldGFpbHNcIik7XG5cblx0XHQvLyBQcmlvcml0eSBpY29uXG5cdFx0Y29uc3QgcHJpb3JpdHkgPSB0aGlzLnJlbmRlckluZm8oXCJkaXZcIiwgXCJzdGF0dXNQcmlvXCIpO1xuXHRcdGNvbnN0IHByaW9yaXR5SWNvbiA9IHRoaXMucmVuZGVySW5mbyhcImlcIiwgXCJtYXRlcmlhbC1pY29uc1wiLCBcIndhcm5pbmdcIik7XG5cblx0XHQvLyBDaGFuZ2UgY29sb3IgYmFzZWQgb24gcHJpb3JpdHkgb2YgdGFzayAtPiBbJ2hpZ2gnLCAnbWVkaXVtJywgJ2xvdyddXG5cdFx0cHJpb3JpdHlJY29uLmNsYXNzTGlzdC5hZGQodGhpcy50YXNrLnByaW9yaXR5KTtcblx0XHRwcmlvcml0eS5hcHBlbmRDaGlsZChwcmlvcml0eUljb24pO1xuXG5cdFx0Ly8gSnVzdCBhIG1vY2sgZGF0ZSBmb3Igbm93LiBTdWJqZWN0IHRvIGNoYW5nZSBiYXNlZCBvbiB1c2VyIGlucHV0LlxuXHRcdC8vIGNvbnN0IHRpbWVFbGFwc2VkID0gRGF0ZS5ub3coKTtcblx0XHQvLyBjb25zdCB0b2RheSA9IG5ldyBEYXRlKHRpbWVFbGFwc2VkKTtcblx0XHQvLyBjb25zdCBkYXRlID0gdGhpcy5yZW5kZXJJbmZvKFxuXHRcdC8vIFx0XCJkaXZcIixcblx0XHQvLyBcdFwidGFza0RhdGVcIixcblx0XHQvLyBcdGAke3RvZGF5LnRvTG9jYWxlRGF0ZVN0cmluZygpfWBcblx0XHQvLyApO1xuXG5cdFx0Y29uc3QgZGF0ZSA9IHRoaXMucmVuZGVySW5mbyhcblx0XHRcdFwiZGl2XCIsXG5cdFx0XHRcInRhc2tEYXRlXCIsXG5cdFx0XHR0aGlzLnRhc2suZHVlRGF0ZUZvcm1hdHRlZFxuXHRcdClcblxuXHRcdC8vIGljb25zXG5cdFx0Y29uc3QgZWRpdCA9IHRoaXMucmVuZGVySW5mbyhcImRpdlwiLCBcInRhc2tFZGl0XCIpO1xuXHRcdGNvbnN0IGVkaXRJY29uID0gdGhpcy5yZW5kZXJJbmZvKFwiaVwiLCBcIm1hdGVyaWFsLWljb25zXCIsIFwiZWRpdFwiKTtcblx0XHRlZGl0LmFwcGVuZENoaWxkKGVkaXRJY29uKTtcblxuXHRcdGNvbnN0IHRhc2tEZWwgPSB0aGlzLnJlbmRlckluZm8oXCJkaXZcIiwgXCJ0YXNrRGVsXCIpO1xuXHRcdGNvbnN0IGRlbEljb24gPSB0aGlzLnJlbmRlckluZm8oXCJpXCIsIFwibWF0ZXJpYWwtaWNvbnNcIiwgXCJkZWxldGVcIik7XG5cdFx0XHRcblx0XHQvLyBBZGQgdW5pcXVlIGlkIGlkZW50aWZlciBiYXNlZCBvbiB0YXNrIGlkIGZvciBiaW4gaWNvbi5cblx0XHR0YXNrRGVsLnNldEF0dHJpYnV0ZShcImlkXCIsIGBkZWxUYXNrLSR7dGhpcy50YXNrLmlkfWApXG5cblx0XHQvLyBDcmVhdGUgRGF0YXNldD8/XG5cdFx0Ly8gZGVsSWNvbi5kYXRhc2V0LmlkID0gdGhpcy50YXNrLmlkO1xuXG5cdFx0dGFza0RlbC5hcHBlbmRDaGlsZChkZWxJY29uKTtcblxuXHRcdHJldHVybiBbc3RhdHVzQ2hlY2ssIG5hbWUsIGRldGFpbHNCdG4sIHByaW9yaXR5LCBkYXRlLCBlZGl0LCB0YXNrRGVsXTtcblx0fVxuXHRkcmF3KCkge1xuXHRcdGNvbnN0IHRhc2tDb250YWluZXIgPSB0aGlzLnJlbmRlckluZm8oXCJkaXZcIiwgXCJ0YXNrLWNvbnRhaW5lclwiKTtcblx0XHRjb25zdCBlbGVtcyA9IHRoaXMuY3JlYXRlRWxlbWVudHModGFza0NvbnRhaW5lcik7XG5cdFx0Zm9yIChsZXQgZWxlbSBvZiBlbGVtcykge1xuXHRcdFx0dGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRhc2tDb250YWluZXI7XG5cdH1cbn1cblxuY2xhc3MgUHJvamVjdFVJIHtcblx0Y29uc3RydWN0b3IocHJvamVjdE9iaikge1xuXHRcdHRoaXMucHJvamVjdCA9IHByb2plY3RPYmo7XG5cdH1cblx0ZHJhdygpIHtcblx0XHRjb25zdCBtYWluQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpbi1jb250ZW50XCIpO1xuXHRcdHRoaXMuY2xlYXIobWFpbkNvbnRlbnQpO1xuXG5cdFx0Ly8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgdGFza3MgYW5kIGdpdmUgaXQgYSBUYXNrVUkgY2xhc3MuXG5cdFx0Ly8gVXNlIHRoZSBkcmF3IG1ldGhvZCB0byBnZXQgdGhlIGRpdiBjb250YWluZXIgYW5kIGFwcGVuZCBpdCB0b1xuICAgICAgICAvLyBtYWluQ29udGVudCBjb250YWluZXIuXG5cdFx0dGhpcy5kcmF3VGFza3MobWFpbkNvbnRlbnQsIHRoaXMucHJvamVjdC50YXNrcyk7XG5cbiAgICAgICAgY29uc3QgYWRkVGFza09wdGlvbiA9IHRoaXMuYWRkVGFza09wdGlvbigpO1xuXHRcdG1haW5Db250ZW50LmFwcGVuZENoaWxkKGFkZFRhc2tPcHRpb24pO1xuXHR9XG4gICAgYWRkVGFza09wdGlvbigpIHtcbiAgICAgICAgLy8gRHJhdyBhbiBhZGQgdGFzayBvcHRpb24gYmVuZWF0aCBhbGwgdGFza3NcbiAgICAgICAgY29uc3QgYWRkVGFza0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGFkZFRhc2tDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRhc2stY29udGFpbmVyXCIpO1xuICAgICAgICBhZGRUYXNrQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJhZGRcIik7XG4gICAgXG4gICAgICAgIGNvbnN0IGFkZFRhc2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICBhZGRUYXNrQnRuLmNsYXNzTGlzdC5hZGQoXCJ1bmlxdWVCdG5cIik7XG4gICAgICAgIGFkZFRhc2tCdG4uY2xhc3NMaXN0LmFkZChcImFkZFwiKTtcbiAgICAgICAgYWRkVGFza0J0bi50ZXh0Q29udGVudCA9IFwiQUREXCI7XG4gICAgXG4gICAgICAgIGFkZFRhc2tDb250YWluZXIuYXBwZW5kQ2hpbGQoYWRkVGFza0J0bik7XG4gICAgICAgIHJldHVybiBhZGRUYXNrQ29udGFpbmVyXG4gICAgICAgIFxuICAgIH1cblx0ZHJhd1Rhc2tzKGNvbnRhaW5lciwgdGFza3MpIHtcbiAgICAgICAgZm9yIChsZXQgdGFzayBvZiB0YXNrcykge1xuICAgICAgICAgICAgY29uc3QgdGFza0Rpc3BsYXkgPSBuZXcgVGFza1VJKHRhc2spO1xuXHRcdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tEaXNwbGF5LmRyYXcoKSk7XG5cdFx0fVxuXHR9XG5cblx0Y2xlYXIoY29udGVudCkge1xuXHRcdGNvbnRlbnQuaW5uZXJIVE1MID0gXCJcIjtcblx0fVxuXG5cdGNvbXBsZXRlVGFzaygpIHtcblx0XHQvLyBNYWtlIHRhc2sgY29udGFpbmVyIHRyYW5zcGFyZW50IGFmdGVyIGNvbXBsZXRpbmcgdGFzay5cblx0XHRjb25zdCBjaGVja0JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCk7XG5cdH1cbn1cblxuZXhwb3J0IHsgVGFza1VJLCBQcm9qZWN0VUkgfTtcbiIsImltcG9ydCBVSSBmcm9tICcuL21vZHVsZXMvVUknO1xuY29uc3QgVXNlckludGVyZmFjZSA9IG5ldyBVSSgpO1xuXG5Vc2VySW50ZXJmYWNlLmxvYWRIb21lUGFnZSgpOyIsImltcG9ydCBUYXNrIGZyb20gXCIuL3Rhc2tcIjtcbmltcG9ydCBQcm9qZWN0IGZyb20gXCIuL3Byb2plY3RcIjtcbmltcG9ydCBBbGxQcm9qZWN0cyBmcm9tIFwiLi9BbGxQcm9qZWN0c1wiO1xuaW1wb3J0IHsgVGFza1VJLCBQcm9qZWN0VUkgfSBmcm9tIFwiLi9VSS9Qcm9qZWN0VUlcIjtcbmltcG9ydCB7IERyYXdGb3JtIH0gZnJvbSBcIi4vVUkvZm9ybVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSSB7XG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMudG9Eb0xpc3QgPSBuZXcgQWxsUHJvamVjdHMoKTtcblxuXHRcdC8vIEluaXRpYWxpc2UgZmlyc3QgaG9tZVBhZ2UgdG8gYmUgb24gdGhlIFwiSW5ib3hcIiBwYWdlLlxuXHRcdHRoaXMuY3VycmVudFByb2plY3RQYWdlID0gXCJJbmJveFwiO1xuXHRcdHRoaXMuY3VycmVudEZvcm0gPSBEcmF3Rm9ybSgpO1xuXHR9XG5cblx0bG9hZEhvbWVQYWdlKCkge1xuXHRcdC8vIEluaXRpYWxpc2UgZmlyc3QgZHVtbXkgdGFzazpcblx0XHRjb25zdCB0YXNrMSA9IHtcblx0XHRcdHRpdGxlOiBcIldhbGtpbmcgdGhlIGRvZ1wiLFxuXHRcdFx0ZGV0YWlsczogXCJIZSBpcyBhc2tpbmcgZm9yIGl0IHNvIHRoaXMgdGFzayBpcyBhIG11c3RcIixcblx0XHRcdHByaW9yaXR5OiBcIm1lZGl1bVwiLFxuXHRcdFx0ZGF0ZTogXCIyNS0wMi0yMDAyXCIsXG5cdFx0fTtcblx0XHR0aGlzLmFkZE5ld1Rhc2sodGhpcy5jdXJyZW50UHJvamVjdFBhZ2UsIHRhc2sxKTtcblxuXHRcdHRoaXMubG9hZFNpZGVCYXIoKTtcblx0fVxuXG5cdGxvYWRQYWdlKHByb2plY3ROYW1lKSB7XG5cdFx0Ly8gV2UgbmVlZCB0byByZXNldCBhbGwgaWRzIG9uIGFsbCB0YXNrcyB0byBwcmV2ZW50XG5cdFx0Ly8gZGVsZXRpb24gb2YgdHdvIHRhc2tzIHdpdGggdGhlIHNhbWUgaWQgYXQgb25jZS5cblx0XHR0aGlzLnRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdE5hbWUpLnJlSW5pdGlhbGlzZUlkKCk7XG5cblx0XHR0aGlzLmRyYXdQYWdlKHByb2plY3ROYW1lKTtcblxuXHRcdC8vIFJlaW5pdGlhbGlzZSBhZGQgdGFzayBmdW5jdGlvbiBmb3IgbmV3IHBhZ2UncyBidG4uXG5cdFx0dGhpcy5hZGRUYXNrRnVuY3Rpb24ocHJvamVjdE5hbWUpO1xuXHRcdC8vIEFwcGx5IGV2ZW50bGlzdGVuZXJzIGZvciBlYWNoIGNvcnJlc3BvbmRpbmcgYmluIGljb25zLlxuXHRcdHRoaXMuYXBwbHlEZWxUYXNrRnVuY3Rpb24ocHJvamVjdE5hbWUpO1xuXHR9XG5cblx0ZHJhd1BhZ2UocHJvamVjdE5hbWUpIHtcblx0XHRjb25zdCBwcm9qZWN0RGlzcGxheSA9IG5ldyBQcm9qZWN0VUkodGhpcy50b0RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3ROYW1lKSk7XG5cdFx0cHJvamVjdERpc3BsYXkuZHJhdygpO1xuXHR9XG5cblx0LyogQnV0dG9uIGZ1bmN0aW9uYWxpdGllcyAqL1xuXHRhZGRUYXNrRnVuY3Rpb24ocHJvamVjdE5hbWUpIHtcblx0XHRjb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51bmlxdWVCdG4uYWRkXCIpO1xuXHRcdGFkZFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblxuXHRcdFx0Ly8gQ2xlYXIgYW55IGN1cnJlbnQgZm9ybSBhbmQgZHJhdyB0aGUgYWRkIHRhc2sgZm9ybS5cblx0XHRcdHRoaXMuY3VycmVudEZvcm0uY2xlYXIoKTtcblx0XHRcdHRoaXMuY3VycmVudEZvcm0uYWRkVGFzaygpO1xuXHRcdFx0Ly8gU2V0IHRoZSBkZWZhdWx0IGNoZWNrZWQgcmFkaW8gYnV0dG9uIHRvIE1lZGl1bSBQcmlvcml0eS5cblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVkUHJpb1wiKS5jaGVja2VkID0gdHJ1ZTtcblx0XHRcdFxuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIikuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuXHRcdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mYWNlLW1hc2tcIikuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuXG5cdFx0XHQvLyBTZXQgZGVmYXVsdCBkYXRlIGlucHV0IHRvIGN1cnJlbnQgZGF5LlxuXHRcdFx0aW5wdXREdWVEYXRlLnZhbHVlQXNEYXRlID0gbmV3IERhdGUoKTtcblxuXHRcdFx0Ly8gQWRkIGRyYXcgbmV3IHRhc2sgZnVuY3Rpb25hbGl0eSB0byBhcHBlbmRUYXNrQnRuIG9uIHRoZSBmb3JtLlxuXHRcdFx0Y29uc3QgYXBwZW5kVGFza0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudW5pcXVlQnRuLmFwcGVuZFRhc2tCdG5cIik7XG5cdFx0XHR0aGlzLnN1Ym1pdFRhc2tGdW5jdGlvbihhcHBlbmRUYXNrQnRuLCBwcm9qZWN0TmFtZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRhZGROZXdUYXNrKHByb2plY3ROYW1lLCB0YXNrSW5mbykge1xuXHRcdHRoaXMudG9Eb0xpc3Rcblx0XHRcdC5nZXRQcm9qZWN0KHByb2plY3ROYW1lKVxuXHRcdFx0LmFkZFRhc2soXG5cdFx0XHRcdG5ldyBUYXNrKFxuXHRcdFx0XHRcdHRhc2tJbmZvW1widGl0bGVcIl0sXG5cdFx0XHRcdFx0dGFza0luZm9bXCJkZXRhaWxzXCJdLFxuXHRcdFx0XHRcdHRhc2tJbmZvW1wiZGF0ZVwiXSxcblx0XHRcdFx0XHR0YXNrSW5mb1tcInByaW9yaXR5XCJdLFxuXHRcdFx0XHRcdHRoaXMudG9Eb0xpc3QuZ2V0UHJvamVjdChwcm9qZWN0TmFtZSkudGFza3MubGVuZ3RoXG5cdFx0XHRcdClcblx0XHRcdCk7XG5cdFx0dGhpcy5sb2FkUGFnZShwcm9qZWN0TmFtZSk7XG5cdH1cblxuXHRzdWJtaXRUYXNrRnVuY3Rpb24oYnRuLCBwcm9qZWN0TmFtZSkge1xuXHRcdGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG5cdFx0XHRpZihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJykuY2hlY2tWYWxpZGl0eSgpKXtcblx0XHRcdFx0Y29uc3QgdGFza0luZm8gPSB0aGlzLmN1cnJlbnRGb3JtLmNvbGxlY3RUYXNrSW5mbygpO1xuXHRcdFx0XHR0aGlzLmFkZE5ld1Rhc2socHJvamVjdE5hbWUsIHRhc2tJbmZvKTtcblx0XG5cdFx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuXHRcdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZhY2UtbWFza1wiKS5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcdFx0XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRyZW1vdmVUYXNrRnVuY3Rpb24ocHJvamVjdE5hbWUsIHRhc2tJZCkge1xuXHRcdC8vIEFkZCBkZWxldGUgdGFzayBmdW5jdGlvbnMgZm9yIGVhY2ggZXhpc3RpbmcgdGFza1VJLlxuXHRcdGNvbnN0IGRlbEltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBkZWxUYXNrLSR7dGFza0lkfWApO1xuXHRcdGRlbEltZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXHRcdFx0dGhpcy50b0RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3ROYW1lKS5kZWxldGVUYXNrKHRhc2tJZCk7XG5cdFx0XHR0aGlzLmxvYWRQYWdlKHByb2plY3ROYW1lKTtcblx0XHR9KTtcblx0fVxuXHRhcHBseURlbFRhc2tGdW5jdGlvbihwcm9qZWN0TmFtZSkge1xuXHRcdC8vIEZvciBhbGwgdGhlIHRhc2tzIGluIHRoZSBwcm9qZWN0LCBhZGQgcmVtb3ZlVGFzayBmdW5jdGlvbmFsaXR5IGZvclxuXHRcdC8vIGVhY2ggdGFzay5cblx0XHR0aGlzLnRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdE5hbWUpLnRhc2tzLm1hcCgodGFzaykgPT4ge1xuXHRcdFx0dGhpcy5yZW1vdmVUYXNrRnVuY3Rpb24ocHJvamVjdE5hbWUsIHRhc2suaWQpO1xuXHRcdH0pO1xuXHR9XG5cblx0LyogU2lkZUJhciBmdW5jdGlvbmFsaXRpZXMgKi9cblx0bG9hZFNpZGVCYXIoKSB7XG5cdFx0dGhpcy5hZGRTbGlkZUluT3V0KCk7XG5cdFx0dGhpcy5kcmF3SW5ib3hUYWJzKCk7XG5cdFx0dGhpcy5kcmF3UHJvamVjdFRhYnMoKTtcblx0fVxuXG5cdGRyYXdJbmJveFRhYnMoKSB7XG5cdFx0Ly8gQWRkIHRvZGF5IGFuZCB0aGlzIHdlZWsncyB0YXNrIGJlbmVhdGggSW5ib3ggdGFiIHNpZGViYXIuXG5cdFx0Y29uc3QgaW5ib3hUYWJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xuXG5cdFx0dGhpcy5hZGRUYWIoaW5ib3hUYWJzLCBcIlRvZGF5XCIpO1xuXHRcdHRoaXMuYWRkVGFiKGluYm94VGFicywgXCJUaGlzIFdlZWtcIik7XG5cblx0XHRjb25zdCBpbmJveEJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW5ib3gtYmFyXCIpO1xuXHRcdGluYm94QmFyLmFwcGVuZENoaWxkKGluYm94VGFicyk7XG5cdFx0dGhpcy5hZGREcm9wRG93bk1lbnUoaW5ib3hCYXIsIGluYm94VGFicyk7XG5cdH1cblxuXHRkcmF3UHJvamVjdFRhYnMoKSB7XG5cdFx0Ly8gRmluZCBhbGwgb3RoZXIgcHJvamVjdHMuXG5cdFx0Y29uc3QgaW5ib3hQcm9qZWN0cyA9IFtcIkluYm94XCIsIFwiVG9kYXlcIiwgXCJUaGlzIFdlZWtcIl07XG5cdFx0Y29uc3QgY3VzdG9tUHJvamVjdHMgPSB0aGlzLnRvRG9MaXN0LnByb2plY3RzLmZpbHRlcihcblx0XHRcdChwcm9qZWN0KSA9PiAhaW5ib3hQcm9qZWN0cy5pbmNsdWRlcyhwcm9qZWN0Lm5hbWUpXG5cdFx0KTtcblxuXHRcdGNvbnN0IHByb2plY3RUYWJzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xuXHRcdGZvciAobGV0IHByb2plY3Qgb2YgY3VzdG9tUHJvamVjdHMpIHtcblx0XHRcdHRoaXMuYWRkVGFiKHByb2plY3RUYWJzLCBwcm9qZWN0Lm5hbWUpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHByb2plY3RCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtYmFyXCIpO1xuXHRcdHByb2plY3RCYXIuYXBwZW5kQ2hpbGQocHJvamVjdFRhYnMpO1xuXHRcdHRoaXMuYWRkRHJvcERvd25NZW51KHByb2plY3RCYXIsIHByb2plY3RUYWJzKTtcblx0fVxuXG5cdGFkZERyb3BEb3duTWVudShtZW51QmFyLCB0YWJzKSB7XG5cdFx0Ly8gVGFicyB3aWxsIGJlIGVsb25nYXRlZCBiYXNlZCBvbiB0YWIgaG92ZXJlZC5cblx0XHRtZW51QmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuXHRcdFx0dGFicy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXHRcdH0pO1xuXHRcdG1lbnVCYXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsICgpID0+IHtcblx0XHRcdHRhYnMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdH0pO1xuXHR9XG5cdGFkZFRhYihtZW51VGFiLCBwcm9qZWN0TmFtZSkge1xuXHRcdC8vIENyZWF0ZSBsaSBhbmQgYXBwZW5kIGl0IHRvIGdpdmVuIHBhcmFtIGVsZW0uXG5cdFx0Y29uc3QgdGFiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuXG5cdFx0dGFiLnRleHRDb250ZW50ID0gdGhpcy50b0RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3ROYW1lKS5uYW1lO1xuXHRcdG1lbnVUYWIuYXBwZW5kQ2hpbGQodGFiKTtcblx0fVxuXG5cdGFkZFNsaWRlSW5PdXQoKSB7XG5cdFx0Y29uc3Qgc2lkZUJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2lkZUJhclwiKTtcblx0XHRzaWRlQmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuXHRcdFx0c2lkZUJhci5zdHlsZS53aWR0aCA9IFwiMjAwcHhcIjtcblx0XHR9KTtcblx0XHRzaWRlQmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG5cdFx0XHRzaWRlQmFyLnN0eWxlLndpZHRoID0gXCI2NXB4XCI7XG5cdFx0fSk7XG5cdH1cbn1cbiIsImV4cG9ydCB7RHJhd0Zvcm19XG5cbmNvbnN0IERyYXdGb3JtID0gKCkgPT4ge1xuICAgIC8vIFdoZW4gdXNlciBwcmVzc2VzIGFkZCB0YXNrLCBwb3AgdXAgYSBmb3JtIHRoYXQgYXNrcyBmb3IgYWxsIHJlcSBpbnB1dC5cbiAgICAvLyBUaGlzIGluY2x1ZGVzIFt0YXNrTmFtZSwgZGV0YWlscywgcHJpb3JpdHlMZXZlbCwgRGF0ZV07XG4gICAgY29uc3QgZm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWNvbnRhaW5lcicpO1xuXG4gICAgY29uc3QgY2xlYXIgPSAoKSA9PiB7XG4gICAgICAgIHdoaWxlKGZvcm1Db250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgZm9ybUNvbnRhaW5lci5yZW1vdmVDaGlsZChmb3JtQ29udGFpbmVyLmxhc3RDaGlsZCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGFkZFRhc2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGFkZElucHV0VGV4dCgnVGFzayBUaXRsZTogJywgJ2UuZy4gTGVhcm4gUmVhY3QgaW4gJyArXG4gICAgICAgICcyMCBkYXlzLi4nLCAnaW5wdXRUYXNrVGl0bGUnKTtcbiAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ2lucHV0VGFza1RpdGxlJyk7XG5cbiAgICAgICAgY29uc3QgdGFza0RldGFpbHMgPSBhZGRUZXh0QXJlYSgnVGFzayBEZXRhaWxzOiAnLCAnZS5nLiBOb3QgYW4gJyArXG4gICAgICAgICd0YXNrLiBSZW1lbWJlciB0byB0YWtlIGJyZWFrcyBhbmQgd2FsayBvdXRzaWRlLicsXG4gICAgICAgICAnaW5wdXRUYXNrRGV0YWlscycpO1xuICAgICAgICB0YXNrRGV0YWlscy5jbGFzc0xpc3QuYWRkKCdpbnB1dFRhc2tEZXRhaWxzJyk7IFxuICAgICAgICBcbiAgICAgICAgY29uc3QgcHJpb09wdGlvbnMgPSBhZGRQcmlvcml0eU9wdGlvbnMoKTtcbiAgICAgICAgY29uc3QgZHVlRGF0ZSA9IGFkZElucHV0RHVlRGF0ZSgpO1xuICAgICAgICBjb25zdCBjbG9zZUZvcm1PcHRpb24gPSBhZGRDbG9zZUZvcm1GdW5jdGlvbigpO1xuXG4gICAgICAgIGNvbnN0IHRhc2tzSW5mbyA9IFt0YXNrVGl0bGUsIHRhc2tEZXRhaWxzLCBwcmlvT3B0aW9ucywgZHVlRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUZvcm1PcHRpb25dO1xuXG4gICAgICAgIGZvcihsZXQgaW5mbyBvZiB0YXNrc0luZm8pIHtcbiAgICAgICAgICAgIGZvcm1Db250YWluZXIuYXBwZW5kQ2hpbGQoaW5mbyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQWRkIHN1Ym1pdCBidG4uXG4gICAgICAgIGNvbnN0IGFwcGVuZFRhc2tCdG4gPSBhZGRBcHBlbmRUYXNrQnRuKCk7XG4gICAgICAgIFxuICAgICAgICBmb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKGFwcGVuZFRhc2tCdG4pO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lZFByaW9cIikuY2hlY2tlZCA9IHRydWU7XG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBhZGRBcHBlbmRUYXNrQnRuID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBhcHBlbmRUYXNrQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGFwcGVuZFRhc2tCdG4uY2xhc3NMaXN0LmFkZCgndW5pcXVlQnRuJyk7XG4gICAgICAgIGFwcGVuZFRhc2tCdG4uY2xhc3NMaXN0LmFkZCgnYXBwZW5kVGFza0J0bicpO1xuICAgICAgICBhcHBlbmRUYXNrQnRuLnRleHRDb250ZW50ID0gJ0FkZCBUYXNrJztcbiAgICAgICAgYXBwZW5kVGFza0J0bi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwic3VibWl0XCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gYXBwZW5kVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgIC8vICAgICBhcHBlbmRUYXNrRnVuY3Rpb24oZXZlbnQpXG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIHJldHVybiBhcHBlbmRUYXNrQnRuO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbGxlY3RUYXNrSW5mbyA9ICgpID0+IHtcbiAgICAgICAgLy8gQ29sbGVjdCBhbGwgcmVsZXZhbnQgaW5mb3JtYXRpb24gYmFzZWQgb24gdXNlciBpbnB1dCBhbmQgcmV0dXJuXG4gICAgICAgIC8vIGl0IGluIGFuIG9iai5cbiAgICAgICAgY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0VGFza1RpdGxlJyk7XG4gICAgICAgIGNvbnN0IHRhc2tEZXRhaWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0VGFza0RldGFpbHMnKTtcbiAgICAgICAgY29uc3QgcHJpb0Nob3NlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAnaW5wdXRbbmFtZT1cInByaW9cIl06Y2hlY2tlZCcpO1xuICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2lucHV0RHVlRGF0ZScpO1xuXG4gICAgICAgIGNvbnN0IHRhc2tJbmZvID0ge1xuICAgICAgICAgICAgJ3RpdGxlJzogdGFza1RpdGxlLnZhbHVlLFxuICAgICAgICAgICAgJ2RldGFpbHMnOiB0YXNrRGV0YWlscy52YWx1ZSxcbiAgICAgICAgICAgICdwcmlvcml0eSc6IHByaW9DaG9zZW4udmFsdWUsXG4gICAgICAgICAgICAnZGF0ZSc6IGRhdGUudmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0YXNrSW5mbzsgXG4gICAgfVxuXG4gICAgY29uc3QgYWRkQ2xvc2VGb3JtRnVuY3Rpb24gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsb3NlRm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICBjbG9zZUZvcm0uY2xhc3NMaXN0LmFkZCgnY2xvc2VGb3JtQnRuJyk7XG4gICAgICAgIGNsb3NlRm9ybS5zcmMgPSAnLi4vLi4vLi4vaW1ncy9tYWMtY2xvc2UtYnRuLnBuZyc7XG4gICAgICAgIGNsb3NlRm9ybS5hbHQgPSAnQSBidXR0b24gdGhhdCBjbG9zZXMgdGhlIGZvcm0uJztcblxuICAgICAgICBjbG9zZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybScpO1xuICAgICAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYWNlLW1hc2snKTtcbiAgICAgICAgICAgIGZvcm0uc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgb3ZlcmxheS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjbG9zZUZvcm07XG4gICAgfTtcblxuICAgIGNvbnN0IGFkZElucHV0RHVlRGF0ZSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnN0IGRhdGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgIGRhdGVMYWJlbC5jbGFzc0xpc3QuYWRkKCdkYXRlTGFiZWwnKTtcbiAgICAgICAgZGF0ZUxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJ2lucHV0RHVlRGF0ZScpO1xuICAgICAgICBkYXRlTGFiZWwudGV4dENvbnRlbnQgPSAnRHVlIERhdGU6JztcblxuICAgICAgICBjb25zdCBpbnB1dER1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBpbnB1dER1ZURhdGUuc2V0QXR0cmlidXRlKCd0eXBlJywgXCJkYXRlXCIpO1xuICAgICAgICBpbnB1dER1ZURhdGUuc2V0QXR0cmlidXRlKCdpZCcsICdpbnB1dER1ZURhdGUnKTtcbiAgICAgICAgaW5wdXREdWVEYXRlLnNldEF0dHJpYnV0ZSgnbmFtZScsICd0cmlwLXN0YXJ0Jyk7XG5cbiAgICAgICAgZHVlRGF0ZS5hcHBlbmRDaGlsZChkYXRlTGFiZWwpO1xuICAgICAgICBkdWVEYXRlLmFwcGVuZENoaWxkKGlucHV0RHVlRGF0ZSk7XG4gICAgICAgIHJldHVybiBkdWVEYXRlO1xuICAgIH1cblxuICAgIGNvbnN0IGFkZFByaW9yaXR5T3B0aW9ucyA9ICgpID0+IHtcbiAgICAgICAgLy8gQSB3cmFwcGVyIGlzIGdvaW5nIHRvIHdyYXAgdGhlIGxhYmVsIGFuZCBhIGNvbnRhaW5lciBjb25zaXN0aW5nIG9mXG4gICAgICAgIC8vIHRoZSByYWRpbyBvcHRpb25zLiBcbiAgICAgICAgY29uc3QgaW5wdXRQcmlvV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBwcmlvT3B0aW9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBpbnB1dFByaW9XcmFwcGVyLmNsYXNzTGlzdC5hZGQoJ3ByaW9XcmFwcGVyJylcbiAgICAgICAgcHJpb09wdGlvbnNDb250YWluZXIuY2xhc3NMaXN0LmFkZCgncHJpb09wdGlvbnMnKTtcblxuICAgICAgICBsYWJlbC5jbGFzc0xpc3QuYWRkKCdwcmlvTGFiZWwnKTtcbiAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSBcIkhvdyBpbXBvcnRhbnQgaXMgdGhpcyB0YXNrP1wiO1xuICAgICAgICBjb25zdCBsb3dQcmlvID0gY3JlYXRlUmFkaW9JbnB1dEFuZExhYmVsKCdsb3dQcmlvJywgJ2xvdycpO1xuICAgICAgICBjb25zdCBtZWRQcmlvID0gY3JlYXRlUmFkaW9JbnB1dEFuZExhYmVsKCdtZWRQcmlvJywgJ21lZGl1bScpO1xuICAgICAgICBjb25zdCBoaWdoUHJpbyA9IGNyZWF0ZVJhZGlvSW5wdXRBbmRMYWJlbCgnaGlnaFByaW8nLCAnaGlnaCcpO1xuXG4gICAgICAgIGZvcihsZXQgcHJpb09wdGlvbnMgb2YgW2xvd1ByaW8sIG1lZFByaW8sIGhpZ2hQcmlvXSkge1xuICAgICAgICAgICAgcHJpb09wdGlvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQocHJpb09wdGlvbnMpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlucHV0UHJpb1dyYXBwZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICBpbnB1dFByaW9XcmFwcGVyLmFwcGVuZENoaWxkKHByaW9PcHRpb25zQ29udGFpbmVyKTtcbiAgICAgICAgcmV0dXJuIGlucHV0UHJpb1dyYXBwZXI7XG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlUmFkaW9JbnB1dEFuZExhYmVsKGlkLCB2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgcmFkaW9PcHRpb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7XG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwicmFkaW9cIixcbiAgICAgICAgICAgICAgICBcImlkXCI6IGlkLFxuICAgICAgICAgICAgICAgIFwibmFtZVwiOiAncHJpbycsXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiB2YWx1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IobGV0IGF0dHIgaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyaWJ1dGVzW2F0dHJdKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgaWQpO1xuICAgICAgICAgICAgbGFiZWwuY2xhc3NMaXN0LmFkZChpZCk7XG4gICAgICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IHZhbHVlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByYWRpb09wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICByYWRpb09wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgICAgICByZXR1cm4gcmFkaW9PcHRpb25Db250YWluZXI7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgYWRkVGV4dEFyZWEgPSAobGFiZWxOYW1lLCBwbGFjZWhvbGRlciwgaWQsIHJlcXVpcmVkPXRydWUpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb25zdCBpbnB1dExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgaW5wdXRMYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIGlkKTtcbiAgICAgICAgaW5wdXRMYWJlbC50ZXh0Q29udGVudCA9IGxhYmVsTmFtZTtcblxuICAgICAgICBjb25zdCBpbnB1dFRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHtcbiAgICAgICAgICAgICdpZCc6IGlkLFxuICAgICAgICAgICAgJ25hbWUnOiBpZCxcbiAgICAgICAgICAgICdwbGFjZWhvbGRlcic6IHBsYWNlaG9sZGVyLFxuICAgICAgICAgICAgJ3Jvd3MnOiA2LFxuICAgICAgICAgICAgJ2NvbHMnOiA1MCxcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IobGV0IGF0dHJJZHggaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgaW5wdXRUZXh0QXJlYS5zZXRBdHRyaWJ1dGUoYXR0cklkeCwgYXR0cmlidXRlc1thdHRySWR4XSlcbiAgICAgICAgfVxuICAgICAgICBpbnB1dFRleHRBcmVhLnJlcXVpcmVkID0gcmVxdWlyZWQ7IC8vIERlZmF1bHQgVHJ1ZVxuXG4gICAgICAgIGlucHV0LmFwcGVuZENoaWxkKGlucHV0TGFiZWwpO1xuICAgICAgICBpbnB1dC5hcHBlbmRDaGlsZChpbnB1dFRleHRBcmVhKTtcbiAgICAgICAgcmV0dXJuIGlucHV0XG4gICAgfVxuXG4gICAgY29uc3QgYWRkSW5wdXRUZXh0ID0gKGxhYmVsTmFtZSwgcGxhY2Vob2xkZXIsIGlkLCByZXF1aXJlZD10cnVlKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgY29uc3QgaW5wdXRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgIGlucHV0TGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCBpZCk7XG4gICAgICAgIGlucHV0TGFiZWwudGV4dENvbnRlbnQgPSBsYWJlbE5hbWU7XG5cbiAgICAgICAgY29uc3QgaW5wdXRUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHtcbiAgICAgICAgICAgICd0eXBlJzogJ3RleHQnLFxuICAgICAgICAgICAgJ2lkJzogaWQsXG4gICAgICAgICAgICAnbmFtZSc6IGlkLFxuICAgICAgICAgICAgJ3BsYWNlaG9sZGVyJzogcGxhY2Vob2xkZXJcbiAgICAgICAgfTtcbiAgICAgICAgZm9yKGxldCBhdHRySWR4IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGlucHV0VGV4dC5zZXRBdHRyaWJ1dGUoYXR0cklkeCwgYXR0cmlidXRlc1thdHRySWR4XSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlucHV0VGV4dC5yZXF1aXJlZCA9IHJlcXVpcmVkOyBcblxuICAgICAgICBpbnB1dC5hcHBlbmRDaGlsZChpbnB1dExhYmVsKTtcbiAgICAgICAgaW5wdXQuYXBwZW5kQ2hpbGQoaW5wdXRUZXh0KTtcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgICByZXR1cm4geyBhZGRUYXNrLCBjbGVhciwgY29sbGVjdFRhc2tJbmZvIH07XG5cblxufSJdLCJuYW1lcyI6WyJUYXNrIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJpZCIsInRoaXMiLCJ2YWx1ZSIsIl9uYW1lIiwiX2lkIiwiX3ByaW9yaXR5IiwiX2Rlc2NyaXB0aW9uIiwiX2R1ZURhdGUiLCJkdWVEYXRlRm9ybWF0dGVkIiwic3BsaXQiLCJQcm9qZWN0IiwidGFza3MiLCJfdGFza3MiLCJhZGRUYXNrIiwidGFzayIsInB1c2giLCJkZWxldGVUYXNrIiwidGFza0lkIiwiZmlsdGVyIiwicmVJbml0aWFsaXNlSWQiLCJuZXdJZCIsImxlbmd0aCIsIkFsbFByb2plY3RzIiwicHJvamVjdHMiLCJfcHJvamVjdHMiLCJjb250YWlucyIsInByb2plY3ROYW1lIiwic29tZSIsInByb2plY3QiLCJnZXRQcm9qZWN0IiwiZmluZCIsImFkZFByb2plY3QiLCJuZXdQcm9qZWN0TmFtZSIsImRlbGV0ZVByb2plY3QiLCJwcm9qZWN0VG9EZWxldGUiLCJzcGxpY2UiLCJpbmRleE9mIiwiVGFza1VJIiwidGFza09iaiIsInJlbmRlckluZm8iLCJlbGVtIiwiYWRkZWRDbGFzcyIsInRleHQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsImNyZWF0ZUVsZW1lbnRzIiwidGFza0NvbnRhaW5lciIsInN0YXR1c0NoZWNrIiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidGFyZ2V0IiwiY2hlY2tlZCIsInN0eWxlIiwib3BhY2l0eSIsImRldGFpbHNCdG4iLCJwcmlvcml0eUljb24iLCJhcHBlbmRDaGlsZCIsImRhdGUiLCJlZGl0IiwiZWRpdEljb24iLCJ0YXNrRGVsIiwiZGVsSWNvbiIsImRyYXciLCJlbGVtcyIsIlByb2plY3RVSSIsInByb2plY3RPYmoiLCJtYWluQ29udGVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGVhciIsImRyYXdUYXNrcyIsImFkZFRhc2tPcHRpb24iLCJhZGRUYXNrQ29udGFpbmVyIiwiYWRkVGFza0J0biIsImNvbnRhaW5lciIsInRhc2tEaXNwbGF5IiwiY29udGVudCIsImlubmVySFRNTCIsImNvbXBsZXRlVGFzayIsImdldEVsZW1lbnRCeUlkIiwidG9Eb0xpc3QiLCJjdXJyZW50UHJvamVjdFBhZ2UiLCJjdXJyZW50Rm9ybSIsImZvcm1Db250YWluZXIiLCJhZGRDbG9zZUZvcm1GdW5jdGlvbiIsImNsb3NlRm9ybSIsInNyYyIsImFsdCIsImZvcm0iLCJvdmVybGF5IiwidmlzaWJpbGl0eSIsImFkZElucHV0RHVlRGF0ZSIsImRhdGVMYWJlbCIsImlucHV0RHVlRGF0ZSIsImFkZFByaW9yaXR5T3B0aW9ucyIsImlucHV0UHJpb1dyYXBwZXIiLCJsYWJlbCIsInByaW9PcHRpb25zQ29udGFpbmVyIiwibG93UHJpbyIsImNyZWF0ZVJhZGlvSW5wdXRBbmRMYWJlbCIsIm1lZFByaW8iLCJoaWdoUHJpbyIsInByaW9PcHRpb25zIiwicmFkaW9PcHRpb25Db250YWluZXIiLCJpbnB1dCIsImF0dHJpYnV0ZXMiLCJhdHRyIiwidGFza1RpdGxlIiwibGFiZWxOYW1lIiwicGxhY2Vob2xkZXIiLCJyZXF1aXJlZCIsImlucHV0TGFiZWwiLCJpbnB1dFRleHQiLCJhdHRySWR4IiwiYWRkSW5wdXRUZXh0IiwidGFza0RldGFpbHMiLCJpbnB1dFRleHRBcmVhIiwiYWRkVGV4dEFyZWEiLCJ0YXNrc0luZm8iLCJpbmZvIiwiYXBwZW5kVGFza0J0biIsImFkZEFwcGVuZFRhc2tCdG4iLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJsYXN0Q2hpbGQiLCJjb2xsZWN0VGFza0luZm8iLCJwcmlvQ2hvc2VuIiwiRHJhd0Zvcm0iLCJsb2FkSG9tZVBhZ2UiLCJhZGROZXdUYXNrIiwidGl0bGUiLCJkZXRhaWxzIiwibG9hZFNpZGVCYXIiLCJsb2FkUGFnZSIsImRyYXdQYWdlIiwiYWRkVGFza0Z1bmN0aW9uIiwiYXBwbHlEZWxUYXNrRnVuY3Rpb24iLCJ2YWx1ZUFzRGF0ZSIsIkRhdGUiLCJzdWJtaXRUYXNrRnVuY3Rpb24iLCJ0YXNrSW5mbyIsImJ0biIsImNoZWNrVmFsaWRpdHkiLCJwcmV2ZW50RGVmYXVsdCIsInJlbW92ZVRhc2tGdW5jdGlvbiIsIm1hcCIsImFkZFNsaWRlSW5PdXQiLCJkcmF3SW5ib3hUYWJzIiwiZHJhd1Byb2plY3RUYWJzIiwiaW5ib3hUYWJzIiwiYWRkVGFiIiwiaW5ib3hCYXIiLCJhZGREcm9wRG93bk1lbnUiLCJpbmJveFByb2plY3RzIiwiY3VzdG9tUHJvamVjdHMiLCJpbmNsdWRlcyIsInByb2plY3RUYWJzIiwicHJvamVjdEJhciIsIm1lbnVCYXIiLCJ0YWJzIiwiZGlzcGxheSIsIm1lbnVUYWIiLCJ0YWIiLCJzaWRlQmFyIiwid2lkdGgiXSwic291cmNlUm9vdCI6IiJ9