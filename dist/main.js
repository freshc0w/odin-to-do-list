(()=>{"use strict";class t{constructor(t,e,s,i,n){this.name=t,this.description=e,this.dueDate=s,this.priority=i,this.id=n}set name(t){this._name=t}get name(){return this._name}get id(){return this._id}set id(t){this._id=t}get priority(){return this._priority}set priority(t){this._priority=t}get description(){return this._description}set description(t){this._description=t}get dueDate(){return this._dueDate}set dueDate(t){this._dueDate=t}get dueDateFormatted(){return`${this.dueDate.split("-")[0]}/${this.dueDate.split("-")[1]}/${this.dueDate.split("-")[2]}`}}class e{constructor(t){this.name=t,this.tasks=[]}get name(){return this._name}set name(t){this._name=t}get tasks(){return this._tasks}set tasks(t){this._tasks=t}addTask(t){this._tasks.push(t)}deleteTask(t){this._tasks=this._tasks.filter((e=>e.id!==t))}}class s{constructor(){this.projects=[],this.projects.push(new e("Inbox")),this.projects.push(new e("Today")),this.projects.push(new e("This Week")),this.projects.push(new e("React"))}get projects(){return this._projects}set projects(t){this._projects=t}contains(t){return this.projects.some((e=>e.name===t))}getProject(t){return this.projects.find((e=>e.name===t))}addProject(t){this.contains(t)||this.projects.push(new e(t))}deleteProject(t){const e=this.projects.find((e=>e.name===t));this.projects.splice(this.projects.indexOf(e),1)}}class i{constructor(t){this.task=t}renderInfo(t,e,s=""){const i=document.createElement(t);return i.classList.add(e),i.textContent=s,i}createElements(t){const e=this.renderInfo("input","statusCheck");e.setAttribute("type","checkbox"),e.setAttribute("id","statusCheck"),e.addEventListener("change",(e=>{e.target.checked?t.style.opacity="40%":t.style.opacity="100%"}));const s=this.renderInfo("div","taskName",this.task.name),i=this.renderInfo("button","uniqueBtn","Details");i.classList.add("details");const n=this.renderInfo("div","statusPrio"),a=this.renderInfo("i","material-icons","warning");a.classList.add(this.task.priority),n.appendChild(a);const d=this.renderInfo("div","taskDate",this.task.dueDateFormatted),o=this.renderInfo("div","taskEdit"),r=this.renderInfo("i","material-icons","edit");o.appendChild(r);const c=this.renderInfo("div","taskDel"),l=this.renderInfo("i","material-icons","delete");return l.setAttribute("id",`delTask-${this.task.id}`),c.appendChild(l),[e,s,i,n,d,o,c]}draw(){const t=this.renderInfo("div","task-container"),e=this.createElements(t);for(let s of e)t.appendChild(s);return t}}class n{constructor(t){this.project=t}draw(){const t=document.querySelector("#main-content");this.clear(t),this.drawTasks(t,this.project.tasks);const e=this.addTaskOption();t.appendChild(e)}addTaskOption(){const t=document.createElement("div");t.classList.add("task-container"),t.classList.add("add");const e=document.createElement("button");return e.classList.add("uniqueBtn"),e.classList.add("add"),e.textContent="ADD",t.appendChild(e),t}drawTasks(t,e){for(let s of e){const e=new i(s);t.appendChild(e.draw())}}clear(t){t.innerHTML=""}completeTask(){document.getElementById()}}(new class{constructor(){this.toDoList=new s,this.currentProjectPage="Inbox",this.currentForm=(()=>{const t=document.querySelector(".form-container"),e=()=>{const t=document.createElement("img");return t.classList.add("closeFormBtn"),t.src="../../../imgs/mac-close-btn.png",t.alt="A button that closes the form.",t.addEventListener("click",(()=>{const t=document.querySelector("form"),e=document.querySelector(".face-mask");t.style.visibility="hidden",e.style.visibility="hidden"})),t},s=()=>{const t=document.createElement("div"),e=document.createElement("label");e.classList.add("dateLabel"),e.setAttribute("for","inputDueDate"),e.textContent="Due Date:";const s=document.createElement("input");return s.setAttribute("type","date"),s.setAttribute("id","inputDueDate"),s.setAttribute("name","trip-start"),t.appendChild(e),t.appendChild(s),t},i=()=>{const t=document.createElement("div"),e=document.createElement("div"),s=document.createElement("div");t.classList.add("prioWrapper"),s.classList.add("prioOptions"),e.classList.add("prioLabel"),e.textContent="How important is this task?";const i=d("lowPrio","low"),n=d("medPrio","medium"),a=d("highPrio","high");for(let t of[i,n,a])s.appendChild(t);return t.appendChild(e),t.appendChild(s),t;function d(t,e){const s=document.createElement("div"),i=document.createElement("input"),n={type:"radio",id:t,name:"prio",value:e};for(let t in n)i.setAttribute(t,n[t]);const a=document.createElement("label");return a.setAttribute("for",t),a.classList.add(t),a.textContent=e,s.appendChild(i),s.appendChild(a),s}};return{addTask:()=>{const n=((t,e,s,i=!0)=>{const n=document.createElement("div"),a=document.createElement("label");a.setAttribute("for",s),a.textContent=t;const d=document.createElement("input"),o={type:"text",id:s,name:s,placeholder:e};for(let t in o)d.setAttribute(t,o[t]);return d.required=i,n.appendChild(a),n.appendChild(d),n})("Task Title: ","e.g. Learn React in 20 days..","inputTaskTitle");n.classList.add("inputTaskTitle");const a=((t,e,s,i=!0)=>{const n=document.createElement("div"),a=document.createElement("label");a.setAttribute("for",s),a.textContent=t;const d=document.createElement("textarea"),o={id:s,name:s,placeholder:e,rows:6,cols:50};for(let t in o)d.setAttribute(t,o[t]);return d.required=i,n.appendChild(a),n.appendChild(d),n})("Task Details: ","e.g. Not an task. Remember to take breaks and walk outside.","inputTaskDetails");a.classList.add("inputTaskDetails");const d=[n,a,i(),s(),e()];for(let e of d)t.appendChild(e);const o=(()=>{const t=document.createElement("button");return t.classList.add("uniqueBtn"),t.classList.add("appendTaskBtn"),t.textContent="Add Task",t.setAttribute("type","submit"),t})();t.appendChild(o)},clear:()=>{for(;t.firstChild;)t.removeChild(t.lastChild)},collectTaskInfo:()=>{const t=document.getElementById("inputTaskTitle"),e=document.getElementById("inputTaskDetails"),s=document.querySelector('input[name="prio"]:checked'),i=document.querySelector("#inputDueDate");return{title:t.value,details:e.value,priority:s.value,date:i.value}}}})()}loadHomePage(){this.toDoList.getProject("Inbox").addTask(new t("Walking the dog","He is asking for it so this task is a must","25-02-2002","medium",this.toDoList.getProject("Inbox").tasks.length)),this.addNewTask(this.currentProjectPage,{title:"Walking the dog",details:"He is asking for it so this task is a must",priority:"medium",date:"25-02-2002"}),this.loadSideBar()}drawPage(t){new n(this.toDoList.getProject(t)).draw(),this.addTaskFunction(t)}addTaskFunction(t){document.querySelector(".uniqueBtn.add").addEventListener("click",(()=>{this.currentForm.clear(),this.currentForm.addTask(),document.querySelector("form").style.visibility="visible",document.querySelector(".face-mask").style.visibility="visible",inputDueDate.valueAsDate=new Date;const e=document.querySelector(".uniqueBtn.appendTaskBtn");this.submitTaskFunction(e,t)}))}addNewTask(e,s){this.toDoList.getProject(e).addTask(new t(s.title,s.details,s.date,s.priority,this.toDoList.getProject(e).tasks.length));const i=this.toDoList.getProject(e).tasks.length-1;this.drawPage(e),this.addDeleteTaskFunction(e,i)}submitTaskFunction(t,e){t.addEventListener("click",(t=>{const s=this.currentForm.collectTaskInfo();this.addNewTask(e,s),document.querySelector("form").style.visibility="hidden",document.querySelector(".face-mask").style.visibility="hidden",t.preventDefault()}))}addDeleteTaskFunction(t,e){document.getElementById(`delTask-${e}`).addEventListener("click",(()=>{this.toDoList.getProject(t).deleteTask(e),this.drawPage(t)}))}loadSideBar(){this.addSlideInOut(),this.drawInboxTabs(),this.drawProjectTabs()}drawInboxTabs(){const t=document.createElement("ul");this.addTab(t,"Today"),this.addTab(t,"This Week");const e=document.querySelector(".inbox-bar");e.appendChild(t),this.addDropDownMenu(e,t)}drawProjectTabs(){const t=["Inbox","Today","This Week"],e=this.toDoList.projects.filter((e=>!t.includes(e.name))),s=document.createElement("ul");for(let t of e)this.addTab(s,t.name);const i=document.querySelector(".project-bar");i.appendChild(s),this.addDropDownMenu(i,s)}addDropDownMenu(t,e){t.addEventListener("mouseover",(()=>{e.style.display="block"})),t.addEventListener("mouseout",(()=>{e.style.display="none"}))}addTab(t,e){const s=document.createElement("li");s.textContent=this.toDoList.getProject(e).name,t.appendChild(s)}addSlideInOut(){const t=document.getElementById("sideBar");document.querySelectorAll(".material-icons"),document.querySelectorAll(".icon-text"),t.addEventListener("mouseover",(()=>{t.style.width="200px"})),t.addEventListener("mouseout",(()=>{t.style.width="65px"}))}}).loadHomePage()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TXVJLEVBQU10SCxTQUFTQyxjQUFjLE1BRW5DcUgsRUFBSWxILFlBQWMzQyxLQUFLK0UsU0FBU3RELFdBQVdILEdBQWEzQixLQUN4RGlLLEVBQVFwRyxZQUFZcUcsRUFDckIsQ0FFQWhCLGdCQUNDLE1BQU1pQixFQUFVdkgsU0FBU3VDLGVBQWUsV0FDbEJ2QyxTQUFTd0gsaUJBQWlCLG1CQUMvQnhILFNBQVN3SCxpQkFBaUIsY0FDM0NELEVBQVE5RyxpQkFBaUIsYUFBYSxLQUNyQzhHLEVBQVExRyxNQUFNNEcsTUFBUSxPQUFPLElBRTlCRixFQUFROUcsaUJBQWlCLFlBQVksS0FDcEM4RyxFQUFRMUcsTUFBTTRHLE1BQVEsTUFBTSxHQUU5QixJRDFLYWpDLGMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGluLXRvLWRvLWxpc3QvLi9zcmMvbW9kdWxlcy90YXNrLmpzIiwid2VicGFjazovL29kaW4tdG8tZG8tbGlzdC8uL3NyYy9tb2R1bGVzL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby1saXN0Ly4vc3JjL21vZHVsZXMvQWxsUHJvamVjdHMuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby1saXN0Ly4vc3JjL21vZHVsZXMvVUkvUHJvamVjdFVJLmpzIiwid2VicGFjazovL29kaW4tdG8tZG8tbGlzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvLWRvLWxpc3QvLi9zcmMvbW9kdWxlcy9VSS5qcyIsIndlYnBhY2s6Ly9vZGluLXRvLWRvLWxpc3QvLi9zcmMvbW9kdWxlcy9VSS9mb3JtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2sge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgaWQpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIHRoaXMuaWQgPSBpZDsgLy8gVG8gYWxsb3cgZGVsZXRpb24gb2YgdGFzayB3aXRoIHRoZSBzYW1lIG5hbWU7XG4gICAgICAgIFxuICAgIH1cbiAgICBzZXQgbmFtZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9uYW1lID0gdmFsdWU7XG4gICAgfTtcblxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICB9O1xuICAgIFxuICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkO1xuICAgIH07XG4gICAgc2V0IGlkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2lkID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBwcmlvcml0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByaW9yaXR5O1xuICAgIH1cbiAgICBzZXQgcHJpb3JpdHkodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcHJpb3JpdHkgPSB2YWx1ZTtcbiAgICB9XG4gICAgXG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247XG4gICAgfTtcbiAgICBzZXQgZGVzY3JpcHRpb24odmFsdWUpIHtcbiAgICAgICAgdGhpcy5fZGVzY3JpcHRpb24gPSB2YWx1ZTtcbiAgICB9O1xuXG4gICAgZ2V0IGR1ZURhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kdWVEYXRlO1xuICAgIH07XG4gICAgc2V0IGR1ZURhdGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fZHVlRGF0ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgZHVlRGF0ZUZvcm1hdHRlZCgpIHtcbiAgICAgICAgY29uc3QgZGF5ID0gdGhpcy5kdWVEYXRlLnNwbGl0KCctJylbMF07XG4gICAgICAgIGNvbnN0IG1vbnRoID0gdGhpcy5kdWVEYXRlLnNwbGl0KCctJylbMV07XG4gICAgICAgIGNvbnN0IHllYXIgPSB0aGlzLmR1ZURhdGUuc3BsaXQoJy0nKVsyXTtcblxuICAgICAgICByZXR1cm4gYCR7ZGF5fS8ke21vbnRofS8ke3llYXJ9YDtcbiAgICB9O1xufTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9qZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMudGFza3MgPSBbXTtcbiAgICB9O1xuICAgIFxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICB9O1xuICAgIHNldCBuYW1lKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSB2YWx1ZTtcbiAgICB9O1xuICAgIGdldCB0YXNrcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tzO1xuICAgIH07XG4gICAgc2V0IHRhc2tzKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3Rhc2tzID0gdmFsdWU7XG4gICAgfVxuICAgIGFkZFRhc2sodGFzaykge1xuICAgICAgICB0aGlzLl90YXNrcy5wdXNoKHRhc2spOyAgICAgICAgXG4gICAgfTtcbiAgICBkZWxldGVUYXNrKHRhc2tJZCkge1xuICAgICAgICB0aGlzLl90YXNrcyA9IHRoaXMuX3Rhc2tzLmZpbHRlcih0YXNrID0+IHRhc2suaWQgIT09IHRhc2tJZCk7XG4gICAgfTtcblxuICAgIC8vIFRvIGJlIGFkZGVkOiBHZXQgdG9kYXkncyBhbmQgdGhpcyB3ZWVrJ3MgdGFza3MuIFxufTsiLCJpbXBvcnQgVGFzayBmcm9tIFwiLi90YXNrXCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFsbFByb2plY3RzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0cyA9IFtdO1xuICAgICAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QoJ0luYm94JykpO1xuICAgICAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QoJ1RvZGF5JykpO1xuICAgICAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QoJ1RoaXMgV2VlaycpKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0cy5wdXNoKG5ldyBQcm9qZWN0KCdSZWFjdCcpKTtcbiAgICB9O1xuXG4gICAgZ2V0IHByb2plY3RzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJvamVjdHM7XG4gICAgfTtcbiAgICBzZXQgcHJvamVjdHModmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcHJvamVjdHMgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBwcm9qZWN0IG5hbWUgZXhpc3RzIGluIGxpc3Qgb2YgcHJvamVjdHMuXG4gICAgY29udGFpbnMocHJvamVjdE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdHMuc29tZShwcm9qZWN0ID0+IHByb2plY3QubmFtZSA9PT0gcHJvamVjdE5hbWUpO1xuICAgIH07XG5cbiAgICBnZXRQcm9qZWN0KHByb2plY3ROYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3RzLmZpbmQocHJvamVjdCA9PiBwcm9qZWN0Lm5hbWUgPT09IHByb2plY3ROYW1lKTtcbiAgICB9O1xuXG4gICAgYWRkUHJvamVjdChuZXdQcm9qZWN0TmFtZSkge1xuICAgICAgICAvLyBDYW5ub3QgaGF2ZSBzYW1lIHByb2plY3QgbmFtZXMuXG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5zKG5ld1Byb2plY3ROYW1lKSkgcmV0dXJuO1xuICAgICAgICB0aGlzLnByb2plY3RzLnB1c2gobmV3IFByb2plY3QobmV3UHJvamVjdE5hbWUpKTtcbiAgICB9O1xuXG4gICAgZGVsZXRlUHJvamVjdChwcm9qZWN0TmFtZSkge1xuICAgICAgICBjb25zdCBwcm9qZWN0VG9EZWxldGUgPSB0aGlzLnByb2plY3RzLmZpbmQocHJvamVjdCA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdC5uYW1lID09PSBwcm9qZWN0TmFtZSk7XG4gICAgICAgIHRoaXMucHJvamVjdHMuc3BsaWNlKHRoaXMucHJvamVjdHMuaW5kZXhPZihwcm9qZWN0VG9EZWxldGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxKVxuICAgIH07XG4gICAgXG5cbiAgICAvLyBDYW4gYWRkIHRvZGF5J3MgYW5kIHRoaXMgd2VlaydzIGZ1bmN0aW9uYWxpdHkuXG59OyIsImltcG9ydCBUYXNrIGZyb20gXCIuLi90YXNrXCI7XG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi4vcHJvamVjdFwiO1xuXG5jbGFzcyBUYXNrVUkge1xuXHQvLyBQdXJwb3NlIG9mIHRoaXMgY2xhc3MgaXQgdG8gdGFrZSBpbiBhIHRhc2sgb2JqLCBhbmQgdHVybiBpdCBpbnRvXG5cdC8vIGEgZGl2IHdpdGggYWxsIHJlbGV2YW50IGluZm9ybWF0aW9uIHJlZ2FyZGluZyB0aGUgdGFzay5cblx0Ly8gRnJvbSBsZWZ0LXRvLXJpZ2h0OiBbY2hlY2tCb3gsIG5hbWUsIGRldGFpbHMsIHByaW9yaXR5LCBkYXRlLCBlZGl0SWNvbiwgYmluSWNvbl1cblx0Y29uc3RydWN0b3IodGFza09iaikge1xuXHRcdHRoaXMudGFzayA9IHRhc2tPYmo7XG5cdH1cblx0cmVuZGVySW5mbyhlbGVtLCBhZGRlZENsYXNzLCB0ZXh0ID0gXCJcIikge1xuXHRcdGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW0pO1xuXHRcdG5hbWUuY2xhc3NMaXN0LmFkZChhZGRlZENsYXNzKTtcblx0XHRuYW1lLnRleHRDb250ZW50ID0gdGV4dDsgLy8gZGVmYXVsdCBlbXB0eSBzdHJcblxuXHRcdHJldHVybiBuYW1lO1xuXHR9XG5cdGNyZWF0ZUVsZW1lbnRzKHRhc2tDb250YWluZXIpIHtcblx0XHRjb25zdCBzdGF0dXNDaGVjayA9IHRoaXMucmVuZGVySW5mbyhcImlucHV0XCIsIFwic3RhdHVzQ2hlY2tcIik7XG5cdFx0c3RhdHVzQ2hlY2suc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpO1xuXHRcdHN0YXR1c0NoZWNrLnNldEF0dHJpYnV0ZShcImlkXCIsIFwic3RhdHVzQ2hlY2tcIik7XG5cdFx0c3RhdHVzQ2hlY2suYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZXZlbnQpID0+IHtcblx0XHRcdGlmIChldmVudC50YXJnZXQuY2hlY2tlZCkge1xuXHRcdFx0XHR0YXNrQ29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSBcIjQwJVwiO1xuXHRcdFx0XHQvLyB0YXNrQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgwLjk4NSknO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGFza0NvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gXCIxMDAlXCI7XG5cdFx0XHRcdC8vIHRhc2tDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEpJztcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGNvbnN0IG5hbWUgPSB0aGlzLnJlbmRlckluZm8oXCJkaXZcIiwgXCJ0YXNrTmFtZVwiLCB0aGlzLnRhc2submFtZSk7XG5cblx0XHQvLyBXaGVuIGNsaWNrZWQsIHBvcCB1cCBhIGZvcm0gd2hlcmUgdGhlIGRldGFpbHMgb2YgdGhlIHRhc2sgaXMgZGlzcGxheWVkLlxuXHRcdGNvbnN0IGRldGFpbHNCdG4gPSB0aGlzLnJlbmRlckluZm8oXCJidXR0b25cIiwgXCJ1bmlxdWVCdG5cIiwgXCJEZXRhaWxzXCIpO1xuXHRcdGRldGFpbHNCdG4uY2xhc3NMaXN0LmFkZChcImRldGFpbHNcIik7XG5cblx0XHQvLyBQcmlvcml0eSBpY29uXG5cdFx0Y29uc3QgcHJpb3JpdHkgPSB0aGlzLnJlbmRlckluZm8oXCJkaXZcIiwgXCJzdGF0dXNQcmlvXCIpO1xuXHRcdGNvbnN0IHByaW9yaXR5SWNvbiA9IHRoaXMucmVuZGVySW5mbyhcImlcIiwgXCJtYXRlcmlhbC1pY29uc1wiLCBcIndhcm5pbmdcIik7XG5cblx0XHQvLyBDaGFuZ2UgY29sb3IgYmFzZWQgb24gcHJpb3JpdHkgb2YgdGFzayAtPiBbJ2hpZ2gnLCAnbWVkaXVtJywgJ2xvdyddXG5cdFx0cHJpb3JpdHlJY29uLmNsYXNzTGlzdC5hZGQodGhpcy50YXNrLnByaW9yaXR5KTtcblx0XHRwcmlvcml0eS5hcHBlbmRDaGlsZChwcmlvcml0eUljb24pO1xuXG5cdFx0Ly8gSnVzdCBhIG1vY2sgZGF0ZSBmb3Igbm93LiBTdWJqZWN0IHRvIGNoYW5nZSBiYXNlZCBvbiB1c2VyIGlucHV0LlxuXHRcdC8vIGNvbnN0IHRpbWVFbGFwc2VkID0gRGF0ZS5ub3coKTtcblx0XHQvLyBjb25zdCB0b2RheSA9IG5ldyBEYXRlKHRpbWVFbGFwc2VkKTtcblx0XHQvLyBjb25zdCBkYXRlID0gdGhpcy5yZW5kZXJJbmZvKFxuXHRcdC8vIFx0XCJkaXZcIixcblx0XHQvLyBcdFwidGFza0RhdGVcIixcblx0XHQvLyBcdGAke3RvZGF5LnRvTG9jYWxlRGF0ZVN0cmluZygpfWBcblx0XHQvLyApO1xuXG5cdFx0Y29uc3QgZGF0ZSA9IHRoaXMucmVuZGVySW5mbyhcblx0XHRcdFwiZGl2XCIsXG5cdFx0XHRcInRhc2tEYXRlXCIsXG5cdFx0XHR0aGlzLnRhc2suZHVlRGF0ZUZvcm1hdHRlZFxuXHRcdClcblxuXHRcdC8vIGljb25zXG5cdFx0Y29uc3QgZWRpdCA9IHRoaXMucmVuZGVySW5mbyhcImRpdlwiLCBcInRhc2tFZGl0XCIpO1xuXHRcdGNvbnN0IGVkaXRJY29uID0gdGhpcy5yZW5kZXJJbmZvKFwiaVwiLCBcIm1hdGVyaWFsLWljb25zXCIsIFwiZWRpdFwiKTtcblx0XHRlZGl0LmFwcGVuZENoaWxkKGVkaXRJY29uKTtcblxuXHRcdGNvbnN0IHRhc2tEZWwgPSB0aGlzLnJlbmRlckluZm8oXCJkaXZcIiwgXCJ0YXNrRGVsXCIpO1xuXHRcdGNvbnN0IGRlbEljb24gPSB0aGlzLnJlbmRlckluZm8oXCJpXCIsIFwibWF0ZXJpYWwtaWNvbnNcIiwgXCJkZWxldGVcIik7XG5cdFx0XHRcblx0XHQvLyBBZGQgdW5pcXVlIGlkIGlkZW50aWZlciBiYXNlZCBvbiB0YXNrIGlkIGZvciBiaW4gaWNvbi5cblx0XHRkZWxJY29uLnNldEF0dHJpYnV0ZShcImlkXCIsIGBkZWxUYXNrLSR7dGhpcy50YXNrLmlkfWApXG5cblx0XHQvLyBDcmVhdGUgRGF0YXNldD8/XG5cdFx0Ly8gZGVsSWNvbi5kYXRhc2V0LmlkID0gdGhpcy50YXNrLmlkO1xuXG5cdFx0dGFza0RlbC5hcHBlbmRDaGlsZChkZWxJY29uKTtcblxuXHRcdHJldHVybiBbc3RhdHVzQ2hlY2ssIG5hbWUsIGRldGFpbHNCdG4sIHByaW9yaXR5LCBkYXRlLCBlZGl0LCB0YXNrRGVsXTtcblx0fVxuXHRkcmF3KCkge1xuXHRcdGNvbnN0IHRhc2tDb250YWluZXIgPSB0aGlzLnJlbmRlckluZm8oXCJkaXZcIiwgXCJ0YXNrLWNvbnRhaW5lclwiKTtcblx0XHRjb25zdCBlbGVtcyA9IHRoaXMuY3JlYXRlRWxlbWVudHModGFza0NvbnRhaW5lcik7XG5cdFx0Zm9yIChsZXQgZWxlbSBvZiBlbGVtcykge1xuXHRcdFx0dGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRhc2tDb250YWluZXI7XG5cdH1cbn1cblxuY2xhc3MgUHJvamVjdFVJIHtcblx0Y29uc3RydWN0b3IocHJvamVjdE9iaikge1xuXHRcdHRoaXMucHJvamVjdCA9IHByb2plY3RPYmo7XG5cdH1cblx0ZHJhdygpIHtcblx0XHRjb25zdCBtYWluQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpbi1jb250ZW50XCIpO1xuXHRcdHRoaXMuY2xlYXIobWFpbkNvbnRlbnQpO1xuXG5cdFx0Ly8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgdGFza3MgYW5kIGdpdmUgaXQgYSBUYXNrVUkgY2xhc3MuXG5cdFx0Ly8gVXNlIHRoZSBkcmF3IG1ldGhvZCB0byBnZXQgdGhlIGRpdiBjb250YWluZXIgYW5kIGFwcGVuZCBpdCB0b1xuICAgICAgICAvLyBtYWluQ29udGVudCBjb250YWluZXIuXG5cdFx0dGhpcy5kcmF3VGFza3MobWFpbkNvbnRlbnQsIHRoaXMucHJvamVjdC50YXNrcyk7XG5cbiAgICAgICAgY29uc3QgYWRkVGFza09wdGlvbiA9IHRoaXMuYWRkVGFza09wdGlvbigpO1xuXHRcdG1haW5Db250ZW50LmFwcGVuZENoaWxkKGFkZFRhc2tPcHRpb24pO1xuXHR9XG4gICAgYWRkVGFza09wdGlvbigpIHtcbiAgICAgICAgLy8gRHJhdyBhbiBhZGQgdGFzayBvcHRpb24gYmVuZWF0aCBhbGwgdGFza3NcbiAgICAgICAgY29uc3QgYWRkVGFza0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGFkZFRhc2tDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRhc2stY29udGFpbmVyXCIpO1xuICAgICAgICBhZGRUYXNrQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJhZGRcIik7XG4gICAgXG4gICAgICAgIGNvbnN0IGFkZFRhc2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICBhZGRUYXNrQnRuLmNsYXNzTGlzdC5hZGQoXCJ1bmlxdWVCdG5cIik7XG4gICAgICAgIGFkZFRhc2tCdG4uY2xhc3NMaXN0LmFkZChcImFkZFwiKTtcbiAgICAgICAgYWRkVGFza0J0bi50ZXh0Q29udGVudCA9IFwiQUREXCI7XG4gICAgXG4gICAgICAgIGFkZFRhc2tDb250YWluZXIuYXBwZW5kQ2hpbGQoYWRkVGFza0J0bik7XG4gICAgICAgIHJldHVybiBhZGRUYXNrQ29udGFpbmVyXG4gICAgICAgIFxuICAgIH1cblx0ZHJhd1Rhc2tzKGNvbnRhaW5lciwgdGFza3MpIHtcbiAgICAgICAgZm9yIChsZXQgdGFzayBvZiB0YXNrcykge1xuICAgICAgICAgICAgY29uc3QgdGFza0Rpc3BsYXkgPSBuZXcgVGFza1VJKHRhc2spO1xuXHRcdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tEaXNwbGF5LmRyYXcoKSk7XG5cdFx0fVxuXHR9XG5cblx0Y2xlYXIoY29udGVudCkge1xuXHRcdGNvbnRlbnQuaW5uZXJIVE1MID0gXCJcIjtcblx0fVxuXG5cdGNvbXBsZXRlVGFzaygpIHtcblx0XHQvLyBNYWtlIHRhc2sgY29udGFpbmVyIHRyYW5zcGFyZW50IGFmdGVyIGNvbXBsZXRpbmcgdGFzay5cblx0XHRjb25zdCBjaGVja0JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCk7XG5cdH1cbn1cblxuZXhwb3J0IHsgVGFza1VJLCBQcm9qZWN0VUkgfTtcbiIsImltcG9ydCBVSSBmcm9tICcuL21vZHVsZXMvVUknO1xuY29uc3QgVXNlckludGVyZmFjZSA9IG5ldyBVSSgpO1xuXG5Vc2VySW50ZXJmYWNlLmxvYWRIb21lUGFnZSgpOyIsImltcG9ydCBUYXNrIGZyb20gXCIuL3Rhc2tcIjtcbmltcG9ydCBQcm9qZWN0IGZyb20gXCIuL3Byb2plY3RcIjtcbmltcG9ydCBBbGxQcm9qZWN0cyBmcm9tIFwiLi9BbGxQcm9qZWN0c1wiO1xuaW1wb3J0IHsgVGFza1VJLCBQcm9qZWN0VUkgfSBmcm9tIFwiLi9VSS9Qcm9qZWN0VUlcIjtcbmltcG9ydCB7IERyYXdGb3JtIH0gZnJvbSBcIi4vVUkvZm9ybVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSSB7XG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMudG9Eb0xpc3QgPSBuZXcgQWxsUHJvamVjdHMoKTtcblxuXHRcdC8vIEluaXRpYWxpc2UgZmlyc3QgaG9tZVBhZ2UgdG8gYmUgb24gdGhlIFwiSW5ib3hcIiBwYWdlLlxuXHRcdHRoaXMuY3VycmVudFByb2plY3RQYWdlID0gXCJJbmJveFwiO1xuXHRcdHRoaXMuY3VycmVudEZvcm0gPSBEcmF3Rm9ybSgpO1xuXHR9XG5cblx0bG9hZEhvbWVQYWdlKCkge1xuXHRcdC8vIEFkZCBhIHRhc2sgdG8gaW5ib3guXG5cdFx0dGhpcy50b0RvTGlzdFxuXHRcdFx0LmdldFByb2plY3QoXCJJbmJveFwiKVxuXHRcdFx0LmFkZFRhc2soXG5cdFx0XHRcdG5ldyBUYXNrKFxuXHRcdFx0XHRcdFwiV2Fsa2luZyB0aGUgZG9nXCIsXG5cdFx0XHRcdFx0XCJIZSBpcyBhc2tpbmcgZm9yIGl0IHNvIHRoaXMgdGFzayBpcyBhIG11c3RcIixcblx0XHRcdFx0XHRcIjI1LTAyLTIwMDJcIixcblx0XHRcdFx0XHRcIm1lZGl1bVwiLFxuXHRcdFx0XHRcdHRoaXMudG9Eb0xpc3QuZ2V0UHJvamVjdChcIkluYm94XCIpLnRhc2tzLmxlbmd0aFxuXHRcdFx0XHQpXG5cdFx0XHQpO1xuXG4gICAgICAgIC8vIEluaXRpYWxpc2UgZmlyc3QgZHVtbXkgdGFzazpcbiAgICAgICAgY29uc3QgdGFzazEgPSB7XG4gICAgICAgICAgICAndGl0bGUnOiBcIldhbGtpbmcgdGhlIGRvZ1wiLFxuICAgICAgICAgICAgXCJkZXRhaWxzXCI6IFwiSGUgaXMgYXNraW5nIGZvciBpdCBzbyB0aGlzIHRhc2sgaXMgYSBtdXN0XCIsXG4gICAgICAgICAgICBcInByaW9yaXR5XCI6IFwibWVkaXVtXCIsXG4gICAgICAgICAgICBcImRhdGVcIjogXCIyNS0wMi0yMDAyXCIsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkTmV3VGFzayh0aGlzLmN1cnJlbnRQcm9qZWN0UGFnZSwgdGFzazEpO1xuXG5cdFx0Ly8gY29uc3QgcHJvamVjdERpc3BsYXkgPSBuZXcgUHJvamVjdFVJKHRoaXMudG9Eb0xpc3QuZ2V0UHJvamVjdCgnSW5ib3gnKSk7XG5cdFx0Ly8gcHJvamVjdERpc3BsYXkuZHJhdygpO1xuXG5cdFx0Ly8gdGhpcy5kcmF3UGFnZSh0aGlzLmN1cnJlbnRQcm9qZWN0UGFnZSk7XG5cblx0XHR0aGlzLmxvYWRTaWRlQmFyKCk7XG5cdFx0Ly8gdGhpcy5hZGRUYXNrRnVuY3Rpb24oKTtcblx0fVxuXG5cdGRyYXdQYWdlKHByb2plY3ROYW1lKSB7XG5cdFx0Y29uc3QgcHJvamVjdERpc3BsYXkgPSBuZXcgUHJvamVjdFVJKHRoaXMudG9Eb0xpc3QuZ2V0UHJvamVjdChwcm9qZWN0TmFtZSkpO1xuXHRcdHByb2plY3REaXNwbGF5LmRyYXcoKTtcblx0XHR0aGlzLmFkZFRhc2tGdW5jdGlvbihwcm9qZWN0TmFtZSk7IC8vIFJlaW5pdGlhbGlzZSBhZGQgdGFzayBmdW5jdGlvbiBmb3IgbmV3IHBhZ2UncyBidG4uXG5cdH1cblxuXHQvKiBCdXR0b24gZnVuY3Rpb25hbGl0aWVzICovXG5cdGFkZFRhc2tGdW5jdGlvbihwcm9qZWN0TmFtZSkge1xuXHRcdGNvbnN0IGFkZFRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnVuaXF1ZUJ0bi5hZGRcIik7XG5cdFx0YWRkVGFza0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXHRcdFx0dGhpcy5jdXJyZW50Rm9ybS5jbGVhcigpO1xuXHRcdFx0dGhpcy5jdXJyZW50Rm9ybS5hZGRUYXNrKCk7XG5cblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmFjZS1tYXNrXCIpLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblxuXHRcdFx0Ly8gU2V0IGRlZmF1bHQgZGF0ZSBpbnB1dCB0byBjdXJyZW50IGRheS5cblx0XHRcdGlucHV0RHVlRGF0ZS52YWx1ZUFzRGF0ZSA9IG5ldyBEYXRlKCk7XG5cblx0XHRcdC8vIEFkZCBkcmF3IG5ldyB0YXNrIGZ1bmN0aW9uYWxpdHkgdG8gYXBwZW5kVGFza0J0biBvbiB0aGUgZm9ybS5cblx0XHRcdGNvbnN0IGFwcGVuZFRhc2tCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnVuaXF1ZUJ0bi5hcHBlbmRUYXNrQnRuXCIpO1xuXHRcdFx0dGhpcy5zdWJtaXRUYXNrRnVuY3Rpb24oYXBwZW5kVGFza0J0biwgcHJvamVjdE5hbWUpO1xuXHRcdH0pO1xuXHR9XG5cblx0YWRkTmV3VGFzayhwcm9qZWN0TmFtZSwgdGFza0luZm8pIHtcblx0XHR0aGlzLnRvRG9MaXN0XG5cdFx0XHQuZ2V0UHJvamVjdChwcm9qZWN0TmFtZSlcblx0XHRcdC5hZGRUYXNrKFxuXHRcdFx0XHRuZXcgVGFzayhcblx0XHRcdFx0XHR0YXNrSW5mb1tcInRpdGxlXCJdLFxuXHRcdFx0XHRcdHRhc2tJbmZvW1wiZGV0YWlsc1wiXSxcblx0XHRcdFx0XHR0YXNrSW5mb1tcImRhdGVcIl0sXG5cdFx0XHRcdFx0dGFza0luZm9bXCJwcmlvcml0eVwiXSxcblx0XHRcdFx0XHR0aGlzLnRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdE5hbWUpLnRhc2tzLmxlbmd0aFxuXHRcdFx0XHQpXG5cdFx0XHQpO1xuXHRcdGNvbnN0IGN1cnJlbnRUYXNrSWQgPVxuXHRcdFx0dGhpcy50b0RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3ROYW1lKS50YXNrcy5sZW5ndGggLSAxO1xuXHRcdHRoaXMuZHJhd1BhZ2UocHJvamVjdE5hbWUpO1xuXHRcdHRoaXMuYWRkRGVsZXRlVGFza0Z1bmN0aW9uKHByb2plY3ROYW1lLCBjdXJyZW50VGFza0lkKTtcblx0fVxuXG5cdHN1Ym1pdFRhc2tGdW5jdGlvbihidG4sIHByb2plY3ROYW1lKSB7XG5cdFx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcblx0XHRcdGNvbnN0IHRhc2tJbmZvID0gdGhpcy5jdXJyZW50Rm9ybS5jb2xsZWN0VGFza0luZm8oKTtcblx0XHRcdHRoaXMuYWRkTmV3VGFzayhwcm9qZWN0TmFtZSwgdGFza0luZm8pO1xuXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKS5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmFjZS1tYXNrXCIpLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHR9KTtcblx0fVxuXG5cdGFkZERlbGV0ZVRhc2tGdW5jdGlvbihwcm9qZWN0TmFtZSwgdGFza0lkKSB7XG5cblx0XHRjb25zdCBkZWxJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgZGVsVGFzay0ke3Rhc2tJZH1gKTtcblx0XHRkZWxJbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblx0XHRcdHRoaXMudG9Eb0xpc3QuZ2V0UHJvamVjdChwcm9qZWN0TmFtZSkuZGVsZXRlVGFzayh0YXNrSWQpO1xuXHRcdFx0dGhpcy5kcmF3UGFnZShwcm9qZWN0TmFtZSk7XG5cdFx0fSk7XG5cdH1cblxuXHQvKiBTaWRlQmFyIGZ1bmN0aW9uYWxpdGllcyAqL1xuXHRsb2FkU2lkZUJhcigpIHtcblx0XHR0aGlzLmFkZFNsaWRlSW5PdXQoKTtcblx0XHR0aGlzLmRyYXdJbmJveFRhYnMoKTtcblx0XHR0aGlzLmRyYXdQcm9qZWN0VGFicygpO1xuXHR9XG5cblx0ZHJhd0luYm94VGFicygpIHtcblx0XHQvLyBBZGQgdG9kYXkgYW5kIHRoaXMgd2VlaydzIHRhc2sgYmVuZWF0aCBJbmJveCB0YWIgc2lkZWJhci5cblx0XHRjb25zdCBpbmJveFRhYnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG5cblx0XHR0aGlzLmFkZFRhYihpbmJveFRhYnMsIFwiVG9kYXlcIik7XG5cdFx0dGhpcy5hZGRUYWIoaW5ib3hUYWJzLCBcIlRoaXMgV2Vla1wiKTtcblxuXHRcdGNvbnN0IGluYm94QmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbmJveC1iYXJcIik7XG5cdFx0aW5ib3hCYXIuYXBwZW5kQ2hpbGQoaW5ib3hUYWJzKTtcblx0XHR0aGlzLmFkZERyb3BEb3duTWVudShpbmJveEJhciwgaW5ib3hUYWJzKTtcblx0fVxuXG5cdGRyYXdQcm9qZWN0VGFicygpIHtcblx0XHQvLyBGaW5kIGFsbCBvdGhlciBwcm9qZWN0cy5cblx0XHRjb25zdCBpbmJveFByb2plY3RzID0gW1wiSW5ib3hcIiwgXCJUb2RheVwiLCBcIlRoaXMgV2Vla1wiXTtcblx0XHRjb25zdCBjdXN0b21Qcm9qZWN0cyA9IHRoaXMudG9Eb0xpc3QucHJvamVjdHMuZmlsdGVyKFxuXHRcdFx0KHByb2plY3QpID0+ICFpbmJveFByb2plY3RzLmluY2x1ZGVzKHByb2plY3QubmFtZSlcblx0XHQpO1xuXG5cdFx0Y29uc3QgcHJvamVjdFRhYnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG5cdFx0Zm9yIChsZXQgcHJvamVjdCBvZiBjdXN0b21Qcm9qZWN0cykge1xuXHRcdFx0dGhpcy5hZGRUYWIocHJvamVjdFRhYnMsIHByb2plY3QubmFtZSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcHJvamVjdEJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1iYXJcIik7XG5cdFx0cHJvamVjdEJhci5hcHBlbmRDaGlsZChwcm9qZWN0VGFicyk7XG5cdFx0dGhpcy5hZGREcm9wRG93bk1lbnUocHJvamVjdEJhciwgcHJvamVjdFRhYnMpO1xuXHR9XG5cblx0YWRkRHJvcERvd25NZW51KG1lbnVCYXIsIHRhYnMpIHtcblx0XHQvLyBUYWJzIHdpbGwgYmUgZWxvbmdhdGVkIGJhc2VkIG9uIHRhYiBob3ZlcmVkLlxuXHRcdG1lbnVCYXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCAoKSA9PiB7XG5cdFx0XHR0YWJzLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cdFx0fSk7XG5cdFx0bWVudUJhci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKCkgPT4ge1xuXHRcdFx0dGFicy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0fSk7XG5cdH1cblx0YWRkVGFiKG1lbnVUYWIsIHByb2plY3ROYW1lKSB7XG5cdFx0Ly8gQ3JlYXRlIGxpIGFuZCBhcHBlbmQgaXQgdG8gZ2l2ZW4gcGFyYW0gZWxlbS5cblx0XHRjb25zdCB0YWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG5cblx0XHR0YWIudGV4dENvbnRlbnQgPSB0aGlzLnRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdE5hbWUpLm5hbWU7XG5cdFx0bWVudVRhYi5hcHBlbmRDaGlsZCh0YWIpO1xuXHR9XG5cblx0YWRkU2xpZGVJbk91dCgpIHtcblx0XHRjb25zdCBzaWRlQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaWRlQmFyXCIpO1xuXHRcdGNvbnN0IG1hdGVyaWFsSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1hdGVyaWFsLWljb25zXCIpO1xuXHRcdGNvbnN0IGljb25UZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pY29uLXRleHRcIik7XG5cdFx0c2lkZUJhci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsICgpID0+IHtcblx0XHRcdHNpZGVCYXIuc3R5bGUud2lkdGggPSBcIjIwMHB4XCI7XG5cdFx0fSk7XG5cdFx0c2lkZUJhci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKCkgPT4ge1xuXHRcdFx0c2lkZUJhci5zdHlsZS53aWR0aCA9IFwiNjVweFwiO1xuXHRcdH0pO1xuXHR9XG59XG4iLCJleHBvcnQge0RyYXdGb3JtfVxuXG5jb25zdCBEcmF3Rm9ybSA9ICgpID0+IHtcbiAgICAvLyBXaGVuIHVzZXIgcHJlc3NlcyBhZGQgdGFzaywgcG9wIHVwIGEgZm9ybSB0aGF0IGFza3MgZm9yIGFsbCByZXEgaW5wdXQuXG4gICAgLy8gVGhpcyBpbmNsdWRlcyBbdGFza05hbWUsIGRldGFpbHMsIHByaW9yaXR5TGV2ZWwsIERhdGVdO1xuICAgIGNvbnN0IGZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1jb250YWluZXInKTtcblxuICAgIGNvbnN0IGNsZWFyID0gKCkgPT4ge1xuICAgICAgICB3aGlsZShmb3JtQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIGZvcm1Db250YWluZXIucmVtb3ZlQ2hpbGQoZm9ybUNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBhZGRUYXNrID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB0YXNrVGl0bGUgPSBhZGRJbnB1dFRleHQoJ1Rhc2sgVGl0bGU6ICcsICdlLmcuIExlYXJuIFJlYWN0IGluICcgK1xuICAgICAgICAnMjAgZGF5cy4uJywgJ2lucHV0VGFza1RpdGxlJyk7XG4gICAgICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QuYWRkKCdpbnB1dFRhc2tUaXRsZScpO1xuXG4gICAgICAgIGNvbnN0IHRhc2tEZXRhaWxzID0gYWRkVGV4dEFyZWEoJ1Rhc2sgRGV0YWlsczogJywgJ2UuZy4gTm90IGFuICcgK1xuICAgICAgICAndGFzay4gUmVtZW1iZXIgdG8gdGFrZSBicmVha3MgYW5kIHdhbGsgb3V0c2lkZS4nLFxuICAgICAgICAgJ2lucHV0VGFza0RldGFpbHMnKTtcbiAgICAgICAgdGFza0RldGFpbHMuY2xhc3NMaXN0LmFkZCgnaW5wdXRUYXNrRGV0YWlscycpOyBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByaW9PcHRpb25zID0gYWRkUHJpb3JpdHlPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IGR1ZURhdGUgPSBhZGRJbnB1dER1ZURhdGUoKTtcbiAgICAgICAgY29uc3QgY2xvc2VGb3JtT3B0aW9uID0gYWRkQ2xvc2VGb3JtRnVuY3Rpb24oKTtcblxuICAgICAgICBjb25zdCB0YXNrc0luZm8gPSBbdGFza1RpdGxlLCB0YXNrRGV0YWlscywgcHJpb09wdGlvbnMsIGR1ZURhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VGb3JtT3B0aW9uXTtcblxuICAgICAgICBmb3IobGV0IGluZm8gb2YgdGFza3NJbmZvKSB7XG4gICAgICAgICAgICBmb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKGluZm8pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEFkZCBzdWJtaXQgYnRuLlxuICAgICAgICBjb25zdCBhcHBlbmRUYXNrQnRuID0gYWRkQXBwZW5kVGFza0J0bigpXG4gICAgICAgIFxuICAgICAgICBmb3JtQ29udGFpbmVyLmFwcGVuZENoaWxkKGFwcGVuZFRhc2tCdG4pO1xuICAgIH07XG4gICAgXG4gICAgY29uc3QgYWRkQXBwZW5kVGFza0J0biA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYXBwZW5kVGFza0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBhcHBlbmRUYXNrQnRuLmNsYXNzTGlzdC5hZGQoJ3VuaXF1ZUJ0bicpO1xuICAgICAgICBhcHBlbmRUYXNrQnRuLmNsYXNzTGlzdC5hZGQoJ2FwcGVuZFRhc2tCdG4nKTtcbiAgICAgICAgYXBwZW5kVGFza0J0bi50ZXh0Q29udGVudCA9ICdBZGQgVGFzayc7XG4gICAgICAgIGFwcGVuZFRhc2tCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGFwcGVuZFRhc2tCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgICAvLyAgICAgYXBwZW5kVGFza0Z1bmN0aW9uKGV2ZW50KVxuICAgICAgICAvLyB9KTtcblxuICAgICAgICByZXR1cm4gYXBwZW5kVGFza0J0bjtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xsZWN0VGFza0luZm8gPSAoKSA9PiB7XG4gICAgICAgIC8vIENvbGxlY3QgYWxsIHJlbGV2YW50IGluZm9ybWF0aW9uIGJhc2VkIG9uIHVzZXIgaW5wdXQgYW5kIHJldHVyblxuICAgICAgICAvLyBpdCBpbiBhbiBvYmouXG4gICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dFRhc2tUaXRsZScpO1xuICAgICAgICBjb25zdCB0YXNrRGV0YWlscyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dFRhc2tEZXRhaWxzJyk7XG4gICAgICAgIGNvbnN0IHByaW9DaG9zZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgJ2lucHV0W25hbWU9XCJwcmlvXCJdOmNoZWNrZWQnKTtcbiAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnB1dER1ZURhdGUnKTtcbiAgICAgICAgY29uc3QgdGFza0luZm8gPSB7XG4gICAgICAgICAgICAndGl0bGUnOiB0YXNrVGl0bGUudmFsdWUsXG4gICAgICAgICAgICAnZGV0YWlscyc6IHRhc2tEZXRhaWxzLnZhbHVlLFxuICAgICAgICAgICAgJ3ByaW9yaXR5JzogcHJpb0Nob3Nlbi52YWx1ZSxcbiAgICAgICAgICAgICdkYXRlJzogZGF0ZS52YWx1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRhc2tJbmZvOyBcbiAgICB9XG5cbiAgICBjb25zdCBhZGRDbG9zZUZvcm1GdW5jdGlvbiA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY2xvc2VGb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgIGNsb3NlRm9ybS5jbGFzc0xpc3QuYWRkKCdjbG9zZUZvcm1CdG4nKTtcbiAgICAgICAgY2xvc2VGb3JtLnNyYyA9ICcuLi8uLi8uLi9pbWdzL21hYy1jbG9zZS1idG4ucG5nJztcbiAgICAgICAgY2xvc2VGb3JtLmFsdCA9ICdBIGJ1dHRvbiB0aGF0IGNsb3NlcyB0aGUgZm9ybS4nO1xuXG4gICAgICAgIGNsb3NlRm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XG4gICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZhY2UtbWFzaycpO1xuICAgICAgICAgICAgZm9ybS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICBvdmVybGF5LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNsb3NlRm9ybTtcbiAgICB9O1xuXG4gICAgY29uc3QgYWRkSW5wdXREdWVEYXRlID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBkdWVEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgY29uc3QgZGF0ZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgZGF0ZUxhYmVsLmNsYXNzTGlzdC5hZGQoJ2RhdGVMYWJlbCcpO1xuICAgICAgICBkYXRlTGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCAnaW5wdXREdWVEYXRlJyk7XG4gICAgICAgIGRhdGVMYWJlbC50ZXh0Q29udGVudCA9ICdEdWUgRGF0ZTonO1xuXG4gICAgICAgIGNvbnN0IGlucHV0RHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGlucHV0RHVlRGF0ZS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCBcImRhdGVcIik7XG4gICAgICAgIGlucHV0RHVlRGF0ZS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2lucHV0RHVlRGF0ZScpO1xuICAgICAgICBpbnB1dER1ZURhdGUuc2V0QXR0cmlidXRlKCduYW1lJywgJ3RyaXAtc3RhcnQnKTtcblxuICAgICAgICBkdWVEYXRlLmFwcGVuZENoaWxkKGRhdGVMYWJlbCk7XG4gICAgICAgIGR1ZURhdGUuYXBwZW5kQ2hpbGQoaW5wdXREdWVEYXRlKTtcbiAgICAgICAgcmV0dXJuIGR1ZURhdGU7XG4gICAgfVxuXG4gICAgY29uc3QgYWRkUHJpb3JpdHlPcHRpb25zID0gKCkgPT4ge1xuICAgICAgICAvLyBBIHdyYXBwZXIgaXMgZ29pbmcgdG8gd3JhcCB0aGUgbGFiZWwgYW5kIGEgY29udGFpbmVyIGNvbnNpc3Rpbmcgb2ZcbiAgICAgICAgLy8gdGhlIHJhZGlvIG9wdGlvbnMuIFxuICAgICAgICBjb25zdCBpbnB1dFByaW9XcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNvbnN0IHByaW9PcHRpb25zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGlucHV0UHJpb1dyYXBwZXIuY2xhc3NMaXN0LmFkZCgncHJpb1dyYXBwZXInKVxuICAgICAgICBwcmlvT3B0aW9uc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdwcmlvT3B0aW9ucycpO1xuXG4gICAgICAgIGxhYmVsLmNsYXNzTGlzdC5hZGQoJ3ByaW9MYWJlbCcpO1xuICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IFwiSG93IGltcG9ydGFudCBpcyB0aGlzIHRhc2s/XCI7XG4gICAgICAgIGNvbnN0IGxvd1ByaW8gPSBjcmVhdGVSYWRpb0lucHV0QW5kTGFiZWwoJ2xvd1ByaW8nLCAnbG93Jyk7XG4gICAgICAgIGNvbnN0IG1lZFByaW8gPSBjcmVhdGVSYWRpb0lucHV0QW5kTGFiZWwoJ21lZFByaW8nLCAnbWVkaXVtJyk7XG4gICAgICAgIGNvbnN0IGhpZ2hQcmlvID0gY3JlYXRlUmFkaW9JbnB1dEFuZExhYmVsKCdoaWdoUHJpbycsICdoaWdoJyk7XG5cbiAgICAgICAgZm9yKGxldCBwcmlvT3B0aW9ucyBvZiBbbG93UHJpbywgbWVkUHJpbywgaGlnaFByaW9dKSB7XG4gICAgICAgICAgICBwcmlvT3B0aW9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChwcmlvT3B0aW9ucyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaW5wdXRQcmlvV3JhcHBlci5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgIGlucHV0UHJpb1dyYXBwZXIuYXBwZW5kQ2hpbGQocHJpb09wdGlvbnNDb250YWluZXIpO1xuICAgICAgICByZXR1cm4gaW5wdXRQcmlvV3JhcHBlcjtcblxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVSYWRpb0lucHV0QW5kTGFiZWwoaWQsIHZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCByYWRpb09wdGlvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHtcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJyYWRpb1wiLFxuICAgICAgICAgICAgICAgIFwiaWRcIjogaWQsXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6ICdwcmlvJyxcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IHZhbHVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvcihsZXQgYXR0ciBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKGF0dHIsIGF0dHJpYnV0ZXNbYXR0cl0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCBpZCk7XG4gICAgICAgICAgICBsYWJlbC5jbGFzc0xpc3QuYWRkKGlkKTtcbiAgICAgICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gdmFsdWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJhZGlvT3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgIHJhZGlvT3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIHJldHVybiByYWRpb09wdGlvbkNvbnRhaW5lcjtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBhZGRUZXh0QXJlYSA9IChsYWJlbE5hbWUsIHBsYWNlaG9sZGVyLCBpZCwgcmVxdWlyZWQ9dHJ1ZSkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnN0IGlucHV0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICBpbnB1dExhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgaWQpO1xuICAgICAgICBpbnB1dExhYmVsLnRleHRDb250ZW50ID0gbGFiZWxOYW1lO1xuXG4gICAgICAgIGNvbnN0IGlucHV0VGV4dEFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAgJ2lkJzogaWQsXG4gICAgICAgICAgICAnbmFtZSc6IGlkLFxuICAgICAgICAgICAgJ3BsYWNlaG9sZGVyJzogcGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAncm93cyc6IDYsXG4gICAgICAgICAgICAnY29scyc6IDUwLFxuICAgICAgICB9O1xuXG4gICAgICAgIGZvcihsZXQgYXR0cklkeCBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBpbnB1dFRleHRBcmVhLnNldEF0dHJpYnV0ZShhdHRySWR4LCBhdHRyaWJ1dGVzW2F0dHJJZHhdKVxuICAgICAgICB9XG4gICAgICAgIGlucHV0VGV4dEFyZWEucmVxdWlyZWQgPSByZXF1aXJlZDsgLy8gRGVmYXVsdCBUcnVlXG5cbiAgICAgICAgaW5wdXQuYXBwZW5kQ2hpbGQoaW5wdXRMYWJlbCk7XG4gICAgICAgIGlucHV0LmFwcGVuZENoaWxkKGlucHV0VGV4dEFyZWEpO1xuICAgICAgICByZXR1cm4gaW5wdXRcbiAgICB9XG5cbiAgICBjb25zdCBhZGRJbnB1dFRleHQgPSAobGFiZWxOYW1lLCBwbGFjZWhvbGRlciwgaWQsIHJlcXVpcmVkPXRydWUpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb25zdCBpbnB1dExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgaW5wdXRMYWJlbC5zZXRBdHRyaWJ1dGUoJ2ZvcicsIGlkKTtcbiAgICAgICAgaW5wdXRMYWJlbC50ZXh0Q29udGVudCA9IGxhYmVsTmFtZTtcblxuICAgICAgICBjb25zdCBpbnB1dFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0ge1xuICAgICAgICAgICAgJ3R5cGUnOiAndGV4dCcsXG4gICAgICAgICAgICAnaWQnOiBpZCxcbiAgICAgICAgICAgICduYW1lJzogaWQsXG4gICAgICAgICAgICAncGxhY2Vob2xkZXInOiBwbGFjZWhvbGRlclxuICAgICAgICB9O1xuICAgICAgICBmb3IobGV0IGF0dHJJZHggaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgaW5wdXRUZXh0LnNldEF0dHJpYnV0ZShhdHRySWR4LCBhdHRyaWJ1dGVzW2F0dHJJZHhdKVxuICAgICAgICB9XG5cbiAgICAgICAgaW5wdXRUZXh0LnJlcXVpcmVkID0gcmVxdWlyZWQ7IFxuXG4gICAgICAgIGlucHV0LmFwcGVuZENoaWxkKGlucHV0TGFiZWwpO1xuICAgICAgICBpbnB1dC5hcHBlbmRDaGlsZChpbnB1dFRleHQpO1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuICAgIHJldHVybiB7IGFkZFRhc2ssIGNsZWFyLCBjb2xsZWN0VGFza0luZm8gfTtcblxuXG59Il0sIm5hbWVzIjpbIlRhc2siLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsImlkIiwidGhpcyIsInZhbHVlIiwiX25hbWUiLCJfaWQiLCJfcHJpb3JpdHkiLCJfZGVzY3JpcHRpb24iLCJfZHVlRGF0ZSIsImR1ZURhdGVGb3JtYXR0ZWQiLCJzcGxpdCIsIlByb2plY3QiLCJ0YXNrcyIsIl90YXNrcyIsImFkZFRhc2siLCJ0YXNrIiwicHVzaCIsImRlbGV0ZVRhc2siLCJ0YXNrSWQiLCJmaWx0ZXIiLCJBbGxQcm9qZWN0cyIsInByb2plY3RzIiwiX3Byb2plY3RzIiwiY29udGFpbnMiLCJwcm9qZWN0TmFtZSIsInNvbWUiLCJwcm9qZWN0IiwiZ2V0UHJvamVjdCIsImZpbmQiLCJhZGRQcm9qZWN0IiwibmV3UHJvamVjdE5hbWUiLCJkZWxldGVQcm9qZWN0IiwicHJvamVjdFRvRGVsZXRlIiwic3BsaWNlIiwiaW5kZXhPZiIsIlRhc2tVSSIsInRhc2tPYmoiLCJyZW5kZXJJbmZvIiwiZWxlbSIsImFkZGVkQ2xhc3MiLCJ0ZXh0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJjcmVhdGVFbGVtZW50cyIsInRhc2tDb250YWluZXIiLCJzdGF0dXNDaGVjayIsInNldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsImNoZWNrZWQiLCJzdHlsZSIsIm9wYWNpdHkiLCJkZXRhaWxzQnRuIiwicHJpb3JpdHlJY29uIiwiYXBwZW5kQ2hpbGQiLCJkYXRlIiwiZWRpdCIsImVkaXRJY29uIiwidGFza0RlbCIsImRlbEljb24iLCJkcmF3IiwiZWxlbXMiLCJQcm9qZWN0VUkiLCJwcm9qZWN0T2JqIiwibWFpbkNvbnRlbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xlYXIiLCJkcmF3VGFza3MiLCJhZGRUYXNrT3B0aW9uIiwiYWRkVGFza0NvbnRhaW5lciIsImFkZFRhc2tCdG4iLCJjb250YWluZXIiLCJ0YXNrRGlzcGxheSIsImNvbnRlbnQiLCJpbm5lckhUTUwiLCJjb21wbGV0ZVRhc2siLCJnZXRFbGVtZW50QnlJZCIsInRvRG9MaXN0IiwiY3VycmVudFByb2plY3RQYWdlIiwiY3VycmVudEZvcm0iLCJmb3JtQ29udGFpbmVyIiwiYWRkQ2xvc2VGb3JtRnVuY3Rpb24iLCJjbG9zZUZvcm0iLCJzcmMiLCJhbHQiLCJmb3JtIiwib3ZlcmxheSIsInZpc2liaWxpdHkiLCJhZGRJbnB1dER1ZURhdGUiLCJkYXRlTGFiZWwiLCJpbnB1dER1ZURhdGUiLCJhZGRQcmlvcml0eU9wdGlvbnMiLCJpbnB1dFByaW9XcmFwcGVyIiwibGFiZWwiLCJwcmlvT3B0aW9uc0NvbnRhaW5lciIsImxvd1ByaW8iLCJjcmVhdGVSYWRpb0lucHV0QW5kTGFiZWwiLCJtZWRQcmlvIiwiaGlnaFByaW8iLCJwcmlvT3B0aW9ucyIsInJhZGlvT3B0aW9uQ29udGFpbmVyIiwiaW5wdXQiLCJhdHRyaWJ1dGVzIiwiYXR0ciIsInRhc2tUaXRsZSIsImxhYmVsTmFtZSIsInBsYWNlaG9sZGVyIiwicmVxdWlyZWQiLCJpbnB1dExhYmVsIiwiaW5wdXRUZXh0IiwiYXR0cklkeCIsImFkZElucHV0VGV4dCIsInRhc2tEZXRhaWxzIiwiaW5wdXRUZXh0QXJlYSIsImFkZFRleHRBcmVhIiwidGFza3NJbmZvIiwiaW5mbyIsImFwcGVuZFRhc2tCdG4iLCJhZGRBcHBlbmRUYXNrQnRuIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwibGFzdENoaWxkIiwiY29sbGVjdFRhc2tJbmZvIiwicHJpb0Nob3NlbiIsIkRyYXdGb3JtIiwibG9hZEhvbWVQYWdlIiwibGVuZ3RoIiwiYWRkTmV3VGFzayIsImxvYWRTaWRlQmFyIiwiZHJhd1BhZ2UiLCJhZGRUYXNrRnVuY3Rpb24iLCJ2YWx1ZUFzRGF0ZSIsIkRhdGUiLCJzdWJtaXRUYXNrRnVuY3Rpb24iLCJ0YXNrSW5mbyIsImN1cnJlbnRUYXNrSWQiLCJhZGREZWxldGVUYXNrRnVuY3Rpb24iLCJidG4iLCJwcmV2ZW50RGVmYXVsdCIsImFkZFNsaWRlSW5PdXQiLCJkcmF3SW5ib3hUYWJzIiwiZHJhd1Byb2plY3RUYWJzIiwiaW5ib3hUYWJzIiwiYWRkVGFiIiwiaW5ib3hCYXIiLCJhZGREcm9wRG93bk1lbnUiLCJpbmJveFByb2plY3RzIiwiY3VzdG9tUHJvamVjdHMiLCJpbmNsdWRlcyIsInByb2plY3RUYWJzIiwicHJvamVjdEJhciIsIm1lbnVCYXIiLCJ0YWJzIiwiZGlzcGxheSIsIm1lbnVUYWIiLCJ0YWIiLCJzaWRlQmFyIiwicXVlcnlTZWxlY3RvckFsbCIsIndpZHRoIl0sInNvdXJjZVJvb3QiOiIifQ==